(function(e,t){typeof exports=="object"&&typeof module<"u"?t(exports):typeof define=="function"&&define.amd?define(["exports"],t):t((e=typeof globalThis<"u"?globalThis:e||self).dhtmlxscheduler={})})(this,function(exports){"use strict";function dhtmlxHook(){typeof dhtmlx<"u"&&dhtmlx.attaches&&(dhtmlx.attaches.attachScheduler=function(e,t,a,n){a=a||'<div class="dhx_cal_tab" name="day_tab" data-tab="day" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" data-tab="week" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" data-tab="month" style="right:76px;"></div>';var o=document.createElement("DIV");return o.id="dhxSchedObj_"+this._genStr(12),o.innerHTML='<div id="'+o.id+'" class="dhx_cal_container" style="width:100%; height:100%;"><div class="dhx_cal_navline"><div class="dhx_cal_prev_button"></div><div class="dhx_cal_next_button"></div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div>'+a+'</div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div></div>',document.body.appendChild(o.firstChild),this.attachObject(o.id,!1,!0),this.vs[this.av].sched=n,this.vs[this.av].schedId=o.id,n.setSizes=n.updateView,n.destructor=function(){},n.init(o.id,e,t),this.vs[this._viewRestore()].sched})}const theme="";var globalScope;globalScope=typeof window<"u"?window:global;const global$1=globalScope;function assert(e){return function(t,a){t||e.config.show_errors&&e.callEvent("onError",[a])!==!1&&(e.message?e.message({type:"error",text:a,expire:-1}):console.log(a))}}function extend$p(e){var t={agenda:"https://docs.dhtmlx.com/scheduler/agenda_view.html",grid:"https://docs.dhtmlx.com/scheduler/grid_view.html",map:"https://docs.dhtmlx.com/scheduler/map_view.html",unit:"https://docs.dhtmlx.com/scheduler/units_view.html",timeline:"https://docs.dhtmlx.com/scheduler/timeline_view.html",week_agenda:"https://docs.dhtmlx.com/scheduler/weekagenda_view.html",year:"https://docs.dhtmlx.com/scheduler/year_view.html",anythingElse:"https://docs.dhtmlx.com/scheduler/views.html"},a={agenda:"ext/dhtmlxscheduler_agenda_view.js",grid:"ext/dhtmlxscheduler_grid_view.js",map:"ext/dhtmlxscheduler_map_view.js",unit:"ext/dhtmlxscheduler_units.js",timeline:"ext/dhtmlxscheduler_timeline.js, ext/dhtmlxscheduler_treetimeline.js, ext/dhtmlxscheduler_daytimeline.js",week_agenda:"ext/dhtmlxscheduler_week_agenda.js",year:"ext/dhtmlxscheduler_year_view.js",limit:"ext/dhtmlxscheduler_limit.js"};e._commonErrorMessages={unknownView:function(n){var o=a[n]?"You're probably missing "+a[n]+".":"";return"`"+n+"` view is not defined. \nPlease check parameters you pass to `scheduler.init` or `scheduler.setCurrentView` in your code and ensure you've imported appropriate extensions. \n"+("Related docs: "+(t[n]||t.anythingElse))+`
`+(o?o+`
`:"")},collapsedContainer:function(n){return`Scheduler container height is set to *100%* but the rendered height is zero and the scheduler is not visible. 
Make sure that the container has some initial height or use different units. For example:
<div id='scheduler_here' class='dhx_cal_container' style='width:100%; height:600px;'> 
`}},e.createTimelineView=function(){throw new Error("scheduler.createTimelineView is not implemented. Be sure to add the required extension: "+a.timeline+`
Related docs: `+t.timeline)},e.createUnitsView=function(){throw new Error("scheduler.createUnitsView is not implemented. Be sure to add the required extension: "+a.unit+`
Related docs: `+t.unit)},e.createGridView=function(){throw new Error("scheduler.createGridView is not implemented. Be sure to add the required extension: "+a.grid+`
Related docs: `+t.grid)},e.addMarkedTimespan=function(){throw new Error(`scheduler.addMarkedTimespan is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_limit.js
Related docs: https://docs.dhtmlx.com/scheduler/limits.html`)},e.renderCalendar=function(){throw new Error(`scheduler.renderCalendar is not implemented. Be sure to add the required extension: ext/dhtmlxscheduler_minical.js
https://docs.dhtmlx.com/scheduler/minicalendar.html`)},e.exportToPNG=function(){throw new Error(["scheduler.exportToPNG is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/png.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join(`
`))},e.exportToPDF=function(){throw new Error(["scheduler.exportToPDF is not implemented.","This feature requires an additional module, be sure to check the related doc here https://docs.dhtmlx.com/scheduler/pdf.html","Licensing info: https://dhtmlx.com/docs/products/dhtmlxScheduler/export.shtml"].join(`
`))}}function extend$o(e){e.attachEvent("onSchedulerReady",function(){typeof dhtmlxError<"u"&&window.dhtmlxError.catchError("LoadXML",function(t,a,n){var o=n[0].responseText;switch(e.config.ajax_error){case"alert":global$1.alert(o);break;case"console":global$1.console.log(o)}})})}function extend$n(e){function t(i){var s=document.createElement("div");return(i||"").split(" ").forEach(function(d){s.classList.add(d)}),s}var a={rows_container:function(){return t("dhx_cal_navbar_rows_container")},row:function(){return t("dhx_cal_navbar_row")},view:function(i){var s=t("dhx_cal_tab");return s.setAttribute("name",i.view+"_tab"),s.setAttribute("data-tab",i.view),e.config.fix_tab_position&&(i.$firstTab?s.classList.add("dhx_cal_tab_first"):i.$lastTab?s.classList.add("dhx_cal_tab_last"):i.view!=="week"&&s.classList.add("dhx_cal_tab_standalone"),i.$segmentedTab&&s.classList.add("dhx_cal_tab_segmented")),s},date:function(){return t("dhx_cal_date")},button:function(i){return t("dhx_cal_nav_button dhx_cal_nav_button_custom dhx_cal_tab")},builtInButton:function(i){return t("dhx_cal_"+i.view+"_button dhx_cal_nav_button")},spacer:function(){return t("dhx_cal_line_spacer")},minicalendarButton:function(i){var s=t("dhx_minical_icon");return i.click||s.$_eventAttached||e.event(s,"click",function(){e.isCalendarVisible()?e.destroyCalendar():e.renderCalendar({position:this,date:e.getState().date,navigation:!0,handler:function(d,l){e.setCurrentView(d),e.destroyCalendar()}})}),s},html_element:function(i){return t("dhx_cal_nav_content")}};function n(i){var s=function(h){var f;if(h.view)switch(h.view){case"today":case"next":case"prev":f=a.builtInButton;break;case"date":f=a.date;break;case"spacer":f=a.spacer;break;case"button":f=a.button;break;case"minicalendar":f=a.minicalendarButton;break;default:f=a.view}else h.rows?f=a.rows_container:h.cols&&(f=a.row);return f}(i);if(s){var d=s(i);if(i.css&&d.classList.add(i.css),i.width&&((l=i.width)===1*l&&(l+="px"),d.style.width=l),i.height&&((l=i.height)===1*l&&(l+="px"),d.style.height=l),i.click&&d.addEventListener("click",i.click),i.html&&(d.innerHTML=i.html),i.align){var l="";i.align=="right"?l="flex-end":i.align=="left"&&(l="flex-start"),d.style.justifyContent=l}return d}}function o(i){return typeof i=="string"&&(i={view:i}),i.view||i.rows||i.cols||(i.view="button"),i}function r(i){var s,d=document.createDocumentFragment();s=Array.isArray(i)?i:[i];for(var l=0;l<s.length;l++){var h,f=o(s[l]);f.view==="day"&&s[l+1]&&((h=o(s[l+1])).view!=="week"&&h.view!=="month"||(f.$firstTab=!0,f.$segmentedTab=!0)),f.view==="week"&&s[l-1]&&((h=o(s[l+1])).view!=="week"&&h.view!=="month"||(f.$segmentedTab=!0)),f.view==="month"&&s[l-1]&&((h=o(s[l-1])).view!=="week"&&h.view!=="day"||(f.$lastTab=!0,f.$segmentedTab=!0));var m=n(f);d.appendChild(m),(f.cols||f.rows)&&m.appendChild(r(f.cols||f.rows))}return d}e._init_nav_bar=function(i){var s=this.$container.querySelector(".dhx_cal_navline");return s||((s=document.createElement("div")).className="dhx_cal_navline dhx_cal_navline_flex",e._update_nav_bar(i,s),s)};var _=null;e._update_nav_bar=function(i,s){if(i){var d=!1,l=i.height||e.xy.nav_height;_!==null&&_===l||(d=!0),d&&(e.xy.nav_height=l),s.innerHTML="",s.appendChild(r(i)),e.unset_actions(),e._els=[],e.get_elements(),e.set_actions(),s.style.display=l===0?"none":"",_=l}}}function extend$m(e){function t(r){for(var _=document.body;r&&r!=_;)r=r.parentNode;return _==r}function a(r){return{w:r.innerWidth||document.documentElement.clientWidth,h:r.innerHeight||document.documentElement.clientHeight}}function n(r,_){var i,s=a(_);r.event(_,"resize",function(){clearTimeout(i),i=setTimeout(function(){if(t(r.$container)&&!r.$destroyed){var d,l,h=a(_);l=h,((d=s).w!=l.w||d.h!=l.h)&&(s=h,o(r))}},150)})}function o(r){!r.$destroyed&&r.$root&&t(r.$root)&&r.callEvent("onSchedulerResize",[])&&(r.updateView(),r.callEvent("onAfterSchedulerResize",[]))}(function(r){var _=r.$container;window.getComputedStyle(_).getPropertyValue("position")=="static"&&(_.style.position="relative");var i=document.createElement("iframe");i.className="scheduler_container_resize_watcher",i.tabIndex=-1,r.config.wai_aria_attributes&&(i.setAttribute("role","none"),i.setAttribute("aria-hidden",!0)),window.Sfdc||window.$A||window.Aura?function(s){var d=s.$root.offsetHeight,l=s.$root.offsetWidth;(function h(){s.$destroyed||(s.$root&&(s.$root.offsetHeight==d&&s.$root.offsetWidth==l||o(s),d=s.$root.offsetHeight,l=s.$root.offsetWidth),setTimeout(h,200))})()}(r):(_.appendChild(i),i.contentWindow?n(r,i.contentWindow):(_.removeChild(i),n(r,window)))})(e)}class EventHost{constructor(){this._silent_mode=!1,this.listeners={}}_silentStart(){this._silent_mode=!0}_silentEnd(){this._silent_mode=!1}}const createEventStorage=function(e){let t={},a=0;const n=function(){let o=!0;for(const r in t){const _=t[r].apply(e,arguments);o=o&&_}return o};return n.addEvent=function(o,r){if(typeof o=="function"){let _;if(r&&r.id?_=r.id:(_=a,a++),r&&r.once){const i=o;o=function(){i(),n.removeEvent(_)}}return t[_]=o,_}return!1},n.removeEvent=function(o){delete t[o]},n.clear=function(){t={}},n};function makeEventable(e){const t=new EventHost;e.attachEvent=function(a,n,o){a="ev_"+a.toLowerCase(),t.listeners[a]||(t.listeners[a]=createEventStorage(this)),o&&o.thisObject&&(n=n.bind(o.thisObject));let r=a+":"+t.listeners[a].addEvent(n,o);return o&&o.id&&(r=o.id),r},e.attachAll=function(a){this.attachEvent("listen_all",a)},e.callEvent=function(a,n){if(t._silent_mode)return!0;const o="ev_"+a.toLowerCase(),r=t.listeners;return r.ev_listen_all&&r.ev_listen_all.apply(this,[a].concat(n)),!r[o]||r[o].apply(this,n)},e.checkEvent=function(a){return!!t.listeners["ev_"+a.toLowerCase()]},e.detachEvent=function(a){if(a){let n=t.listeners;for(const r in n)n[r].removeEvent(a);const o=a.split(":");if(n=t.listeners,o.length===2){const r=o[0],_=o[1];n[r]&&n[r].removeEvent(_)}}},e.detachAllEvents=function(){for(const a in t.listeners)t.listeners[a].clear()}}function extend$l(e){makeEventable(e),extend$n(e),e._detachDomEvent=function(i,s,d){i.removeEventListener?i.removeEventListener(s,d,!1):i.detachEvent&&i.detachEvent("on"+s,d)},e._init_once=function(){extend$m(e),e._init_once=function(){}};var t={render:function(i){return e._init_nav_bar(i)}},a={render:function(i){var s=document.createElement("div");return s.className="dhx_cal_header",s}},n={render:function(i){var s=document.createElement("div");return s.className="dhx_cal_data",s}};function o(i){return!!(i.querySelector(".dhx_cal_header")&&i.querySelector(".dhx_cal_data")&&i.querySelector(".dhx_cal_navline"))}e.init=function(i,s,d){if(!this.$destroyed){if(s=s||e._currentDate(),d=d||"week",this._obj&&this.unset_actions(),this._obj=typeof i=="string"?document.getElementById(i):i,this.$container=this._obj,this.$root=this._obj,!this.$container.offsetHeight&&this.$container.offsetWidth&&this.$container.style.height==="100%"&&window.console.error(e._commonErrorMessages.collapsedContainer(),this.$container),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&this.$container.setAttribute("role","application"),this.config.header||o(this.$container)||(this.config.header=function(l){var h=["day","week","month"];if(l.matrix)for(var f in l.matrix)h.push(f);if(l._props)for(var f in l._props)h.push(f);if(l._grid&&l._grid.names)for(var f in l._grid.names)h.push(f);return["map","agenda","week_agenda","year"].forEach(function(m){l[m+"_view"]&&h.push(m)}),h.concat(["date"]).concat(["prev","today","next"])}(this),window.console.log(["Required DOM elements are missing from the scheduler container and **scheduler.config.header** is not specified.","Using a default header configuration: ","scheduler.config.header = "+JSON.stringify(this.config.header,null,2),"Check this article for the details: https://docs.dhtmlx.com/scheduler/initialization.html"].join(`
`))),this.config.header)this.$container.innerHTML="",this.$container.classList.add("dhx_cal_container"),this.config.header.height&&(this.xy.nav_height=this.config.header.height),this.$container.appendChild(t.render(this.config.header)),this.$container.appendChild(a.render()),this.$container.appendChild(n.render());else if(!o(this.$container))throw new Error(["Required DOM elements are missing from the scheduler container.","Be sure to either specify them manually in the markup: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviamarkup","Or to use **scheduler.config.header** setting so they could be created automatically: https://docs.dhtmlx.com/scheduler/initialization.html#initializingschedulerviaheaderconfig"].join(`
`));this.config.rtl&&(this.$container.className+=" dhx_cal_container_rtl"),this._skin_init&&e._skin_init(),e.date.init(),this._scroll=!0,this._els=[],this.get_elements(),this.init_templates(),this.set_actions(),this._init_once(),this._init_touch_events(),this.set_sizes(),e.callEvent("onSchedulerReady",[]),e.$initialized=!0,this.setCurrentView(s,d)}},e.xy={min_event_height:20,bar_height:24,scale_width:50,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140,month_head_height:22,event_header_height:14},e.keys={edit_save:13,edit_cancel:27},e.bind=function(i,s){return i.bind?i.bind(s):function(){return i.apply(s,arguments)}},e.set_sizes=function(){var i=this._x=this._obj.clientWidth-this.xy.margin_left,s=this._y=this._obj.clientHeight-this.xy.margin_top,d=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,l=this._table_view?-1:this.xy.scale_width,h=this.$container.querySelector(".dhx_cal_scale_placeholder");if(e._is_material_skin()?(h||((h=document.createElement("div")).className="dhx_cal_scale_placeholder",this.$container.insertBefore(h,this._els.dhx_cal_header[0])),h.style.display="block",this.set_xy(h,i,this.xy.scale_height+1,0,this._els.dhx_cal_header[0].offsetTop)):h&&h.parentNode.removeChild(h),this._lightbox&&(e.$container.offsetWidth<1200||this._setLbPosition(document.querySelector(".dhx_cal_light"))),this._data_width=i-d,e._is_new_skin()){this._els.dhx_cal_navline[0].style.width=i+"px";const u=this._els.dhx_cal_header[0];this.set_xy(u,this._data_width,this.xy.scale_height),u.style.left="",u.style.right="",this._table_view?this.config.rtl?u.style.right="-1px":u.style.left="-1px":this.config.rtl?u.style.right=`${this.xy.scale_width}px`:u.style.left=`${this.xy.scale_width}px`}else{this.set_xy(this._els.dhx_cal_navline[0],i,this.xy.nav_height,0,0),this.set_xy(this._els.dhx_cal_header[0],i-d+1,this.xy.scale_height,l,this.xy.nav_height+1);var f=this._els.dhx_cal_navline[0].offsetHeight;f>0&&(this.xy.nav_height=f);var m=this.xy.scale_height+this.xy.nav_height;this.set_xy(this._els.dhx_cal_data[0],i,s-(m+2),0,m+2)}},e.set_xy=function(i,s,d,l,h){function f(u){let p=u;return isNaN(Number(p))||(p=Math.max(0,p)+"px"),p}var m="left";s!==void 0&&(i.style.width=f(s)),d!==void 0&&(i.style.height=f(d)),arguments.length>3&&(l!==void 0&&(this.config.rtl&&(m="right"),i.style[m]=l+"px"),h!==void 0&&(i.style.top=h+"px"))},e.get_elements=function(){for(var i=this._obj.getElementsByTagName("DIV"),s=0;s<i.length;s++){var d=e._getClassName(i[s]),l=i[s].getAttribute("data-tab")||i[s].getAttribute("name")||"";d&&(d=d.split(" ")[0]),this._els[d]||(this._els[d]=[]),this._els[d].push(i[s]);var h=e.locale.labels[l+"_tab"]||e.locale.labels[l||d];typeof h!="string"&&l&&!i[s].innerHTML&&(h=l.split("_")[0]),h&&(this._waiAria.labelAttr(i[s],h),i[s].innerHTML=h)}};var r=e._createDomEventScope();function _(i,s){const d=new Date(i),l=(new Date(s).getTime()-d.getTime())/864e5;return Math.abs(l)}e.unset_actions=function(){r.detachAll()},e.set_actions=function(){for(var i in this._els)if(this._click[i])for(var s=0;s<this._els[i].length;s++){const d=this._els[i][s],l=this._click[i].bind(d);r.attach(d,"click",l)}r.attach(this._obj,"selectstart",function(d){return d.preventDefault(),!1}),r.attach(this._obj,"mousemove",function(d){e._temp_touch_block||e._on_mouse_move(d)}),r.attach(this._obj,"mousedown",function(d){e._ignore_next_click||e._on_mouse_down(d)}),r.attach(this._obj,"mouseup",function(d){e._ignore_next_click||e._on_mouse_up(d)}),r.attach(this._obj,"dblclick",function(d){e._on_dbl_click(d)}),r.attach(this._obj,"contextmenu",function(d){e.checkEvent("onContextMenu")&&d.preventDefault();var l=d,h=l.target||l.srcElement;return e.callEvent("onContextMenu",[e._locate_event(h),l])})},e.select=function(i){this._select_id!=i&&(e._close_not_saved(),this.editStop(!1),this._select_id&&this.unselect(),this._select_id=i,this.updateEvent(i),this.callEvent("onEventSelected",[i]))},e.unselect=function(i){if(!i||i==this._select_id){var s=this._select_id;this._select_id=null,s&&this.getEvent(s)&&this.updateEvent(s),this.callEvent("onEventUnselected",[s])}},e.getState=function(){return{mode:this._mode,date:new Date(this._date),min_date:new Date(this._min_date),max_date:new Date(this._max_date),editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event,select_id:this._select_id,expanded:this.expanded,drag_id:this._drag_id,drag_mode:this._drag_mode}},e._click={dhx_cal_data:function(i){if(e._ignore_next_click)return i.preventDefault&&i.preventDefault(),i.cancelBubble=!0,e._ignore_next_click=!1,!1;var s=i.target,d=e._locate_event(s);if(d){if(!e.callEvent("onClick",[d,i])||e.config.readonly)return}else e.callEvent("onEmptyClick",[e.getActionData(i).date,i]);if(d&&e.config.select){e.select(d);const h=s.closest(".dhx_menu_icon");var l=e._getClassName(h);l.indexOf("_icon")!=-1&&e._click.buttons[l.split(" ")[1].replace("icon_","")](d)}else e._close_not_saved(),e.getState().select_id&&new Date().valueOf()-(e._new_event||0)>500&&e.unselect()},dhx_cal_prev_button:function(){e._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(i,s){var d=1;e.config.rtl&&(s=-s,d=-d),e.setCurrentView(e.date.add(e.date[e._mode+"_start"](new Date(e._date)),s||d,e._mode))},dhx_cal_today_button:function(){e.callEvent("onBeforeTodayDisplayed",[])&&e.setCurrentView(e._currentDate())},dhx_cal_tab:function(){var i=this.getAttribute("data-tab"),s=this.getAttribute("name"),d=i||s.substring(0,s.search("_tab"));e.setCurrentView(e._date,d)},buttons:{delete:function(i){var s=e.locale.labels.confirm_deleting;e._dhtmlx_confirm({message:s,title:e.locale.labels.title_confirm_deleting,callback:function(){e.deleteEvent(i)},config:{ok:e.locale.labels.icon_delete}})},edit:function(i){e.edit(i)},save:function(i){e.editStop(!0)},details:function(i){e.showLightbox(i)},form:function(i){e.showLightbox(i)},cancel:function(i){e.editStop(!1)}}},e._dhtmlx_confirm=function({message:i,title:s,callback:d,config:l}){if(!i)return d();l=l||{};var h={...l,text:i};s&&(h.title=s),d&&(h.callback=function(f){f&&d()}),e.confirm(h)},e.addEventNow=function(i,s,d){var l={};e._isObject(i)&&!e._isDate(i)&&(l=i,i=null);var h=6e4*(this.config.event_duration||this.config.time_step);i||(i=l.start_date||Math.round(e._currentDate().valueOf()/h)*h);var f=new Date(i);if(!s){var m=this.config.first_hour;m>f.getHours()&&(f.setHours(m),i=f.valueOf()),s=i.valueOf()+h}var u=new Date(s);f.valueOf()==u.valueOf()&&u.setTime(u.valueOf()+h),l.start_date=l.start_date||f,l.end_date=l.end_date||u,l.text=l.text||this.locale.labels.new_event,l.id=this._drag_id=l.id||this.uid(),this._drag_mode="new-size",this._loading=!0;var p=this.addEvent(l);return this.callEvent("onEventCreated",[this._drag_id,d]),this._loading=!1,this._drag_event={},this._on_mouse_up(d),p},e._on_dbl_click=function(i,s){if(s=s||i.target||i.srcElement,!this.config.readonly){var d=e._getClassName(s).split(" ")[0];switch(d){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!e.config.dblclick_create)break;this.addEventNow(this.getActionData(i).date,null,i);break;case"dhx_cal_event":case"dhx_wa_ev_body":case"dhx_agenda_line":case"dhx_cal_agenda_event_line":case"dhx_grid_event":case"dhx_cal_event_line":case"dhx_cal_event_clear":var l=this._locate_event(s);if(!this.callEvent("onDblClick",[l,i]))return;this.config.details_on_dblclick||this._table_view||!this.getEvent(l)._timed||!this.config.select?this.showLightbox(l):this.edit(l);break;case"dhx_time_block":case"dhx_cal_container":return;default:var h=this["dblclick_"+d];if(h)h.call(this,i);else if(s.parentNode&&s!=this)return e._on_dbl_click(i,s.parentNode)}}},e._get_column_index=function(i){var s=0;if(this._cols){for(var d=0,l=0;d+this._cols[l]<i&&l<this._cols.length;)d+=this._cols[l],l++;if(s=l+(this._cols[l]?(i-d)/this._cols[l]:0),this._ignores&&s>=this._cols.length)for(;s>=1&&this._ignores[Math.floor(s)];)s--}return s},e._week_indexes_from_pos=function(i){if(this._cols){var s=this._get_column_index(i.x);return i.x=Math.min(this._cols.length-1,Math.max(0,Math.ceil(s)-1)),i.y=Math.max(0,Math.ceil(60*i.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step),i}return i},e._mouse_coords=function(i){var s,d=document.body,l=document.documentElement;s=this.$env.isIE||!i.pageX&&!i.pageY?{x:i.clientX+(d.scrollLeft||l.scrollLeft||0)-d.clientLeft,y:i.clientY+(d.scrollTop||l.scrollTop||0)-d.clientTop}:{x:i.pageX,y:i.pageY},this.config.rtl&&this._colsS?(s.x=this.$container.querySelector(".dhx_cal_data").offsetWidth-s.x,s.x+=this.$domHelpers.getAbsoluteLeft(this._obj),this._mode!=="month"&&(s.x-=this.xy.scale_width)):s.x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width);var h=this.$container.querySelector(".dhx_cal_data");s.y-=this.$domHelpers.getAbsoluteTop(h)-this._els.dhx_cal_data[0].scrollTop,s.ev=i;var f=this["mouse_"+this._mode];if(f)s=f.call(this,s);else if(this._table_view){var m=this._get_column_index(s.x);if(!this._cols||!this._colsS)return s;var u=0;for(u=1;u<this._colsS.heights.length&&!(this._colsS.heights[u]>s.y);u++);s.y=Math.ceil(24*(Math.max(0,m)+7*Math.max(0,u-1))*60/this.config.time_step),(e._drag_mode||this._mode=="month")&&(s.y=24*(Math.max(0,Math.ceil(m)-1)+7*Math.max(0,u-1))*60/this.config.time_step),this._drag_mode=="move"&&e._ignores_detected&&e.config.preserve_length&&(s._ignores=!0,this._drag_event._event_length||(this._drag_event._event_length=this._get_real_event_length(this._drag_event.start_date,this._drag_event.end_date,{x_step:1,x_unit:"day"}))),s.x=0}else s=this._week_indexes_from_pos(s);return s.timestamp=+new Date,s},e._close_not_saved=function(){if(new Date().valueOf()-(e._new_event||0)>500&&e._edit_id){var i=e.locale.labels.confirm_closing;e._dhtmlx_confirm({message:i,title:e.locale.labels.title_confirm_closing,callback:function(){e.editStop(e.config.positive_closing)}}),i&&(this._drag_id=this._drag_pos=this._drag_mode=null)}},e._correct_shift=function(i,s){return i-6e4*(new Date(e._min_date).getTimezoneOffset()-new Date(i).getTimezoneOffset())*(s?-1:1)},e._is_pos_changed=function(i,s){function d(l,h,f){return Math.abs(l-h)>f}return!i||!this._drag_pos?!0:!!(this._drag_pos.has_moved||!this._drag_pos.timestamp||s.timestamp-this._drag_pos.timestamp>100||d(i.ev.clientX,s.ev.clientX,5)||d(i.ev.clientY,s.ev.clientY,5))},e._correct_drag_start_date=function(i){var s;e.matrix&&(s=e.matrix[e._mode]),s=s||{x_step:1,x_unit:"day"},i=new Date(i);var d=1;return(s._start_correction||s._end_correction)&&(d=60*(s.last_hour||0)-(60*i.getHours()+i.getMinutes())||1),1*i+(e._get_fictional_event_length(i,d,s)-d)},e._correct_drag_end_date=function(i,s){var d;e.matrix&&(d=e.matrix[e._mode]),d=d||{x_step:1,x_unit:"day"};var l=1*i+e._get_fictional_event_length(i,s,d);return new Date(1*l-(e._get_fictional_event_length(l,-1,d,-1)+1))},e._on_mouse_move=function(i){if(this._drag_mode){var s=this._mouse_coords(i);if(this._is_pos_changed(this._drag_pos,s)){var d,l;if(this._edit_id!=this._drag_id&&this._close_not_saved(),!this._drag_mode)return;var h=null;if(this._drag_pos&&!this._drag_pos.has_moved&&((h=this._drag_pos).has_moved=!0),this._drag_pos=s,this._drag_pos.has_moved=!0,this._drag_mode=="create"){if(h&&(s=h),this._close_not_saved(),this.unselect(this._select_id),this._loading=!0,d=this._get_date_from_pos(s).valueOf(),!this._drag_start)return this.callEvent("onBeforeEventCreated",[i,this._drag_id])?(this._loading=!1,void(this._drag_start=d)):void(this._loading=!1);l=d,this._drag_start;var f=new Date(this._drag_start),m=new Date(l);this._mode!="day"&&this._mode!="week"||f.getHours()!=m.getHours()||f.getMinutes()!=m.getMinutes()||(m=new Date(this._drag_start+1e3)),this._drag_id=this.uid(),this.addEvent(f,m,this.locale.labels.new_event,this._drag_id,s.fields),this.callEvent("onEventCreated",[this._drag_id,i]),this._loading=!1,this._drag_mode="new-size"}var u,p=this.config.time_step,b=this.getEvent(this._drag_id);if(e.matrix&&(u=e.matrix[e._mode]),u=u||{x_step:1,x_unit:"day"},this._drag_mode=="move")d=this._min_date.valueOf()+6e4*(s.y*this.config.time_step+24*s.x*60),!s.custom&&this._table_view&&(d+=1e3*this.date.time_part(b.start_date)),!this._table_view&&this._dragEventBody&&this._drag_event._move_event_shift===void 0&&(this._drag_event._move_event_shift=d-b.start_date),this._drag_event._move_event_shift&&(d-=this._drag_event._move_event_shift),d=this._correct_shift(d),s._ignores&&this.config.preserve_length&&this._table_view&&u?(d=e._correct_drag_start_date(d),l=e._correct_drag_end_date(d,this._drag_event._event_length)):l=b.end_date.valueOf()-(b.start_date.valueOf()-d);else{if(d=b.start_date.valueOf(),l=b.end_date.valueOf(),this._table_view){var c=this._min_date.valueOf()+s.y*this.config.time_step*6e4+(s.custom?0:864e5);if(this._mode=="month")if(c=this._correct_shift(c,!1),this._drag_from_start){var g=864e5;c<=e.date.date_part(new Date(l+g-1)).valueOf()&&(d=c-g)}else l=c;else this.config.preserve_length?s.resize_from_start?d=e._correct_drag_start_date(c):l=e._correct_drag_end_date(c,0):s.resize_from_start?d=c:l=c}else{var v=this.date.date_part(new Date(b.end_date.valueOf()-1)).valueOf(),y=new Date(v),x=this.config.first_hour,k=60/p*(this.config.last_hour-x);this.config.time_step=1;var w=this._mouse_coords(i);this.config.time_step=p;var D=s.y*p*6e4,E=Math.min(s.y+1,k)*p*6e4,S=6e4*w.y;l=Math.abs(D-S)>Math.abs(E-S)?v+E:v+D,l+=6e4*(new Date(l).getTimezoneOffset()-y.getTimezoneOffset()),this._els.dhx_cal_data[0].style.cursor="s-resize",this._mode!="week"&&this._mode!="day"||(l=this._correct_shift(l))}if(this._drag_mode=="new-size")if(l<=this._drag_start){var N=s.shift||(this._table_view&&!s.custom?864e5:0);d=l-(s.shift?0:N),l=this._drag_start+(N||6e4*p)}else d=this._drag_start;else l<=d&&(l=d+6e4*p)}var A=new Date(l-1),M=new Date(d);if(this._drag_mode=="move"&&e.config.limit_drag_out&&(+M<+e._min_date||+l>+e._max_date)){if(+b.start_date<+e._min_date||+b.end_date>+e._max_date)M=new Date(b.start_date),l=new Date(b.end_date);else{var T=l-M;+M<+e._min_date?(M=new Date(e._min_date),s._ignores&&this.config.preserve_length&&this._table_view?(M=new Date(e._correct_drag_start_date(M)),u._start_correction&&(M=new Date(M.valueOf()+u._start_correction)),l=new Date(1*M+this._get_fictional_event_length(M,this._drag_event._event_length,u))):l=new Date(+M+T)):(l=new Date(e._max_date),s._ignores&&this.config.preserve_length&&this._table_view?(u._end_correction&&(l=new Date(l.valueOf()-u._end_correction)),l=new Date(1*l-this._get_fictional_event_length(l,0,u,!0)),M=new Date(1*l-this._get_fictional_event_length(l,this._drag_event._event_length,u,!0)),this._ignores_detected&&(M=e.date.add(M,u.x_step,u.x_unit),l=new Date(1*l-this._get_fictional_event_length(l,0,u,!0)),l=e.date.add(l,u.x_step,u.x_unit))):M=new Date(+l-T))}A=new Date(l-1)}if(!this._table_view&&this._dragEventBody&&!e.config.all_timed&&(!e._get_section_view()&&s.x!=this._get_event_sday({start_date:new Date(d),end_date:new Date(d)})||new Date(d).getHours()<this.config.first_hour)&&(T=l-M,this._drag_mode=="move"&&(g=this._min_date.valueOf()+24*s.x*60*6e4,(M=new Date(g)).setHours(this.config.first_hour),l=new Date(M.valueOf()+T),A=new Date(l-1))),!this._table_view&&!e.config.all_timed&&(!e.getView()&&s.x!=this._get_event_sday({start_date:new Date(l),end_date:new Date(l)})||new Date(l).getHours()>=this.config.last_hour)&&(T=l-M,g=this._min_date.valueOf()+24*s.x*60*6e4,(l=e.date.date_part(new Date(g))).setHours(this.config.last_hour),A=new Date(l-1),this._drag_mode=="move"&&(M=new Date(+l-T))),this._table_view||A.getDate()==M.getDate()&&A.getHours()<this.config.last_hour||e._allow_dnd)if(b.start_date=M,b.end_date=new Date(l),this.config.update_render){var C=e._els.dhx_cal_data[0].scrollTop;this.update_view(),e._els.dhx_cal_data[0].scrollTop=C}else this.updateEvent(this._drag_id);this._table_view&&this.for_rendered(this._drag_id,function(L){L.className+=" dhx_in_move dhx_cal_event_drag"}),this.callEvent("onEventDrag",[this._drag_id,this._drag_mode,i])}}else if(e.checkEvent("onMouseMove")){var O=this._locate_event(i.target||i.srcElement);this.callEvent("onMouseMove",[O,i])}},e._on_mouse_down=function(i,s){if(i.button!=2&&!this.config.readonly&&!this._drag_mode){s=s||i.target||i.srcElement;var d=e._getClassName(s).split(" ")[0];switch(this.config.drag_event_body&&d=="dhx_body"&&s.parentNode&&s.parentNode.className.indexOf("dhx_cal_select_menu")===-1&&(d="dhx_event_move",this._dragEventBody=!0),d){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_event_move":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_event_resize":this._drag_mode="resize",e._getClassName(s).indexOf("dhx_event_resize_end")<0?e._drag_from_start=!0:e._drag_from_start=!1;break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":case"dhx_marked_timespan":this._drag_mode="create";break;case"":if(s.parentNode)return e._on_mouse_down(i,s.parentNode);break;default:if((!e.checkEvent("onMouseDown")||e.callEvent("onMouseDown",[d,i]))&&s.parentNode&&s!=this&&d!="dhx_body")return e._on_mouse_down(i,s.parentNode);this._drag_mode=null,this._drag_id=null}if(this._drag_mode){var l=this._locate_event(s);if(this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[l,this._drag_mode,i])){if(this._drag_id=l,(this._edit_id!=this._drag_id||this._edit_id&&this._drag_mode=="create")&&this._close_not_saved(),!this._drag_mode)return;this._drag_event=e._lame_clone(this.getEvent(this._drag_id)||{}),this._drag_pos=this._mouse_coords(i)}else this._drag_mode=this._drag_id=0}this._drag_start=null}},e._get_private_properties=function(i){var s={};for(var d in i)d.indexOf("_")===0&&(s[d]=!0);return s},e._clear_temporary_properties=function(i,s){var d=this._get_private_properties(i),l=this._get_private_properties(s);for(var h in l)d[h]||delete s[h]},e._on_mouse_up=function(i){if(!i||i.button!=2||!this._mobile){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var s=this._drag_id,d=this._drag_mode,l=!this._drag_pos||this._drag_pos.has_moved;delete this._drag_event._move_event_shift;var h=this.getEvent(this._drag_id);if(l&&(this._drag_event._dhx_changed||!this._drag_event.start_date||h.start_date.valueOf()!=this._drag_event.start_date.valueOf()||h.end_date.valueOf()!=this._drag_event.end_date.valueOf())){var f=this._drag_mode=="new-size";if(this.callEvent("onBeforeEventChanged",[h,i,f,this._drag_event]))if(this._drag_id=this._drag_mode=null,f&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create||!this.config.select||!this.isOneDayEvent(this.getEvent(s)))return e.callEvent("onDragEnd",[s,d,i]),this.showLightbox(s);this._drag_pos=!0,this._select_id=this._edit_id=s}else this._new_event||this.callEvent(f?"onEventAdded":"onEventChanged",[s,this.getEvent(s)]);else f?this.deleteEvent(h.id,!0):(this._drag_event._dhx_changed=!1,this._clear_temporary_properties(h,this._drag_event),e._lame_copy(h,this._drag_event),this.updateEvent(h.id))}this._drag_pos&&(this._drag_pos.has_moved||this._drag_pos===!0)&&(this._drag_id=this._drag_mode=null,this.render_view_data()),e.callEvent("onDragEnd",[s,d,i])}this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this._drag_event=null,this._drag_from_start=null}},e._trigger_dyn_loading=function(){return!(!this._load_mode||!this._load())&&(this._render_wait=!0,!0)},e.update_view=function(){this._reset_ignores(),this._update_nav_bar(this.config.header,this.$container.querySelector(".dhx_cal_navline"));var i=this[this._mode+"_view"];if(i?i.call(this,!0):this._reset_scale(),this._trigger_dyn_loading())return!0;this.render_view_data()},e.isViewExists=function(i){return!!(e[i+"_view"]||e.date[i+"_start"]&&e.templates[i+"_date"]&&e.templates[i+"_scale_date"])},e._set_aria_buttons_attrs=function(){for(var i=["dhx_cal_next_button","dhx_cal_prev_button","dhx_cal_tab","dhx_cal_today_button"],s=0;s<i.length;s++)for(var d=this._els[i[s]],l=0;d&&l<d.length;l++){var h=d[l].getAttribute("data-tab")||d[l].getAttribute("name"),f=this.locale.labels[i[s]];h&&(f=this.locale.labels[h+"_tab"]||this.locale.labels[h]||f),i[s]=="dhx_cal_next_button"?f=this.locale.labels.next:i[s]=="dhx_cal_prev_button"&&(f=this.locale.labels.prev),this._waiAria.headerButtonsAttributes(d[l],f||"")}},e.updateView=function(i,s){if(!this.$container)throw new Error(`The scheduler is not initialized. 
 **scheduler.updateView** or **scheduler.setCurrentView** can be called only after **scheduler.init**`);i=i||this._date,s=s||this._mode;var d="dhx_cal_data";this.locale.labels.icon_form||(this.locale.labels.icon_form=this.locale.labels.icon_edit);var l=this._obj,h="dhx_scheduler_"+this._mode,f="dhx_scheduler_"+s;this._mode&&l.className.indexOf(h)!=-1?l.className=l.className.replace(h,f):l.className+=" "+f;var m,u="dhx_multi_day",p=!(this._mode!=s||!this.config.preserve_scroll)&&this._els[d][0].scrollTop;this._els[u]&&this._els[u][0]&&(m=this._els[u][0].scrollTop),this[this._mode+"_view"]&&s&&this._mode!=s&&this[this._mode+"_view"](!1),this._close_not_saved(),this._els[u]&&(this._els[u][0].parentNode.removeChild(this._els[u][0]),this._els[u]=null),this._mode=s,this._date=i,this._table_view=this._mode=="month",this._dy_shift=0,this.update_view(),this._set_aria_buttons_attrs();var b=this._els.dhx_cal_tab;if(b)for(var c=0;c<b.length;c++){var g=b[c];g.getAttribute("data-tab")==this._mode||g.getAttribute("name")==this._mode+"_tab"?(g.classList.add("active"),this._waiAria.headerToggleState(g,!0)):(g.classList.remove("active"),this._waiAria.headerToggleState(g,!1))}typeof p=="number"&&(this._els[d][0].scrollTop=p),typeof m=="number"&&this._els[u]&&this._els[u][0]&&(this._els[u][0].scrollTop=m)},e.setCurrentView=function(i,s){this.callEvent("onBeforeViewChange",[this._mode,this._date,s||this._mode,i||this._date])&&(this.updateView(i,s),this.callEvent("onViewChange",[this._mode,this._date]))},e.render=function(i,s){e.setCurrentView(i,s)},e._render_x_header=function(i,s,d,l,h){h=h||0;var f=document.createElement("div");f.className="dhx_scale_bar",this.templates[this._mode+"_scalex_class"]&&(f.className+=" "+this.templates[this._mode+"_scalex_class"](d));var m=this._cols[i];this._mode=="month"&&i===0&&this.config.left_border&&(f.className+=" dhx_scale_bar_border",s+=1),e._is_new_skin()?this.set_xy(f,m,this.xy.scale_height-1,s,h):this.set_xy(f,m-1,this.xy.scale_height-2,s,h);var u=this.templates[this._mode+"_scale_date"](d,this._mode);f.innerHTML=u,this._waiAria.dayHeaderAttr(f,u),l.appendChild(f)},e._get_columns_num=function(i,s){var d=7;if(!e._table_view){var l=e.date["get_"+e._mode+"_end"];l&&(s=l(i)),d=Math.round((s.valueOf()-i.valueOf())/864e5)}return d},e._get_timeunit_start=function(){return this.date[this._mode+"_start"](new Date(this._date.valueOf()))},e._get_view_end=function(){var i=this._get_timeunit_start(),s=e.date.add(i,1,this._mode);if(!e._table_view){var d=e.date["get_"+e._mode+"_end"];d&&(s=d(i))}return s},e._calc_scale_sizes=function(i,s,d){var l=this.config.rtl,h=i,f=this._get_columns_num(s,d);this._process_ignores(s,f,"day",1);for(var m=f-this._ignores_detected,u=0;u<f;u++)this._ignores[u]?(this._cols[u]=0,m++):this._cols[u]=Math.floor(h/(m-u)),h-=this._cols[u],this._colsS[u]=(this._cols[u-1]||0)+(this._colsS[u-1]||(this._table_view?0:l?this.xy.scroll_width:this.xy.scale_width));this._colsS.col_length=f,this._colsS[f]=this._cols[f-1]+this._colsS[f-1]||0},e._set_scale_col_size=function(i,s,d){var l=this.config;this.set_xy(i,s,l.hour_size_px*(l.last_hour-l.first_hour),d+this.xy.scale_width+1,0)},e._render_scales=function(i,s){var d=new Date(e._min_date),l=new Date(e._max_date),h=this.date.date_part(e._currentDate()),f=parseInt(i.style.width,10)-1,m=new Date(this._min_date),u=this._get_columns_num(d,l);this._calc_scale_sizes(f,d,l);var p=0;i.innerHTML="";for(var b=0;b<u;b++){if(this._ignores[b]||this._render_x_header(b,p,m,i),!this._table_view){var c=document.createElement("div"),g="dhx_scale_holder";if(m.valueOf()==h.valueOf()&&(g+=" dhx_scale_holder_now"),c.setAttribute("data-column-index",b),this._ignores_detected&&this._ignores[b]&&(g+=" dhx_scale_ignore"),this._is_new_skin())for(let v=1*this.config.first_hour;v<this.config.last_hour;v++){const y=document.createElement("div");y.className="dhx_scale_time_slot dhx_scale_time_slot_hour_start",y.style.height=this.config.hour_size_px/2+"px";let x=new Date(m.getFullYear(),m.getMonth(),m.getDate(),v,0);y.setAttribute("data-slot-date",this.templates.format_date(x));let k=this.templates.time_slot_text(x);k&&(y.innerHTML=k);let w=this.templates.time_slot_class(x);w&&y.classList.add(w),c.appendChild(y);const D=document.createElement("div");D.className="dhx_scale_time_slot",x=new Date(m.getFullYear(),m.getMonth(),m.getDate(),v,30),D.setAttribute("data-slot-date",this.templates.format_date(x)),D.style.height=this.config.hour_size_px/2+"px",k=this.templates.time_slot_text(x),k&&(D.innerHTML=k),w=this.templates.time_slot_class(x),w&&D.classList.add(w),c.appendChild(D)}c.className=g+" "+this.templates.week_date_class(m,h),this._waiAria.dayColumnAttr(c,m),this._set_scale_col_size(c,this._cols[b],p),s.appendChild(c),this.callEvent("onScaleAdd",[c,m])}p+=this._cols[b],m=this.date.add(m,1,"day"),m=this.date.day_start(m)}},e._getNavDateElement=function(){return this.$container.querySelector(".dhx_cal_date")},e._reset_scale=function(){if(this.templates[this._mode+"_date"]){var i=this._els.dhx_cal_header[0],s=this._els.dhx_cal_data[0],d=this.config;i.innerHTML="",s.innerHTML="";var l,h,f=(d.readonly||!d.drag_resize?" dhx_resize_denied":"")+(d.readonly||!d.drag_move?" dhx_move_denied":"");s.className="dhx_cal_data"+f,this._scales={},this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var m=this._get_timeunit_start(),u=e._get_view_end();l=h=this._table_view?e.date.week_start(m):m,this._min_date=l;var p=this.templates[this._mode+"_date"](m,u,this._mode),b=this._getNavDateElement();if(b&&(b.innerHTML=p,this._waiAria.navBarDateAttr(b,p)),this._max_date=u,e._render_scales(i,s),this._table_view)this._reset_month_scale(s,m,h);else if(this._reset_hours_scale(s,m,h),d.multi_day){var c="dhx_multi_day";this._els[c]&&(this._els[c][0].parentNode.removeChild(this._els[c][0]),this._els[c]=null);var g=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+1;this._is_new_skin()&&(g=void 0);var v=document.createElement("div");v.className=c,v.style.visibility="hidden",v.style.display="none";var y=this._colsS[this._colsS.col_length],x=d.rtl?this.xy.scale_width:this.xy.scroll_width,k=Math.max(y+x,0);this.set_xy(v,k,0,0,g),s.parentNode.insertBefore(v,s);var w=v.cloneNode(!0);w.className=c+"_icon",w.style.visibility="hidden",w.style.display="none",this.set_xy(w,this.xy.scale_width+1,0,0,g),v.appendChild(w),this._els[c]=[v,w],e.event(this._els[c][0],"click",this._click.dhx_cal_data)}}},e._reset_hours_scale=function(i,s,d){var l=document.createElement("div");l.className="dhx_scale_holder";for(var h=new Date(1980,1,1,this.config.first_hour,0,0),f=1*this.config.first_hour;f<this.config.last_hour;f++){var m=document.createElement("div");m.className="dhx_scale_hour",m.style.height=this.config.hour_size_px+"px";var u=this.xy.scale_width;this.config.left_border&&(m.className+=" dhx_scale_hour_border"),m.style.width=u+"px";var p=e.templates.hour_scale(h);m.innerHTML=p,this._waiAria.hourScaleAttr(m,p),l.appendChild(m),h=this.date.add(h,1,"hour")}i.appendChild(l),this.config.scroll_hour&&(i.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},e._currentDate=function(){return e.config.now_date?new Date(e.config.now_date):new Date},e._reset_ignores=function(){this._ignores={},this._ignores_detected=0},e._process_ignores=function(i,s,d,l,h){this._reset_ignores();var f=e["ignore_"+this._mode];if(f)for(var m=new Date(i),u=0;u<s;u++)f(m)&&(this._ignores_detected+=1,this._ignores[u]=!0,h&&s++),m=e.date.add(m,l,d),e.date[d+"_start"]&&(m=e.date[d+"_start"](m))},e._render_month_scale=function(i,s,d,l){var h=e.date.add(s,1,"month"),f=new Date(d),m=e._currentDate();this.date.date_part(m),this.date.date_part(d),l=l||Math.ceil(Math.round((h.valueOf()-d.valueOf())/864e5)/7);for(var u=[],p=0;p<=7;p++){var b=this._cols[p]||0;isNaN(Number(b))||(b+="px"),u[p]=b}function c(M){var T=e._colsS.height;return e._colsS.heights[M+1]!==void 0&&(T=e._colsS.heights[M+1]-(e._colsS.heights[M]||0)),T}var g=0;const v=document.createElement("div");for(v.classList.add("dhx_cal_month_table"),p=0;p<l;p++){var y=document.createElement("div");y.classList.add("dhx_cal_month_row"),y.style.height=c(p)+"px",v.appendChild(y);for(var x=0;x<7;x++){var k=document.createElement("div");y.appendChild(k);var w="dhx_cal_month_cell";d<s?w+=" dhx_before":d>=h?w+=" dhx_after":d.valueOf()==m.valueOf()&&(w+=" dhx_now"),this._ignores_detected&&this._ignores[x]&&(w+=" dhx_scale_ignore"),k.className=w+" "+this.templates.month_date_class(d,m),k.setAttribute("data-cell-date",e.templates.format_date(d));var D="dhx_month_body",E="dhx_month_head";if(x===0&&this.config.left_border&&(D+=" dhx_month_body_border",E+=" dhx_month_head_border"),this._ignores_detected&&this._ignores[x])k.appendChild(document.createElement("div")),k.appendChild(document.createElement("div"));else{k.style.width=u[x],this._waiAria.monthCellAttr(k,d);var S=document.createElement("div");S.style.height=e.xy.month_head_height+"px",S.className=E,S.innerHTML=this.templates.month_day(d),k.appendChild(S);var N=document.createElement("div");N.className=D,k.appendChild(N)}var A=d.getDate();(d=this.date.add(d,1,"day")).getDate()-A>1&&(d=new Date(d.getFullYear(),d.getMonth(),A+1,12,0))}e._colsS.heights[p]=g,g+=c(p)}return this._min_date=f,this._max_date=d,i.innerHTML="",i.appendChild(v),this._scales={},i.querySelectorAll("[data-cell-date]").forEach(M=>{const T=e.templates.parse_date(M.getAttribute("data-cell-date")),C=M.querySelector(".dhx_month_body");this._scales[+T]=C,this.callEvent("onScaleAdd",[this._scales[+T],T])}),this._max_date},e._reset_month_scale=function(i,s,d,l){var h=e.date.add(s,1,"month"),f=e._currentDate();this.date.date_part(f),this.date.date_part(d),l=l||Math.ceil(Math.round((h.valueOf()-d.valueOf())/864e5)/7);var m=Math.floor(i.clientHeight/l)-this.xy.month_head_height;return this._colsS.height=m+this.xy.month_head_height,this._colsS.heights=[],e._render_month_scale(i,s,d,l)},e.getView=function(i){return i||(i=e.getState().mode),e.matrix&&e.matrix[i]?e.matrix[i]:e._props&&e._props[i]?e._props[i]:null},e.getLabel=function(i,s){for(var d=this.config.lightbox.sections,l=0;l<d.length;l++)if(d[l].map_to==i){for(var h=d[l].options,f=0;f<h.length;f++)if(h[f].key==s)return h[f].label}return""},e.updateCollection=function(i,s){var d=e.serverList(i);return!!d&&(d.splice(0,d.length),d.push.apply(d,s||[]),e.callEvent("onOptionsLoad",[]),e.resetLightbox(),e.hideCover(),!0)},e._lame_clone=function(i,s){var d,l,h;for(s=s||[],d=0;d<s.length;d+=2)if(i===s[d])return s[d+1];if(i&&typeof i=="object"){for(h=Object.create(i),l=[Array,Date,Number,String,Boolean],d=0;d<l.length;d++)i instanceof l[d]&&(h=d?new l[d](i):new l[d]);for(d in s.push(i,h),i)Object.prototype.hasOwnProperty.apply(i,[d])&&(h[d]=e._lame_clone(i[d],s))}return h||i},e._lame_copy=function(i,s){for(var d in s)s.hasOwnProperty(d)&&(i[d]=s[d]);return i},e._get_date_from_pos=function(i){var s=this._min_date.valueOf()+6e4*(i.y*this.config.time_step+24*(this._table_view?0:i.x)*60);return new Date(this._correct_shift(s))},e.getActionData=function(i){var s=this._mouse_coords(i);return{date:this._get_date_from_pos(s),section:s.section}},e._focus=function(i,s){if(i&&i.focus)if(this._mobile)window.setTimeout(function(){i.focus()},10);else try{s&&i.select&&i.offsetWidth&&i.select(),i.focus()}catch{}},e._get_real_event_length=function(i,s,d){var l,h=s-i,f=this["ignore_"+this._mode],m=0;d.render?(m=this._get_date_index(d,i),l=this._get_date_index(d,s),i.valueOf()<e.getState().min_date.valueOf()&&(m=-_(i,e.getState().min_date)),s.valueOf()>e.getState().max_date.valueOf()&&(l+=_(s,e.getState().max_date))):l=Math.round(h/60/60/1e3/24);for(var u=!0;m<l;){var p=e.date.add(s,-d.x_step,d.x_unit);if(f&&f(s)&&(!u||u&&f(p)))h-=s-p;else{let b=0;const c=new Date(Math.max(p.valueOf(),i.valueOf())),g=s,v=new Date(c.getFullYear(),c.getMonth(),c.getDate(),d.first_hour),y=new Date(c.getFullYear(),c.getMonth(),c.getDate(),d.last_hour),x=new Date(s.getFullYear(),s.getMonth(),s.getDate(),d.first_hour),k=new Date(s.getFullYear(),s.getMonth(),s.getDate(),d.last_hour);g.valueOf()>k.valueOf()&&(b+=g-k),g.valueOf()>x.valueOf()?b+=d._start_correction:b+=60*g.getHours()*60*1e3+60*g.getMinutes()*1e3,c.valueOf()<y.valueOf()&&(b+=d._end_correction),c.valueOf()<v.valueOf()&&(b+=v.valueOf()-c.valueOf()),h-=b,u=!1}s=p,l--}return h},e._get_fictional_event_length=function(i,s,d,l){var h=new Date(i),f=l?-1:1;if(d._start_correction||d._end_correction){var m;m=l?60*h.getHours()+h.getMinutes()-60*(d.first_hour||0):60*(d.last_hour||0)-(60*h.getHours()+h.getMinutes());var u=60*(d.last_hour-d.first_hour),p=Math.ceil((s/6e4-m)/u);p<0&&(p=0),s+=p*(1440-u)*60*1e3}var b,c=new Date(1*i+s*f),g=this["ignore_"+this._mode],v=0;for(d.render?(v=this._get_date_index(d,h),b=this._get_date_index(d,c)):b=Math.round(s/60/60/1e3/24);v*f<=b*f;){var y=e.date.add(h,d.x_step*f,d.x_unit);g&&g(h)&&(s+=(y-h)*f,b+=f),h=y,v+=f}return s},e._get_section_view=function(){return this.getView()},e._get_section_property=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode].y_property:this._props&&this._props[this._mode]?this._props[this._mode].map_to:null},e._is_initialized=function(){var i=this.getState();return this._obj&&i.date&&i.mode},e._is_lightbox_open=function(){var i=this.getState();return i.lightbox_id!==null&&i.lightbox_id!==void 0}}const defaultDomEvents={event:function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)},eventRemove:function(e,t,a){e.removeEventListener?e.removeEventListener(t,a,!1):e.detachEvent&&e.detachEvent("on"+t,a)}};function createEventScope(){var e=function(t,a){t=t||defaultDomEvents.event,a=a||defaultDomEvents.eventRemove;var n=[],o={attach:function(r,_,i,s){n.push({element:r,event:_,callback:i,capture:s}),t(r,_,i,s)},detach:function(r,_,i,s){a(r,_,i,s);for(var d=0;d<n.length;d++){var l=n[d];l.element===r&&l.event===_&&l.callback===i&&l.capture===s&&(n.splice(d,1),d--)}},detachAll:function(){for(var r=n.slice(),_=0;_<r.length;_++){var i=r[_];o.detach(i.element,i.event,i.callback,i.capture),o.detach(i.element,i.event,i.callback,void 0),o.detach(i.element,i.event,i.callback,!1),o.detach(i.element,i.event,i.callback,!0)}n.splice(0,n.length)},extend:function(){return e(this.event,this.eventRemove)}};return o};return e()}function extend$k(e){var t=createEventScope();e.event=t.attach,e.eventRemove=t.detach,e._eventRemoveAll=t.detachAll,e._createDomEventScope=t.extend,e._trim=function(a){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(a)},e._isDate=function(a){return!(!a||typeof a!="object")&&!!(a.getFullYear&&a.getMonth&&a.getDate)},e._isObject=function(a){return a&&typeof a=="object"}}function extend$j(e){(function(){var t=new RegExp(`<(?:.|
)*?>`,"gm"),a=new RegExp(" +","gm");function n(i){return(i+"").replace(t," ").replace(a," ")}var o=new RegExp("'","gm");function r(i){return(i+"").replace(o,"&#39;")}for(var _ in e._waiAria={getAttributeString:function(i){var s=[" "];for(var d in i)if(typeof i[d]!="function"&&typeof i[d]!="object"){var l=r(n(i[d]));s.push(d+"='"+l+"'")}return s.push(" "),s.join(" ")},setAttributes:function(i,s){for(var d in s)i.setAttribute(d,n(s[d]));return i},labelAttr:function(i,s){return this.setAttributes(i,{"aria-label":s})},label:function(i){return e._waiAria.getAttributeString({"aria-label":i})},hourScaleAttr:function(i,s){this.labelAttr(i,s)},monthCellAttr:function(i,s){this.labelAttr(i,e.templates.day_date(s))},navBarDateAttr:function(i,s){this.labelAttr(i,s)},dayHeaderAttr:function(i,s){this.labelAttr(i,s)},dayColumnAttr:function(i,s){this.dayHeaderAttr(i,e.templates.day_date(s))},headerButtonsAttributes:function(i,s){return this.setAttributes(i,{role:"button","aria-label":s})},headerToggleState:function(i,s){return this.setAttributes(i,{"aria-pressed":s?"true":"false"})},getHeaderCellAttr:function(i){return e._waiAria.getAttributeString({"aria-label":i})},eventAttr:function(i,s){this._eventCommonAttr(i,s)},_eventCommonAttr:function(i,s){s.setAttribute("aria-label",n(e.templates.event_text(i.start_date,i.end_date,i))),e.config.readonly&&s.setAttribute("aria-readonly",!0),i.$dataprocessor_class&&s.setAttribute("aria-busy",!0),s.setAttribute("aria-selected",e.getState().select_id==i.id?"true":"false")},setEventBarAttr:function(i,s){this._eventCommonAttr(i,s)},_getAttributes:function(i,s){var d={setAttribute:function(l,h){this[l]=h}};return i.apply(this,[s,d]),d},eventBarAttrString:function(i){return this.getAttributeString(this._getAttributes(this.setEventBarAttr,i))},agendaHeadAttrString:function(){return this.getAttributeString({role:"row"})},agendaHeadDateString:function(i){return this.getAttributeString({role:"columnheader","aria-label":i})},agendaHeadDescriptionString:function(i){return this.agendaHeadDateString(i)},agendaDataAttrString:function(){return this.getAttributeString({role:"grid"})},agendaEventAttrString:function(i){var s=this._getAttributes(this._eventCommonAttr,i);return s.role="row",this.getAttributeString(s)},agendaDetailsBtnString:function(){return this.getAttributeString({role:"button","aria-label":e.locale.labels.icon_details})},gridAttrString:function(){return this.getAttributeString({role:"grid"})},gridRowAttrString:function(i){return this.agendaEventAttrString(i)},gridCellAttrString:function(i,s,d){return this.getAttributeString({role:"gridcell","aria-label":[s.label===void 0?s.id:s.label,": ",d]})},mapAttrString:function(){return this.gridAttrString()},mapRowAttrString:function(i){return this.gridRowAttrString(i)},mapDetailsBtnString:function(){return this.agendaDetailsBtnString()},minicalHeader:function(i,s){this.setAttributes(i,{id:s+"","aria-live":"assertice","aria-atomic":"true"})},minicalGrid:function(i,s){this.setAttributes(i,{"aria-labelledby":s+"",role:"grid"})},minicalRow:function(i){this.setAttributes(i,{role:"row"})},minicalDayCell:function(i,s){var d=s.valueOf()<e._max_date.valueOf()&&s.valueOf()>=e._min_date.valueOf();this.setAttributes(i,{role:"gridcell","aria-label":e.templates.day_date(s),"aria-selected":d?"true":"false"})},minicalHeadCell:function(i){this.setAttributes(i,{role:"columnheader"})},weekAgendaDayCell:function(i,s){var d=i.querySelector(".dhx_wa_scale_bar"),l=i.querySelector(".dhx_wa_day_data"),h=e.uid()+"";this.setAttributes(d,{id:h}),this.setAttributes(l,{"aria-labelledby":h})},weekAgendaEvent:function(i,s){this.eventAttr(s,i)},lightboxHiddenAttr:function(i){i.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(i){i.setAttribute("aria-hidden","false")},lightboxSectionButtonAttrString:function(i){return this.getAttributeString({role:"button","aria-label":i,tabindex:"0"})},yearHeader:function(i,s){this.setAttributes(i,{id:s+""})},yearGrid:function(i,s){this.minicalGrid(i,s)},yearHeadCell:function(i){return this.minicalHeadCell(i)},yearRow:function(i){return this.minicalRow(i)},yearDayCell:function(i){this.setAttributes(i,{role:"gridcell"})},lightboxAttr:function(i){i.setAttribute("role","dialog"),i.setAttribute("aria-hidden","true"),i.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(i){return this.getAttributeString({role:"button","aria-label":e.locale.labels[i],tabindex:"0"})},eventMenuAttrString:function(i){return this.getAttributeString({role:"button","aria-label":e.locale.labels[i]})},lightboxHeader:function(i,s){i.setAttribute("aria-label",s)},lightboxSelectAttrString:function(i){var s="";switch(i){case"%Y":s=e.locale.labels.year;break;case"%m":s=e.locale.labels.month;break;case"%d":s=e.locale.labels.day;break;case"%H:%i":s=e.locale.labels.hour+" "+e.locale.labels.minute}return e._waiAria.getAttributeString({"aria-label":s})},messageButtonAttrString:function(i){return"tabindex='0' role='button' aria-label='"+i+"'"},messageInfoAttr:function(i){i.setAttribute("role","alert")},messageModalAttr:function(i,s){i.setAttribute("role","dialog"),s&&i.setAttribute("aria-labelledby",s)},quickInfoAttr:function(i){i.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(i,s){i.setAttribute("aria-label",s)},quickInfoButtonAttrString:function(i){return e._waiAria.getAttributeString({role:"button","aria-label":i,tabindex:"0"})},tooltipAttr:function(i){i.setAttribute("role","tooltip")},tooltipVisibleAttr:function(i){i.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(i){i.setAttribute("aria-hidden","true")}},e._waiAria)e._waiAria[_]=function(i){return function(){return e.config.wai_aria_attributes?i.apply(this,arguments):" "}}(e._waiAria[_])})()}var uidSeed=Date.now();function uid(){return uidSeed++}function isArray(e){return Array.isArray?Array.isArray(e):e&&e.length!==void 0&&e.pop&&e.push}function isStringObject(e){return e&&typeof e=="object"&&Function.prototype.toString.call(e.constructor)==="function String() { [native code] }"}function isNumberObject(e){return e&&typeof e=="object"&&Function.prototype.toString.call(e.constructor)==="function Number() { [native code] }"}function isBooleanObject(e){return e&&typeof e=="object"&&Function.prototype.toString.call(e.constructor)==="function Boolean() { [native code] }"}function isDate(e){return!(!e||typeof e!="object")&&!!(e.getFullYear&&e.getMonth&&e.getDate)}function defined(e){return e!==void 0}function delay(e,t){var a,n=function(){n.$cancelTimeout(),n.$pending=!0;var o=Array.prototype.slice.call(arguments);a=setTimeout(function(){e.apply(this,o),n.$pending=!1},t)};return n.$pending=!1,n.$cancelTimeout=function(){clearTimeout(a),n.$pending=!1},n.$execute=function(){var o=Array.prototype.slice.call(arguments);e.apply(this,o),n.$cancelTimeout()},n}const utils={uid,mixin:function(e,t,a){for(var n in t)(e[n]===void 0||a)&&(e[n]=t[n]);return e},copy:function e(t){var a,n;if(t&&typeof t=="object")switch(!0){case isDate(t):n=new Date(t);break;case isArray(t):for(n=new Array(t.length),a=0;a<t.length;a++)n[a]=e(t[a]);break;case isStringObject(t):n=new String(t);break;case isNumberObject(t):n=new Number(t);break;case isBooleanObject(t):n=new Boolean(t);break;default:for(a in n={},t){const o=typeof t[a];o==="string"||o==="number"||o==="boolean"?n[a]=t[a]:isDate(t[a])?n[a]=new Date(t[a]):Object.prototype.hasOwnProperty.apply(t,[a])&&(n[a]=e(t[a]))}}return n||t},defined,isDate,delay};function elementPosition(e){var t=0,a=0,n=0,o=0;if(e.getBoundingClientRect){var r=e.getBoundingClientRect(),_=document.body,i=document.documentElement||document.body.parentNode||document.body,s=window.pageYOffset||i.scrollTop||_.scrollTop,d=window.pageXOffset||i.scrollLeft||_.scrollLeft,l=i.clientTop||_.clientTop||0,h=i.clientLeft||_.clientLeft||0;t=r.top+s-l,a=r.left+d-h,n=document.body.offsetWidth-r.right,o=document.body.offsetHeight-r.bottom}else{for(;e;)t+=parseInt(e.offsetTop,10),a+=parseInt(e.offsetLeft,10),e=e.offsetParent;n=document.body.offsetWidth-e.offsetWidth-a,o=document.body.offsetHeight-e.offsetHeight-t}return{y:Math.round(t),x:Math.round(a),width:e.offsetWidth,height:e.offsetHeight,right:Math.round(n),bottom:Math.round(o)}}function getRelativeEventPosition(e,t){var a=document.documentElement,n=elementPosition(t);return{x:e.clientX+a.scrollLeft-a.clientLeft-n.x+t.scrollLeft,y:e.clientY+a.scrollTop-a.clientTop-n.y+t.scrollTop}}function getNodePosition(e){var t=0,a=0,n=0,o=0;if(e.getBoundingClientRect){var r=e.getBoundingClientRect(),_=document.body,i=document.documentElement||document.body.parentNode||document.body,s=window.pageYOffset||i.scrollTop||_.scrollTop,d=window.pageXOffset||i.scrollLeft||_.scrollLeft,l=i.clientTop||_.clientTop||0,h=i.clientLeft||_.clientLeft||0;t=r.top+s-l,a=r.left+d-h,n=document.body.offsetWidth-r.right,o=document.body.offsetHeight-r.bottom}else{for(;e;)t+=parseInt(e.offsetTop,10),a+=parseInt(e.offsetLeft,10),e=e.offsetParent;n=document.body.offsetWidth-e.offsetWidth-a,o=document.body.offsetHeight-e.offsetHeight-t}return{y:Math.round(t),x:Math.round(a),width:e.offsetWidth,height:e.offsetHeight,right:Math.round(n),bottom:Math.round(o)}}function getClassName(e){if(!e)return"";var t=e.className||"";return t.baseVal&&(t=t.baseVal),t.indexOf||(t=""),t||""}function getTargetNode(e){var t;return e.tagName?t=e:(t=(e=e||window.event).target||e.srcElement).shadowRoot&&e.composedPath&&(t=e.composedPath()[0]),t}function locateCss(e,t,a){a===void 0&&(a=!0);for(var n=e.target||e.srcElement,o="";n;){if(o=getClassName(n)){var r=o.indexOf(t);if(r>=0){if(!a)return n;var _=r===0||!(o.charAt(r-1)||"").trim(),i=r+t.length>=o.length||!o.charAt(r+t.length).trim();if(_&&i)return n}}n=n.parentNode}return null}function isVisible(e){var t=!1,a=!1;if(window.getComputedStyle){var n=window.getComputedStyle(e,null);t=n.display,a=n.visibility}else e.currentStyle&&(t=e.currentStyle.display,a=e.currentStyle.visibility);var o=!1,r=locateCss({target:e},"dhx_form_repeat",!1);return r&&(o=r.style.height=="0px"),o=o||!e.offsetHeight,t!="none"&&a!="hidden"&&!o}function hasNonNegativeTabIndex(e){return!isNaN(e.getAttribute("tabindex"))&&1*e.getAttribute("tabindex")>=0}function hasHref(e){return!{a:!0,area:!0}[e.nodeName.loLowerCase()]||!!e.getAttribute("href")}function isEnabled(e){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[e.nodeName.toLowerCase()]||!e.hasAttribute("disabled")}function getFocusableNodes(e){for(var t=e.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),a=Array.prototype.slice.call(t,0),n=0;n<a.length;n++)a[n].$position=n;for(a.sort(function(r,_){return r.tabIndex===0&&_.tabIndex!==0?1:r.tabIndex!==0&&_.tabIndex===0?-1:r.tabIndex===_.tabIndex?r.$position-_.$position:r.tabIndex<_.tabIndex?-1:1}),n=0;n<a.length;n++){var o=a[n];(hasNonNegativeTabIndex(o)||isEnabled(o)||hasHref(o))&&isVisible(o)||(a.splice(n,1),n--)}return a}function isShadowDomSupported(){return document.head.createShadowRoot||document.head.attachShadow}function getActiveElement(){var e=document.activeElement;return e.shadowRoot&&(e=e.shadowRoot.activeElement),e===document.body&&document.getSelection&&(e=document.getSelection().focusNode||document.body),e}function getRootNode(e){if(!e||!isShadowDomSupported())return document.body;for(;e.parentNode&&(e=e.parentNode);)if(e instanceof ShadowRoot)return e.host;return document.body}function hasShadowParent(e){return!!getRootNode(e)}const dom_helpers={getAbsoluteLeft:function(e){return this.getOffset(e).left},getAbsoluteTop:function(e){return this.getOffset(e).top},getOffsetSum:function(e){for(var t=0,a=0;e;)t+=parseInt(e.offsetTop),a+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:t,left:a}},getOffsetRect:function(e){var t=e.getBoundingClientRect(),a=0,n=0;if(/Mobi/.test(navigator.userAgent)){var o=document.createElement("div");o.style.position="absolute",o.style.left="0px",o.style.top="0px",o.style.width="1px",o.style.height="1px",document.body.appendChild(o);var r=o.getBoundingClientRect();a=t.top-r.top,n=t.left-r.left,o.parentNode.removeChild(o)}else{var _=document.body,i=document.documentElement,s=window.pageYOffset||i.scrollTop||_.scrollTop,d=window.pageXOffset||i.scrollLeft||_.scrollLeft,l=i.clientTop||_.clientTop||0,h=i.clientLeft||_.clientLeft||0;a=t.top+s-l,n=t.left+d-h}return{top:Math.round(a),left:Math.round(n)}},getOffset:function(e){return e.getBoundingClientRect?this.getOffsetRect(e):this.getOffsetSum(e)},closest:function(e,t){return e&&t?closest(e,t):null},insertAfter:function(e,t){t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)},remove:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)},isChildOf:function(e,t){return t.contains(e)},getFocusableNodes,getClassName,locateCss,getRootNode,hasShadowParent,isShadowDomSupported,getActiveElement,getRelativeEventPosition,getTargetNode,getNodePosition};var closest;if(Element.prototype.closest)closest=function(e,t){return e.closest(t)};else{var matches=Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector;closest=function(e,t){var a=e;do{if(matches.call(a,t))return a;a=a.parentElement||a.parentNode}while(a!==null&&a.nodeType===1);return null}}var isWindowAwailable=typeof window<"u";const env={isIE:isWindowAwailable&&(navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0),isIE6:isWindowAwailable&&!XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:isWindowAwailable&&navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:isWindowAwailable&&navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:isWindowAwailable&&navigator.userAgent.indexOf("Opera")>=0,isChrome:isWindowAwailable&&navigator.userAgent.indexOf("Chrome")>=0,isKHTML:isWindowAwailable&&(navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0),isFF:isWindowAwailable&&navigator.userAgent.indexOf("Firefox")>=0,isIPad:isWindowAwailable&&navigator.userAgent.search(/iPad/gi)>=0,isEdge:isWindowAwailable&&navigator.userAgent.indexOf("Edge")!=-1,isNode:!isWindowAwailable||typeof navigator>"u"};function extend$i(e){e.destructor=function(){for(var t in e.callEvent("onDestroy",[]),this.clearAll(),this.$container&&(this.$container.innerHTML=""),this._eventRemoveAll&&this._eventRemoveAll(),this.resetLightbox&&this.resetLightbox(),this._dp&&this._dp.destructor&&this._dp.destructor(),this.detachAllEvents(),this)t.indexOf("$")===0&&delete this[t];e.$destroyed=!0}}function serialize$1(e){if(typeof e=="string"||typeof e=="number")return e;var t="";for(var a in e){var n="";e.hasOwnProperty(a)&&(n=a+"="+(n=typeof e[a]=="string"?encodeURIComponent(e[a]):typeof e[a]=="number"?e[a]:encodeURIComponent(JSON.stringify(e[a]))),t.length&&(n="&"+n),t+=n)}return t}function extend$h(e){function t(a,n){var o={method:a};if(n.length===0)throw new Error("Arguments list of query is wrong.");if(n.length===1)return typeof n[0]=="string"?(o.url=n[0],o.async=!0):(o.url=n[0].url,o.async=n[0].async||!0,o.callback=n[0].callback,o.headers=n[0].headers),n[0].data?typeof n[0].data!="string"?o.data=serialize$1(n[0].data):o.data=n[0].data:o.data="",o;switch(o.url=n[0],a){case"GET":case"DELETE":o.callback=n[1],o.headers=n[2];break;case"POST":case"PUT":n[1]?typeof n[1]!="string"?o.data=serialize$1(n[1]):o.data=n[1]:o.data="",o.callback=n[2],o.headers=n[3]}return o}e.Promise=window.Promise,e.ajax={cache:!0,method:"get",serializeRequestParams:serialize$1,parse:function(a){return typeof a!="string"?a:(a=a.replace(/^[\s]+/,""),typeof DOMParser>"u"||e.$env.isIE?window.ActiveXObject!==void 0&&((n=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",n.loadXML(a)):n=new DOMParser().parseFromString(a,"text/xml"),n);var n},xmltop:function(a,n,o){if(n.status===void 0||n.status<400){var r=n.responseXML?n.responseXML||n:this.parse(n.responseText||n);if(r&&r.documentElement!==null&&!r.getElementsByTagName("parsererror").length)return r.getElementsByTagName(a)[0]}return o!==-1&&e.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],o]),document.createElement("DIV")},xpath:function(a,n){if(n.nodeName||(n=n.responseXML||n),e.$env.isIE)return n.selectNodes(a)||[];for(var o,r=[],_=(n.ownerDocument||n).evaluate(a,n,null,XPathResult.ANY_TYPE,null);o=_.iterateNext();)r.push(o);return r},query:function(a){return this._call(a.method||"GET",a.url,a.data||"",a.async||!0,a.callback,a.headers)},get:function(a,n,o){var r=t("GET",arguments);return this.query(r)},getSync:function(a,n){var o=t("GET",arguments);return o.async=!1,this.query(o)},put:function(a,n,o,r){var _=t("PUT",arguments);return this.query(_)},del:function(a,n,o){var r=t("DELETE",arguments);return this.query(r)},post:function(a,n,o,r){arguments.length==1?n="":arguments.length==2&&typeof n=="function"&&(o=n,n="");var _=t("POST",arguments);return this.query(_)},postSync:function(a,n,o){n=n===null?"":String(n);var r=t("POST",arguments);return r.async=!1,this.query(r)},_call:function(a,n,o,r,_,i){return new e.Promise((function(s,d){var l=typeof XMLHttpRequest===void 0||e.$env.isIE?new window.ActiveXObject("Microsoft.XMLHTTP"):new XMLHttpRequest,h=navigator.userAgent.match(/AppleWebKit/)!==null&&navigator.userAgent.match(/Qt/)!==null&&navigator.userAgent.match(/Safari/)!==null;if(r&&l.addEventListener("readystatechange",function(){if(l.readyState==4||h&&l.readyState==3){if((l.status!=200||l.responseText==="")&&!e.callEvent("onAjaxError",[l]))return;setTimeout(function(){typeof _=="function"&&_.apply(window,[{xmlDoc:l,filePath:n}]),s(l),typeof _=="function"&&(_=null,l=null)},0)}}),a!="GET"||this.cache||(n+=(n.indexOf("?")>=0?"&":"?")+"dhxr"+new Date().getTime()+"=1"),l.open(a,n,r),i)for(var f in i)l.setRequestHeader(f,i[f]);else a.toUpperCase()=="POST"||a=="PUT"||a=="DELETE"?l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):a=="GET"&&(o=null);if(l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.send(o),!r)return{xmlDoc:l,filePath:n}}).bind(this))},urlSeparator:function(a){return a.indexOf("?")!=-1?"&":"?"}},e.$ajax=e.ajax}function extend$g(e){var t=function(r,_){for(var i="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",s=r.match(/%[a-zA-Z]/g),d=0;d<s.length;d++)switch(s[d]){case"%j":case"%d":i+="set[2]=temp["+d+"]||1;";break;case"%n":case"%m":i+="set[1]=(temp["+d+"]||1)-1;";break;case"%y":i+="set[0]=temp["+d+"]*1+(temp["+d+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":i+="set[3]=temp["+d+"]||0;";break;case"%i":i+="set[4]=temp["+d+"]||0;";break;case"%Y":i+="set[0]=temp["+d+"]||0;";break;case"%a":case"%A":i+="set[3]=set[3]%12+((temp["+d+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":i+="set[5]=temp["+d+"]||0;";break;case"%M":i+="set[1]=this.locale.date.month_short_hash[temp["+d+"]]||0;";break;case"%F":i+="set[1]=this.locale.date.month_full_hash[temp["+d+"]]||0;"}var l="set[0],set[1],set[2],set[3],set[4],set[5]";return _&&(l=" Date.UTC("+l+")"),new Function("date","var set=[0,0,1,0,0,0]; "+i+" return new Date("+l+");")},a=function(r,_){return function(i){for(var s=[0,0,1,0,0,0],d=i.match(/[a-zA-Z]+|[0-9]+/g),l=r.match(/%[a-zA-Z]/g),h=0;h<l.length;h++)switch(l[h]){case"%j":case"%d":s[2]=d[h]||1;break;case"%n":case"%m":s[1]=(d[h]||1)-1;break;case"%y":s[0]=1*d[h]+(d[h]>50?1900:2e3);break;case"%g":case"%G":case"%h":case"%H":s[3]=d[h]||0;break;case"%i":s[4]=d[h]||0;break;case"%Y":s[0]=d[h]||0;break;case"%a":case"%A":s[3]=s[3]%12+((d[h]||"").toLowerCase()=="am"?0:12);break;case"%s":s[5]=d[h]||0;break;case"%M":s[1]=e.locale.date.month_short_hash[d[h]]||0;break;case"%F":s[1]=e.locale.date.month_full_hash[d[h]]||0}return _?new Date(Date.UTC(s[0],s[1],s[2],s[3],s[4],s[5])):new Date(s[0],s[1],s[2],s[3],s[4],s[5])}},n=!1;function o(){return e.config.csp==="auto"?n:e.config.csp}(function(){try{new Function("canUseCsp = false;")}catch{n=!0}})(),e.date={init:function(){for(var r=e.locale.date.month_short,_=e.locale.date.month_short_hash={},i=0;i<r.length;i++)_[r[i]]=i;for(r=e.locale.date.month_full,_=e.locale.date.month_full_hash={},i=0;i<r.length;i++)_[r[i]]=i},_bind_host_object:function(r){return r.bind?r.bind(e):function(){return r.apply(e,arguments)}},date_part:function(r){var _=new Date(r);return r.setHours(0),r.setMinutes(0),r.setSeconds(0),r.setMilliseconds(0),r.getHours()&&(r.getDate()<_.getDate()||r.getMonth()<_.getMonth()||r.getFullYear()<_.getFullYear())&&r.setTime(r.getTime()+36e5*(24-r.getHours())),r},time_part:function(r){return(r.valueOf()/1e3-60*r.getTimezoneOffset())%86400},week_start:function(r){var _=r.getDay();return e.config.start_on_monday&&(_===0?_=6:_--),this.date_part(this.add(r,-1*_,"day"))},month_start:function(r){return r.setDate(1),this.date_part(r)},year_start:function(r){return r.setMonth(0),this.month_start(r)},day_start:function(r){return this.date_part(r)},_add_days:function(r,_){var i=new Date(r.valueOf());if(i.setDate(i.getDate()+_),_==Math.round(_)&&_>0){var s=(+i-+r)%864e5;if(s&&r.getTimezoneOffset()==i.getTimezoneOffset()){var d=s/36e5;i.setTime(i.getTime()+60*(24-d)*60*1e3)}}return _>=0&&!r.getHours()&&i.getHours()&&(i.getDate()<r.getDate()||i.getMonth()<r.getMonth()||i.getFullYear()<r.getFullYear())&&i.setTime(i.getTime()+36e5*(24-i.getHours())),i},add:function(r,_,i){var s=new Date(r.valueOf());switch(i){case"day":s=e.date._add_days(s,_);break;case"week":s=e.date._add_days(s,7*_);break;case"month":s.setMonth(s.getMonth()+_);break;case"year":s.setYear(s.getFullYear()+_);break;case"hour":s.setTime(s.getTime()+60*_*60*1e3);break;case"minute":s.setTime(s.getTime()+60*_*1e3);break;default:return e.date["add_"+i](r,_,i)}return s},to_fixed:function(r){return r<10?"0"+r:r},copy:function(r){return new Date(r.valueOf())},date_to_str:function(r,_){if(o())return function(s,d){return function(l){return s.replace(/%[a-zA-Z]/g,function(h){switch(h){case"%d":return d?e.date.to_fixed(l.getUTCDate()):e.date.to_fixed(l.getDate());case"%m":return d?e.date.to_fixed(l.getUTCMonth()+1):e.date.to_fixed(l.getMonth()+1);case"%j":return d?l.getUTCDate():l.getDate();case"%n":return d?l.getUTCMonth()+1:l.getMonth()+1;case"%y":return d?e.date.to_fixed(l.getUTCFullYear()%100):e.date.to_fixed(l.getFullYear()%100);case"%Y":return d?l.getUTCFullYear():l.getFullYear();case"%D":return d?e.locale.date.day_short[l.getUTCDay()]:e.locale.date.day_short[l.getDay()];case"%l":return d?e.locale.date.day_full[l.getUTCDay()]:e.locale.date.day_full[l.getDay()];case"%M":return d?e.locale.date.month_short[l.getUTCMonth()]:e.locale.date.month_short[l.getMonth()];case"%F":return d?e.locale.date.month_full[l.getUTCMonth()]:e.locale.date.month_full[l.getMonth()];case"%h":return d?e.date.to_fixed((l.getUTCHours()+11)%12+1):e.date.to_fixed((l.getHours()+11)%12+1);case"%g":return d?(l.getUTCHours()+11)%12+1:(l.getHours()+11)%12+1;case"%G":return d?l.getUTCHours():l.getHours();case"%H":return d?e.date.to_fixed(l.getUTCHours()):e.date.to_fixed(l.getHours());case"%i":return d?e.date.to_fixed(l.getUTCMinutes()):e.date.to_fixed(l.getMinutes());case"%a":return d?l.getUTCHours()>11?"pm":"am":l.getHours()>11?"pm":"am";case"%A":return d?l.getUTCHours()>11?"PM":"AM":l.getHours()>11?"PM":"AM";case"%s":return d?e.date.to_fixed(l.getUTCSeconds()):e.date.to_fixed(l.getSeconds());case"%W":return d?e.date.to_fixed(e.date.getUTCISOWeek(l)):e.date.to_fixed(e.date.getISOWeek(l));default:return h}})}}(r,_);r=r.replace(/%[a-zA-Z]/g,function(s){switch(s){case"%d":return'"+this.date.to_fixed(date.getDate())+"';case"%m":return'"+this.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+this.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+this.locale.date.day_short[date.getDay()]+"';case"%l":return'"+this.locale.date.day_full[date.getDay()]+"';case"%M":return'"+this.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+this.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+this.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+this.date.to_fixed(date.getHours())+"';case"%i":return'"+this.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+this.date.to_fixed(date.getSeconds())+"';case"%W":return'"+this.date.to_fixed(this.date.getISOWeek(date))+"';default:return s}}),_&&(r=r.replace(/date\.get/g,"date.getUTC"));var i=new Function("date",'return "'+r+'";');return e.date._bind_host_object(i)},str_to_date:function(r,_,i){var s=o()?a:t,d=s(r,_),l=/^[0-9]{4}(\-|\/)[0-9]{2}(\-|\/)[0-9]{2} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,h=/^[0-9]{2}\/[0-9]{2}\/[0-9]{4} ?(([0-9]{1,2}:[0-9]{2})(:[0-9]{1,2})?)?$/,f=/^[0-9]{2}\-[0-9]{2}\-[0-9]{4} ?(([0-9]{1,2}:[0-9]{1,2})(:[0-9]{1,2})?)?$/,m=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,u=s("%Y-%m-%d %H:%i:%s",_),p=s("%m/%d/%Y %H:%i:%s",_),b=s("%d-%m-%Y %H:%i:%s",_);return function(c){if(!i&&!e.config.parse_exact_format){if(c&&c.getISOWeek)return new Date(c);if(typeof c=="number")return new Date(c);if(g=c,l.test(String(g)))return u(c);if(function(v){return h.test(String(v))}(c))return p(c);if(function(v){return f.test(String(v))}(c))return b(c);if(function(v){return m.test(v)}(c))return new Date(c)}var g;return d.call(e,c)}},getISOWeek:function(r){if(!r)return!1;var _=(r=this.date_part(new Date(r))).getDay();_===0&&(_=7);var i=new Date(r.valueOf());i.setDate(r.getDate()+(4-_));var s=i.getFullYear(),d=Math.round((i.getTime()-new Date(s,0,1).getTime())/864e5);return 1+Math.floor(d/7)},getUTCISOWeek:function(r){return this.getISOWeek(this.convert_to_utc(r))},convert_to_utc:function(r){return new Date(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds())}}}function extend$f(e){e.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D %j",hour_date:"%H:%i",month_day:"%d",date_format:"%Y-%m-%d %H:%i",api_date:"%d-%m-%Y %H:%i",parse_exact_format:!1,preserve_length:!0,time_step:5,displayed_event_color:"#ff4a4a",displayed_event_text_color:"#ffef80",wide_form:0,day_column_padding:8,use_select_menu_space:!0,fix_tab_position:!0,start_on_monday:!0,first_hour:0,last_hour:24,readonly:!1,drag_resize:!0,drag_move:!0,drag_create:!0,drag_event_body:!0,dblclick_create:!0,details_on_dblclick:!0,edit_on_create:!0,details_on_create:!0,header:null,hour_size_px:44,resize_month_events:!1,resize_month_timed:!1,responsive_lightbox:!1,separate_short_events:!0,rtl:!1,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,multi_day:!0,multi_day_height_limit:200,drag_lightbox:!0,preserve_scroll:!0,select:!0,server_utc:!1,touch:!0,touch_tip:!0,touch_drag:500,touch_swipe_dates:!1,quick_info_detached:!0,positive_closing:!1,drag_highlight:!0,limit_drag_out:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_left:["dhx_save_btn","dhx_cancel_btn"],buttons_right:["dhx_delete_btn"],lightbox:{sections:[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},highlight_displayed_event:!0,left_border:!1,ajax_error:"alert",delay_render:0,timeline_swap_resize:!0,wai_aria_attributes:!0,wai_aria_application_role:!0,csp:"auto",event_attribute:"data-event-id",show_errors:!0},e.config.buttons_left.$initial=e.config.buttons_left.join(),e.config.buttons_right.$initial=e.config.buttons_right.join(),e._helpers={parseDate:function(t){return(e.templates.xml_date||e.templates.parse_date)(t)},formatDate:function(t){return(e.templates.xml_format||e.templates.format_date)(t)}},e.templates={},e.init_templates=function(){var t=e.date.date_to_str,a=e.config;(function(n,o){for(var r in o)n[r]||(n[r]=o[r])})(e.templates,{day_date:t(a.default_date),month_date:t(a.month_date),week_date:function(n,o){return a.rtl?e.templates.day_date(e.date.add(o,-1,"day"))+" &ndash; "+e.templates.day_date(n):e.templates.day_date(n)+" &ndash; "+e.templates.day_date(e.date.add(o,-1,"day"))},day_scale_date:t(a.default_date),time_slot_text:function(n){return""},time_slot_class:function(n){return""},month_scale_date:t(a.week_date),week_scale_date:t(a.day_date),hour_scale:t(a.hour_date),time_picker:t(a.hour_date),event_date:t(a.hour_date),month_day:t(a.month_day),load_format:t(a.load_date),format_date:t(a.date_format,a.server_utc),parse_date:e.date.str_to_date(a.date_format,a.server_utc),api_date:e.date.str_to_date(a.api_date,!1,!1),event_header:function(n,o,r){return r._mode==="small"||r._mode==="smallest"?e.templates.event_date(n):e.templates.event_date(n)+" - "+e.templates.event_date(o)},event_text:function(n,o,r){return r.text},event_class:function(n,o,r){return""},month_date_class:function(n){return""},week_date_class:function(n){return""},event_bar_date:function(n,o,r){return e.templates.event_date(n)},event_bar_text:function(n,o,r){return r.text},month_events_link:function(n,o){return"<a>View more("+o+" events)</a>"},drag_marker_class:function(n,o,r){return""},drag_marker_content:function(n,o,r){return""},tooltip_date_format:e.date.date_to_str("%Y-%m-%d %H:%i"),tooltip_text:function(n,o,r){return"<b>Event:</b> "+r.text+"<br/><b>Start date:</b> "+e.templates.tooltip_date_format(n)+"<br/><b>End date:</b> "+e.templates.tooltip_date_format(o)},calendar_month:t("%F %Y"),calendar_scale_date:t("%D"),calendar_date:t("%d"),calendar_time:t("%d-%m-%Y")}),this.callEvent("onTemplatesReady",[])}}function extend$e(e){e._events={},e.clearAll=function(){this._events={},this._loaded={},this._edit_id=null,this._select_id=null,this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this._new_event=null,this.clear_view(),this.callEvent("onClearAll",[])},e.addEvent=function(t,a,n,o,r){if(!arguments.length)return this.addEventNow();var _=t;arguments.length!=1&&((_=r||{}).start_date=t,_.end_date=a,_.text=n,_.id=o),_.id=_.id||e.uid(),_.text=_.text||"",typeof _.start_date=="string"&&(_.start_date=this.templates.api_date(_.start_date)),typeof _.end_date=="string"&&(_.end_date=this.templates.api_date(_.end_date));var i=6e4*(this.config.event_duration||this.config.time_step);_.start_date.valueOf()==_.end_date.valueOf()&&_.end_date.setTime(_.end_date.valueOf()+i),_.start_date.setMilliseconds(0),_.end_date.setMilliseconds(0),_._timed=this.isOneDayEvent(_);var s=!this._events[_.id];return this._events[_.id]=_,this.event_updated(_),this._loading||this.callEvent(s?"onEventAdded":"onEventChanged",[_.id,_]),_.id},e.deleteEvent=function(t,a){var n=this._events[t];(a||this.callEvent("onBeforeEventDelete",[t,n])&&this.callEvent("onConfirmedBeforeEventDelete",[t,n]))&&(n&&(e.getState().select_id==t&&e.unselect(),delete this._events[t],this.event_updated(n),this._drag_id==n.id&&(this._drag_id=null,this._drag_mode=null,this._drag_pos=null)),this.callEvent("onEventDeleted",[t,n]))},e.getEvent=function(t){return this._events[t]},e.setEvent=function(t,a){a.id||(a.id=t),this._events[t]=a},e.for_rendered=function(t,a){for(var n=this._rendered.length-1;n>=0;n--)this._rendered[n].getAttribute(this.config.event_attribute)==t&&a(this._rendered[n],n)},e.changeEventId=function(t,a){if(t!=a){var n=this._events[t];n&&(n.id=a,this._events[a]=n,delete this._events[t]),this.for_rendered(t,function(o){o.setAttribute("event_id",a),o.setAttribute(e.config.event_attribute,a)}),this._select_id==t&&(this._select_id=a),this._edit_id==t&&(this._edit_id=a),this.callEvent("onEventIdChange",[t,a])}},function(){for(var t=["text","Text","start_date","StartDate","end_date","EndDate"],a=function(r){return function(_){return e.getEvent(_)[r]}},n=function(r){return function(_,i){var s=e.getEvent(_);s[r]=i,s._changed=!0,s._timed=this.isOneDayEvent(s),e.event_updated(s,!0)}},o=0;o<t.length;o+=2)e["getEvent"+t[o+1]]=a(t[o]),e["setEvent"+t[o+1]]=n(t[o])}(),e.event_updated=function(t,a){this.is_visible_events(t)?this.render_view_data():this.clear_event(t.id)},e.is_visible_events=function(t){if(!this._min_date||!this._max_date)return!1;if(t.start_date.valueOf()<this._max_date.valueOf()&&this._min_date.valueOf()<t.end_date.valueOf()){var a=t.start_date.getHours(),n=t.end_date.getHours()+t.end_date.getMinutes()/60,o=this.config.last_hour,r=this.config.first_hour;return!!(this._table_view||!((n>o||n<=r)&&(a>=o||a<r)))||(t.end_date.valueOf()-t.start_date.valueOf())/36e5>24-(this.config.last_hour-this.config.first_hour)||a<o&&n>r}return!1},e.isOneDayEvent=function(t){var a=new Date(t.end_date.valueOf()-1);return t.start_date.getFullYear()===a.getFullYear()&&t.start_date.getMonth()===a.getMonth()&&t.start_date.getDate()===a.getDate()&&t.end_date.valueOf()-t.start_date.valueOf()<864e5},e.get_visible_events=function(t){var a=[];for(var n in this._events)this.is_visible_events(this._events[n])&&(t&&!this._events[n]._timed||this.filter_event(n,this._events[n])&&a.push(this._events[n]));return a},e.filter_event=function(t,a){var n=this["filter_"+this._mode];return!n||n(t,a)},e._is_main_area_event=function(t){return!!t._timed},e.render_view_data=function(t,a){var n=!1;if(!t){if(n=!0,this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),t=this.get_visible_events(!(this._table_view||this.config.multi_day))}for(var o=0,r=t.length;o<r;o++)this._recalculate_timed(t[o]);if(this.config.multi_day&&!this._table_view){var _=[],i=[];for(o=0;o<t.length;o++)this._is_main_area_event(t[o])?_.push(t[o]):i.push(t[o]);if(!this._els.dhx_multi_day){var s=e._commonErrorMessages.unknownView(this._mode);throw new Error(s)}this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(i,a),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(_,a)}else{var d=document.createDocumentFragment(),l=this._els.dhx_cal_data[0];this._rendered_location=d,this.render_data(t,a),l.appendChild(d),this._rendered_location=l}n&&this.callEvent("onDataRender",[])},e._view_month_day=function(t){var a=e.getActionData(t).date;e.callEvent("onViewMoreClick",[a])&&e.setCurrentView(a,"day")},e._render_month_link=function(t){for(var a=this._rendered_location,n=this._lame_clone(t),o=t._sday;o<t._eday;o++){n._sday=o,n._eday=o+1;var r=e.date,_=e._min_date;_=r.add(_,n._sweek,"week"),_=r.add(_,n._sday,"day");var i=e.getEvents(_,r.add(_,1,"day")).length,s=this._get_event_bar_pos(n),d=s.x2-s.x,l=document.createElement("div");e.event(l,"click",function(h){e._view_month_day(h)}),l.className="dhx_month_link",l.style.top=s.y+"px",l.style.left=s.x+"px",l.style.width=d+"px",l.innerHTML=e.templates.month_events_link(_,i),this._rendered.push(l),a.appendChild(l)}},e._recalculate_timed=function(t){var a;t&&(a=typeof t!="object"?this._events[t]:t)&&(a._timed=e.isOneDayEvent(a))},e.attachEvent("onEventChanged",e._recalculate_timed),e.attachEvent("onEventAdded",e._recalculate_timed),e.render_data=function(t,a){t=this._pre_render_events(t,a);for(var n={},o=0;o<t.length;o++)if(this._table_view)if(e._mode!="month")this.render_event_bar(t[o]);else{var r=e.config.max_month_events;r!==1*r||t[o]._sorder<r?this.render_event_bar(t[o]):r!==void 0&&t[o]._sorder==r&&e._render_month_link(t[o])}else{var _=t[o],i=e.locate_holder(_._sday);if(!i)continue;n[_._sday]||(n[_._sday]={real:i,buffer:document.createDocumentFragment(),width:i.clientWidth});var s=n[_._sday];this.render_event(_,s.buffer,s.width)}for(var o in n)(s=n[o]).real&&s.buffer&&s.real.appendChild(s.buffer)},e._get_first_visible_cell=function(t){for(var a=0;a<t.length;a++)if((t[a].className||"").indexOf("dhx_scale_ignore")==-1)return t[a];return t[0]},e._pre_render_events=function(t,a){var n=this.xy.bar_height,o=this._colsS.heights,r=this._colsS.heights=[0,0,0,0,0,0,0],_=this._els.dhx_cal_data[0];if(t=this._table_view?this._pre_render_events_table(t,a):this._pre_render_events_line(t,a),this._table_view)if(a)this._colsS.heights=o;else{var i=_.querySelectorAll(".dhx_cal_month_row");if(i.length){for(var s=0;s<i.length;s++){r[s]++;var d=i[s].querySelectorAll(".dhx_cal_month_cell"),l=this._colsS.height-this.xy.month_head_height;if(r[s]*n>l){var h=l;1*this.config.max_month_events!==this.config.max_month_events||r[s]<=this.config.max_month_events?h=r[s]*n:(this.config.max_month_events+1)*n>l&&(h=(this.config.max_month_events+1)*n),i[s].style.height=h+this.xy.month_head_height+"px"}r[s]=(r[s-1]||0)+e._get_first_visible_cell(d).offsetHeight}r.unshift(0);const y=this.$container.querySelector(".dhx_cal_data");if(y.offsetHeight<y.scrollHeight&&!e._colsS.scroll_fix&&e.xy.scroll_width){var f=e._colsS,m=f[f.col_length],u=f.heights.slice();m-=e.xy.scroll_width||0,this._calc_scale_sizes(m,this._min_date,this._max_date),e._colsS.heights=u,this.set_xy(this._els.dhx_cal_header[0],m),e._render_scales(this._els.dhx_cal_header[0]),e._render_month_scale(this._els.dhx_cal_data[0],this._get_timeunit_start(),this._min_date),f.scroll_fix=!0}}else if(t.length||this._els.dhx_multi_day[0].style.visibility!="visible"||(r[0]=-1),t.length||r[0]==-1){var p=(r[0]+1)*n+4,b=p,c=p+"px";this.config.multi_day_height_limit&&(c=(b=Math.min(p,this.config.multi_day_height_limit))+"px"),e._is_new_skin()||(_.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+b+"px",_.style.height=this._obj.offsetHeight-parseInt(_.style.top,10)-(this.xy.margin_top||0)+"px");var g=this._els.dhx_multi_day[0];g.style.height=c,g.style.visibility=r[0]==-1?"hidden":"visible",g.style.display=r[0]==-1?"none":"";var v=this._els.dhx_multi_day[1];v.style.height=c,v.style.visibility=r[0]==-1?"hidden":"visible",v.style.display=r[0]==-1?"none":"",v.className=r[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(r[0]+1)*n,this.config.multi_day_height_limit&&(this._dy_shift=Math.min(this.config.multi_day_height_limit,this._dy_shift)),r[0]=0,b!=p&&(e._is_new_skin()||(_.style.top=parseInt(_.style.top)+2+"px"),g.style.overflowY="auto",v.style.position="fixed",v.style.top="",v.style.left="")}}return t},e._get_event_sday=function(t){var a=this.date.day_start(new Date(t.start_date));return Math.round((a.valueOf()-this._min_date.valueOf())/864e5)},e._get_event_mapped_end_date=function(t){var a=t.end_date;if(this.config.separate_short_events){var n=(t.end_date-t.start_date)/6e4;n<this._min_mapped_duration&&(a=this.date.add(a,this._min_mapped_duration-n,"minute"))}return a},e._pre_render_events_line=function(t,a){t.sort(function(v,y){return v.start_date.valueOf()==y.start_date.valueOf()?v.id>y.id?1:-1:v.start_date>y.start_date?1:-1});var n=[],o=[];this._min_mapped_duration=Math.floor(60*this.xy.min_event_height/this.config.hour_size_px);for(var r=0;r<t.length;r++){var _=t[r],i=_.start_date,s=_.end_date,d=i.getHours(),l=s.getHours();if(_._sday=this._get_event_sday(_),this._ignores[_._sday])t.splice(r,1),r--;else{if(n[_._sday]||(n[_._sday]=[]),!a){_._inner=!1;for(var h=n[_._sday];h.length;){var f=h[h.length-1];if(!(this._get_event_mapped_end_date(f).valueOf()<=_.start_date.valueOf()))break;h.splice(h.length-1,1)}for(var m=h.length,u=!1,p=0;p<h.length;p++)if(f=h[p],this._get_event_mapped_end_date(f).valueOf()<=_.start_date.valueOf()){u=!0,_._sorder=f._sorder,m=p,_._inner=!0;break}if(h.length&&(h[h.length-1]._inner=!0),!u)if(h.length)if(h.length<=h[h.length-1]._sorder){if(h[h.length-1]._sorder)for(p=0;p<h.length;p++){for(var b=!1,c=0;c<h.length;c++)if(h[c]._sorder==p){b=!0;break}if(!b){_._sorder=p;break}}else _._sorder=0;_._inner=!0}else{var g=h[0]._sorder;for(p=1;p<h.length;p++)h[p]._sorder>g&&(g=h[p]._sorder);_._sorder=g+1,_._inner=!1}else _._sorder=0;h.splice(m,m==h.length?0:1,_),h.length>(h.max_count||0)?(h.max_count=h.length,_._count=h.length):_._count=_._count?_._count:1}(d<this.config.first_hour||l>=this.config.last_hour)&&(o.push(_),t[r]=_=this._copy_event(_),d<this.config.first_hour&&(_.start_date.setHours(this.config.first_hour),_.start_date.setMinutes(0)),l>=this.config.last_hour&&(_.end_date.setMinutes(0),_.end_date.setHours(this.config.last_hour)),_.start_date>_.end_date||d==this.config.last_hour)&&(t.splice(r,1),r--)}}if(!a){for(r=0;r<t.length;r++)t[r]._count=n[t[r]._sday].max_count;for(r=0;r<o.length;r++)o[r]._count=n[o[r]._sday].max_count}return t},e._time_order=function(t){t.sort(function(a,n){return a.start_date.valueOf()==n.start_date.valueOf()?a._timed&&!n._timed?1:!a._timed&&n._timed?-1:a.id>n.id?1:-1:a.start_date>n.start_date?1:-1})},e._is_any_multiday_cell_visible=function(t,a,n){var o=this._cols.length,r=!1,_=t,i=!0,s=new Date(a);for(e.date.day_start(new Date(a)).valueOf()!=a.valueOf()&&(s=e.date.day_start(s),s=e.date.add(s,1,"day"));_<s;){i=!1;var d=this.locate_holder_day(_,!1,n)%o;if(!this._ignores[d]){r=!0;break}_=e.date.add(_,1,"day")}return i||r},e._pre_render_events_table=function(t,a){this._time_order(t);for(var n,o=[],r=[[],[],[],[],[],[],[]],_=this._colsS.heights,i=this._cols.length,s={},d=0;d<t.length;d++){var l=t[d],h=l.id;s[h]||(s[h]={first_chunk:!0,last_chunk:!0});var f=s[h],m=n||l.start_date,u=l.end_date;m<this._min_date&&(f.first_chunk=!1,m=this._min_date),u>this._max_date&&(f.last_chunk=!1,u=this._max_date);var p=this.locate_holder_day(m,!1,l);if(l._sday=p%i,!this._ignores[l._sday]||!l._timed){var b=this.locate_holder_day(u,!0,l)||i;if(l._eday=b%i||i,l._length=b-p,l._sweek=Math.floor((this._correct_shift(m.valueOf(),1)-this._min_date.valueOf())/(864e5*i)),e._is_any_multiday_cell_visible(m,u,l)){var c,g=r[l._sweek];for(c=0;c<g.length&&!(g[c]._eday<=l._sday);c++);if(l._sorder&&a||(l._sorder=c),l._sday+l._length<=i)n=null,o.push(l),g[c]=l,_[l._sweek]=g.length-1,l._first_chunk=f.first_chunk,l._last_chunk=f.last_chunk;else{var v=this._copy_event(l);v.id=l.id,v._length=i-l._sday,v._eday=i,v._sday=l._sday,v._sweek=l._sweek,v._sorder=l._sorder,v.end_date=this.date.add(m,v._length,"day"),v._first_chunk=f.first_chunk,f.first_chunk&&(f.first_chunk=!1),o.push(v),g[c]=v,n=v.end_date,_[l._sweek]=g.length-1,d--}}}}return o},e._copy_dummy=function(){var t=new Date(this.start_date),a=new Date(this.end_date);this.start_date=t,this.end_date=a},e._copy_event=function(t){return this._copy_dummy.prototype=t,new this._copy_dummy},e._rendered=[],e.clear_view=function(){for(var t=0;t<this._rendered.length;t++){var a=this._rendered[t];a.parentNode&&a.parentNode.removeChild(a)}this._rendered=[]},e.updateEvent=function(t){var a=this.getEvent(t);this.clear_event(t),a&&this.is_visible_events(a)&&this.filter_event(t,a)&&(this._table_view||this.config.multi_day||a._timed)&&(this.config.update_render?this.render_view_data():this.getState().mode!="month"||this.getState().drag_id||this.isOneDayEvent(a)?this.render_view_data([a],!0):this.render_view_data())},e.clear_event=function(t){this.for_rendered(t,function(a,n){a.parentNode&&a.parentNode.removeChild(a),e._rendered.splice(n,1)})},e._y_from_date=function(t){var a=60*t.getHours()+t.getMinutes();return Math.round((60*a*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)},e._calc_event_y=function(t,a){a=a||0;var n=60*t.start_date.getHours()+t.start_date.getMinutes(),o=60*t.end_date.getHours()+t.end_date.getMinutes()||60*e.config.last_hour;return{top:this._y_from_date(t.start_date),height:Math.max(a,(o-n)*this.config.hour_size_px/60)}},e.render_event=function(t,a,n){var o=e.xy.menu_width,r=this.config.use_select_menu_space?0:o;if(!(t._sday<0)){var _=e.locate_holder(t._sday);if(_){a=a||_;var i=this._calc_event_y(t,e.xy.min_event_height),s=i.top,d=i.height,l=t._count||1,h=t._sorder||0;n=n||_.clientWidth,this.config.day_column_padding&&(n-=this.config.day_column_padding);var f=Math.floor((n-r)/l),m=h*f+(h>0?2:1);if(t._inner||(f*=l-h),this.config.cascade_event_display){var u=this.config.cascade_event_count,p=this.config.cascade_event_margin;m=h%u*p;var b=t._inner?(l-h-1)%u*p/2:0;f=Math.floor(n-r-m-b)}t._mode=d<30?"smallest":d<42?"small":null;var c=this._render_v_bar(t,r+m,s,f,d,t._text_style,e.templates.event_header(t.start_date,t.end_date,t),e.templates.event_text(t.start_date,t.end_date,t));if(t._mode==="smallest"?c.classList.add("dhx_cal_event--xsmall"):t._mode==="small"&&c.classList.add("dhx_cal_event--small"),this._waiAria.eventAttr(t,c),this._rendered.push(c),a.appendChild(c),m=m+parseInt(this.config.rtl?_.style.right:_.style.left,10)+r,this._edit_id==t.id){c.style.zIndex=1,f=Math.max(f,e.xy.editor_width),(c=document.createElement("div")).setAttribute("event_id",t.id),c.setAttribute(this.config.event_attribute,t.id),this._waiAria.eventAttr(t,c),c.className="dhx_cal_event dhx_cal_editor",this.config.rtl&&m++,this.set_xy(c,f,d,m,s),t.color&&c.style.setProperty("--dhx-scheduler-event-background",t.color);var g=e.templates.event_class(t.start_date,t.end_date,t);g&&(c.className+=" "+g);var v=document.createElement("div");v.style.cssText+="overflow:hidden;height:100%",c.appendChild(v),this._els.dhx_cal_data[0].appendChild(c),this._rendered.push(c),v.innerHTML="<textarea class='dhx_cal_editor'>"+t.text+"</textarea>",this._editor=v.querySelector("textarea"),e.event(this._editor,"keydown",function(E){if(E.shiftKey)return!0;var S=E.keyCode;S==e.keys.edit_save&&e.editStop(!0),S==e.keys.edit_cancel&&e.editStop(!1),S!=e.keys.edit_save&&S!=e.keys.edit_cancel||E.preventDefault&&E.preventDefault()}),e.event(this._editor,"selectstart",function(E){return E.cancelBubble=!0,!0}),e._focus(this._editor,!0),this._els.dhx_cal_data[0].scrollLeft=0}if(this.xy.menu_width!==0&&this._select_id==t.id){this.config.cascade_event_display&&this._drag_mode&&(c.style.zIndex=1);for(var y,x=this.config["icons_"+(this._edit_id==t.id?"edit":"select")],k="",w=0;w<x.length;w++){const E=x[w];y=this._waiAria.eventMenuAttrString(E),k+=`<div class='dhx_menu_icon ${E}' title='${this.locale.labels[E]}' ${y}></div>`}var D=this._render_v_bar(t,m-o-1,s,o,null,"","<div class='dhx_menu_head'></div>",k,!0);t.color&&D.style.setProperty("--dhx-scheduler-event-background",t.color),t.textColor&&D.style.setProperty("--dhx-scheduler-event-color",t.textColor),this._els.dhx_cal_data[0].appendChild(D),this._rendered.push(D)}this.config.drag_highlight&&this._drag_id==t.id&&this.highlightEventPosition(t)}}},e._render_v_bar=function(t,a,n,o,r,_,i,s,d){var l=document.createElement("div"),h=t.id,f=d?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",m=e.getState();m.drag_id==t.id&&(f+=" dhx_cal_event_drag"),m.select_id==t.id&&(f+=" dhx_cal_event_selected");var u=e.templates.event_class(t.start_date,t.end_date,t);u&&(f=f+" "+u),this.config.cascade_event_display&&(f+=" dhx_cal_event_cascade");var p=o,b='<div event_id="'+h+'" '+this.config.event_attribute+'="'+h+'" class="'+f+'" style="position:absolute; top:'+n+"px; "+(this.config.rtl?"right:":"left:")+a+"px; width:"+p+"px; height:"+r+"px;"+(_||"")+'"></div>';l.innerHTML=b;var c=l.cloneNode(!0).firstChild;if(!d&&e.renderEvent(c,t,o,r,i,s))return t.color&&c.style.setProperty("--dhx-scheduler-event-background",t.color),t.textColor&&c.style.setProperty("--dhx-scheduler-event-color",t.textColor),c;c=l.firstChild,t.color&&c.style.setProperty("--dhx-scheduler-event-background",t.color),t.textColor&&c.style.setProperty("--dhx-scheduler-event-color",t.textColor);var g='<div class="dhx_event_move dhx_header" >&nbsp;</div>';g+='<div class="dhx_event_move dhx_title">'+i+"</div>",g+='<div class="dhx_body">'+s+"</div>";var v="dhx_event_resize dhx_footer";return(d||t._drag_resize===!1)&&(v="dhx_resize_denied "+v),g+='<div class="'+v+'" style=" width:'+(d?" margin-top:-1px;":"")+'" ></div>',c.innerHTML=g,c},e.renderEvent=function(){return!1},e.locate_holder=function(t){return this._mode=="day"?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[t]},e.locate_holder_day=function(t,a){var n=Math.floor((this._correct_shift(t,1)-this._min_date)/864e5);return a&&this.date.time_part(t)&&n++,n},e._get_dnd_order=function(t,a,n){if(!this._drag_event)return t;this._drag_event._orig_sorder?t=this._drag_event._orig_sorder:this._drag_event._orig_sorder=t;for(var o=a*t;o+a>n;)t--,o-=a;return t=Math.max(t,0)},e._get_event_bar_pos=function(t){var a=this.config.rtl,n=this._colsS,o=n[t._sday],r=n[t._eday];a&&(o=n[n.col_length]-n[t._eday]+n[0],r=n[n.col_length]-n[t._sday]+n[0]),r==o&&(r=n[t._eday+1]);var _=this.xy.bar_height,i=t._sorder;if(t.id==this._drag_id){var s=n.heights[t._sweek+1]-n.heights[t._sweek]-this.xy.month_head_height;i=e._get_dnd_order(i,_,s)}var d=i*_;return{x:o,x2:r,y:n.heights[t._sweek]+(n.height?this.xy.month_scale_height+2:2)+d}},e.render_event_bar=function(t){var a=this._rendered_location,n=this._get_event_bar_pos(t),o=n.y,r=n.x,_=n.x2,i="";if(_){var s=e.config.resize_month_events&&this._mode=="month"&&(!t._timed||e.config.resize_month_timed),d=document.createElement("div"),l=t.hasOwnProperty("_first_chunk")&&t._first_chunk,h=t.hasOwnProperty("_last_chunk")&&t._last_chunk,f=s&&(t._timed||l),m=s&&(t._timed||h),u=!0,p="dhx_cal_event_clear";t._timed&&!s||(u=!1,p="dhx_cal_event_line"),l&&(p+=" dhx_cal_event_line_start"),h&&(p+=" dhx_cal_event_line_end"),f&&(i+="<div class='dhx_event_resize dhx_event_resize_start'></div>"),m&&(i+="<div class='dhx_event_resize dhx_event_resize_end'></div>");var b=e.templates.event_class(t.start_date,t.end_date,t);b&&(p+=" "+b);var c=t.color?"--dhx-scheduler-event-background:"+t.color+";":"",g=t.textColor?"--dhx-scheduler-event-text:"+t.textColor+";":"",v=["position:absolute","top:"+o+"px","left:"+r+"px","width:"+(_-r-(u?1:0))+"px","height:"+(this.xy.bar_height-2)+"px",g,c,t._text_style||""].join(";"),y="<div event_id='"+t.id+"' "+this.config.event_attribute+"='"+t.id+"' class='"+p+"' style='"+v+"'"+this._waiAria.eventBarAttrString(t)+">";s&&(y+=i),e.getState().mode=="month"&&(t=e.getEvent(t.id)),t._timed&&(y+=`<span class='dhx_cal_event_clear_date'>${e.templates.event_bar_date(t.start_date,t.end_date,t)}</span>`),y+="<div class='dhx_cal_event_line_content'>",y+=e.templates.event_bar_text(t.start_date,t.end_date,t)+"</div>",y+="</div>",y+="</div>",d.innerHTML=y,this._rendered.push(d.firstChild),a.appendChild(d.firstChild)}},e._locate_event=function(t){for(var a=null;t&&!a&&t.getAttribute;)a=t.getAttribute(this.config.event_attribute),t=t.parentNode;return a},e.edit=function(t){this._edit_id!=t&&(this.editStop(!1,t),this._edit_id=t,this.updateEvent(t))},e.editStop=function(t,a){if(!a||this._edit_id!=a){var n=this.getEvent(this._edit_id);n&&(t&&(n.text=this._editor.value),this._edit_id=null,this._editor=null,this.updateEvent(n.id),this._edit_stop_event(n,t))}},e._edit_stop_event=function(t,a){this._new_event?(a?this.callEvent("onEventAdded",[t.id,t]):t&&this.deleteEvent(t.id,!0),this._new_event=null):a&&this.callEvent("onEventChanged",[t.id,t])},e.getEvents=function(t,a){var n=[];for(var o in this._events){var r=this._events[o];r&&(!t&&!a||r.start_date<a&&r.end_date>t)&&n.push(r)}return n},e.getRenderedEvent=function(t){if(t){for(var a=e._rendered,n=0;n<a.length;n++){var o=a[n];if(o.getAttribute(e.config.event_attribute)==t)return o}return null}},e.showEvent=function(t,a){t&&typeof t=="object"&&(a=t.mode,h=t.section,t=t.section);var n=typeof t=="number"||typeof t=="string"?e.getEvent(t):t;if(a=a||e._mode,n&&(!this.checkEvent("onBeforeEventDisplay")||this.callEvent("onBeforeEventDisplay",[n,a]))){var o=e.config.scroll_hour;e.config.scroll_hour=n.start_date.getHours();var r=e.config.preserve_scroll;e.config.preserve_scroll=!1;var _=n.color,i=n.textColor;if(e.config.highlight_displayed_event&&(n.color=e.config.displayed_event_color,n.textColor=e.config.displayed_event_text_color),e.setCurrentView(new Date(n.start_date),a),e.config.scroll_hour=o,e.config.preserve_scroll=r,e.matrix&&e.matrix[a]){var s=e.getView(),d=s.y_property,l=e.getEvent(n.id);if(l){if(!h){var h=l[d];Array.isArray(h)?h=h[0]:typeof h=="string"&&e.config.section_delimiter&&h.indexOf(e.config.section_delimiter)>-1&&(h=h.split(e.config.section_delimiter)[0])}var f=s.getSectionTop(h),m=s.posFromDate(l.start_date),u=e.$container.querySelector(".dhx_timeline_data_wrapper");if(m-=(u.offsetWidth-s.dx)/2,f=f-u.offsetHeight/2+s.dy/2,s._smartRenderingEnabled())var p=s.attachEvent("onScroll",function(){b(),s.detachEvent(p)});s.scrollTo({left:m,top:f}),s._smartRenderingEnabled()||b()}}else b();e.callEvent("onAfterEventDisplay",[n,a])}function b(){n.color=_,n.textColor=i}}}function extend$d(e){e._append_drag_marker=function(t){if(!t.parentNode){var a=e._els.dhx_cal_data[0].lastChild,n=e._getClassName(a);n.indexOf("dhx_scale_holder")<0&&a.previousSibling&&(a=a.previousSibling),n=e._getClassName(a),a&&n.indexOf("dhx_scale_holder")===0&&a.appendChild(t)}},e._update_marker_position=function(t,a){var n=e._calc_event_y(a,0);t.style.top=n.top+"px",t.style.height=n.height+"px"},e.highlightEventPosition=function(t){var a=document.createElement("div");a.setAttribute("event_id",t.id),a.setAttribute(this.config.event_attribute,t.id),this._rendered.push(a),this._update_marker_position(a,t);var n=this.templates.drag_marker_class(t.start_date,t.end_date,t),o=this.templates.drag_marker_content(t.start_date,t.end_date,t);a.className="dhx_drag_marker",n&&(a.className+=" "+n),o&&(a.innerHTML=o),this._append_drag_marker(a)}}function extend$c(e){e._parsers.xml={canParse:function(t,a){if(a.responseXML&&a.responseXML.firstChild)return!0;try{var n=e.ajax.parse(a.responseText),o=e.ajax.xmltop("data",n);if(o&&o.tagName==="data")return!0}catch{}return!1},parse:function(t){var a;if(t.xmlDoc.responseXML||(t.xmlDoc.responseXML=e.ajax.parse(t.xmlDoc.responseText)),(a=e.ajax.xmltop("data",t.xmlDoc)).tagName!="data")return null;var n=a.getAttribute("dhx_security");n&&(window.dhtmlx&&(window.dhtmlx.security_key=n),e.security_key=n);for(var o=e.ajax.xpath("//coll_options",t.xmlDoc),r=0;r<o.length;r++){var _=o[r].getAttribute("for"),i=e.serverList[_];i||(e.serverList[_]=i=[]),i.splice(0,i.length);for(var s=e.ajax.xpath(".//item",o[r]),d=0;d<s.length;d++){for(var l=s[d].attributes,h={key:s[d].getAttribute("value"),label:s[d].getAttribute("label")},f=0;f<l.length;f++){var m=l[f];m.nodeName!="value"&&m.nodeName!="label"&&(h[m.nodeName]=m.nodeValue)}i.push(h)}}o.length&&e.callEvent("onOptionsLoad",[]);var u=e.ajax.xpath("//userdata",t.xmlDoc);for(r=0;r<u.length;r++){var p=e._xmlNodeToJSON(u[r]);e._userdata[p.name]=p.text}var b=[];for(a=e.ajax.xpath("//event",t.xmlDoc),r=0;r<a.length;r++){var c=b[r]=e._xmlNodeToJSON(a[r]);e._init_event(c)}return b}}}function extend$b(e){e.json=e._parsers.json={canParse:function(t){if(t&&typeof t=="object")return!0;if(typeof t=="string")try{var a=JSON.parse(t);return Object.prototype.toString.call(a)==="[object Object]"||Object.prototype.toString.call(a)==="[object Array]"}catch{return!1}return!1},parse:function(t){var a=[];typeof t=="string"&&(t=JSON.parse(t)),Object.prototype.toString.call(t)==="[object Array]"?a=t:t&&(t.events?a=t.events:t.data&&(a=t.data)),a=a||[],t.dhx_security&&(window.dhtmlx&&(window.dhtmlx.security_key=t.dhx_security),e.security_key=t.dhx_security);var n=t&&t.collections?t.collections:{},o=!1;for(var r in n)if(n.hasOwnProperty(r)){o=!0;var _=n[r],i=e.serverList[r];i||(e.serverList[r]=i=[]),i.splice(0,i.length);for(var s=0;s<_.length;s++){var d=_[s],l={key:d.value,label:d.label};for(var h in d)if(d.hasOwnProperty(h)){if(h=="value"||h=="label")continue;l[h]=d[h]}i.push(l)}}o&&e.callEvent("onOptionsLoad",[]);for(var f=[],m=0;m<a.length;m++){var u=a[m];e._init_event(u),f.push(u)}return f}}}function extend$a(e){e.ical=e._parsers.ical={canParse:function(t){return typeof t=="string"&&new RegExp("^BEGIN:VCALENDAR").test(t)},parse:function(t){var a=t.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(a.length){a[0]=a[0].replace(/[\r\n]+ /g,""),a[0]=a[0].replace(/[\r\n]+(?=[a-z \t])/g," "),a[0]=a[0].replace(/;[^:\r\n]*:/g,":");for(var n,o=[],r=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");(n=r.exec(a))!==null;){for(var _,i={},s=/[^\r\n]+[\r\n]+/g;(_=s.exec(n[1]))!==null;)this.parse_param(_.toString(),i);i.uid&&!i.id&&(i.id=i.uid),o.push(i)}return o}},parse_param:function(t,a){var n=t.indexOf(":");if(n!=-1){var o=t.substr(0,n).toLowerCase(),r=t.substr(n+1).replace(/\\,/g,",").replace(/[\r\n]+$/,"");o=="summary"?o="text":o=="dtstart"?(o="start_date",r=this.parse_date(r,0,0)):o=="dtend"&&(o="end_date",r=this.parse_date(r,0,0)),a[o]=r}},parse_date:function(t,a,n){var o=t.split("T"),r=!1;o[1]&&(a=o[1].substr(0,2),n=o[1].substr(2,2),r=o[1][6]=="Z");var _=o[0].substr(0,4),i=parseInt(o[0].substr(4,2),10)-1,s=o[0].substr(6,2);return e.config.server_utc||r?new Date(Date.UTC(_,i,s,a,n)):new Date(_,i,s,a,n)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"}}function getSerializator(e){return(function(){var t={};for(var a in this._events){var n=this._events[a];n.id.toString().indexOf("#")==-1&&(t[n.id]=n)}return t}).bind(e)}function extend$9(e){e._loaded={},e._load=function(a,n){if(a=a||this._load_url){var o;if(a+=(a.indexOf("?")==-1?"?":"&")+"timeshift="+new Date().getTimezoneOffset(),this.config.prevent_cache&&(a+="&uid="+this.uid()),n=n||this._date,this._load_mode){var r=this.templates.load_format;for(n=this.date[this._load_mode+"_start"](new Date(n.valueOf()));n>this._min_date;)n=this.date.add(n,-1,this._load_mode);o=n;for(var _=!0;o<this._max_date;)o=this.date.add(o,1,this._load_mode),this._loaded[r(n)]&&_?n=this.date.add(n,1,this._load_mode):_=!1;var i=o;do o=i,i=this.date.add(o,-1,this._load_mode);while(i>n&&this._loaded[r(i)]);if(o<=n)return!1;for(e.ajax.get(a+"&from="+r(n)+"&to="+r(o),s);n<o;)this._loaded[r(n)]=!0,n=this.date.add(n,1,this._load_mode)}else e.ajax.get(a,s);return this.callEvent("onXLS",[]),this.callEvent("onLoadStart",[]),!0}function s(d){e.on_load(d),e.callEvent("onLoadEnd",[])}},e._parsers={},extend$c(e),extend$b(e),extend$a(e),e.on_load=function(a){var n;this.callEvent("onBeforeParse",[]);var o=!1,r=!1;for(var _ in this._parsers){var i=this._parsers[_];if(i.canParse(a.xmlDoc.responseText,a.xmlDoc)){try{var s=a.xmlDoc.responseText;_==="xml"&&(s=a),(n=i.parse(s))||(o=!0)}catch{o=!0}r=!0;break}}if(!r)if(this._process&&this[this._process])try{n=this[this._process].parse(a.xmlDoc.responseText)}catch{o=!0}else o=!0;(o||a.xmlDoc.status&&a.xmlDoc.status>=400)&&(this.callEvent("onLoadError",[a.xmlDoc]),n=[]),this._process_loading(n),this.callEvent("onXLE",[]),this.callEvent("onParse",[])},e._process_loading=function(a){this._loading=!0,this._not_render=!0;for(var n=0;n<a.length;n++)this.callEvent("onEventLoading",[a[n]])&&this.addEvent(a[n]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null},e._init_event=function(a){a.text=a.text||a._tagvalue||"",a.start_date=e._init_date(a.start_date),a.end_date=e._init_date(a.end_date)},e._init_date=function(a){return a?typeof a=="string"?e._helpers.parseDate(a):new Date(a):null};const t=getSerializator(e);e.serialize=function(){const a=[],n=t();for(var o in n){const i={};var r=n[o];for(var _ in r){if(_.charAt(0)=="$"||_.charAt(0)=="_")continue;let s;const d=r[_];s=e.utils.isDate(d)?e.defined(e.templates.xml_format)?e.templates.xml_format(d):e.templates.format_date(d):d,i[_]=s}a.push(i)}return a},e.parse=function(a,n){this._process=n,this.on_load({xmlDoc:{responseText:a}})},e.load=function(a,n){typeof n=="string"&&(this._process=n,n=arguments[2]),this._load_url=a,this._after_call=n,this._load(a,this._date)},e.setLoadMode=function(a){a=="all"&&(a=""),this._load_mode=a},e.serverList=function(a,n){return n?(this.serverList[a]=n.slice(0),this.serverList[a]):(this.serverList[a]=this.serverList[a]||[],this.serverList[a])},e._userdata={},e._xmlNodeToJSON=function(a){for(var n={},o=0;o<a.attributes.length;o++)n[a.attributes[o].name]=a.attributes[o].value;for(o=0;o<a.childNodes.length;o++){var r=a.childNodes[o];r.nodeType==1&&(n[r.tagName]=r.firstChild?r.firstChild.nodeValue:"")}return n.text||(n.text=a.firstChild?a.firstChild.nodeValue:""),n},e.attachEvent("onXLS",function(){var a;this.config.show_loading===!0&&((a=this.config.show_loading=document.createElement("div")).className="dhx_loading",a.style.left=Math.round((this._x-128)/2)+"px",a.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(a))}),e.attachEvent("onXLE",function(){var a=this.config.show_loading;a&&typeof a=="object"&&(a.parentNode&&a.parentNode.removeChild(a),this.config.show_loading=!0)})}function extend$8(e){function t(){const a=e.config.csp===!0,n=!!window.Sfdc||!!window.$A||window.Aura||"$shadowResolver$"in document.body;return a||n?e.$root:document.body}e._lightbox_controls={},e.formSection=function(a){for(var n=this.config.lightbox.sections,o=0;o<n.length&&n[o].name!=a;o++);if(o===n.length)return null;var r=n[o];e._lightbox||e.getLightbox();var _=e._lightbox.querySelector(`#${r.id}`),i=_.nextSibling,s={section:r,header:_,node:i,getValue:function(l){return e.form_blocks[r.type].get_value(i,l||{},r)},setValue:function(l,h){return e.form_blocks[r.type].set_value(i,l,h||{},r)}},d=e._lightbox_controls["get_"+r.type+"_control"];return d?d(s):s},e._lightbox_controls.get_template_control=function(a){return a.control=a.node,a},e._lightbox_controls.get_select_control=function(a){return a.control=a.node.getElementsByTagName("select")[0],a},e._lightbox_controls.get_textarea_control=function(a){return a.control=a.node.getElementsByTagName("textarea")[0],a},e._lightbox_controls.get_time_control=function(a){return a.control=a.node.getElementsByTagName("select"),a},e._lightbox_controls.defaults={template:{height:30},textarea:{height:200},select:{height:23},time:{height:20}},e.form_blocks={template:{render:function(a){return"<div class='dhx_cal_ltext dhx_cal_template' ></div>"},set_value:function(a,n,o,r){a.innerHTML=n||""},get_value:function(a,n,o){return a.innerHTML||""},focus:function(a){}},textarea:{render:function(a){return"<div class='dhx_cal_ltext'><textarea></textarea></div>"},set_value:function(a,n,o){e.form_blocks.textarea._get_input(a).value=n||""},get_value:function(a,n){return e.form_blocks.textarea._get_input(a).value},focus:function(a){var n=e.form_blocks.textarea._get_input(a);e._focus(n,!0)},_get_input:function(a){return a.getElementsByTagName("textarea")[0]}},select:{render:function(a){for(var n="<div class='dhx_cal_ltext dhx_cal_select'><select style='width:100%;'>",o=0;o<a.options.length;o++)n+="<option value='"+a.options[o].key+"'>"+a.options[o].label+"</option>";return n+="</select></div>"},set_value:function(a,n,o,r){var _=a.firstChild;!_._dhx_onchange&&r.onchange&&(e.event(_,"change",r.onchange),_._dhx_onchange=!0),n===void 0&&(n=(_.options[0]||{}).value),_.value=n||""},get_value:function(a,n){return a.firstChild.value},focus:function(a){var n=a.firstChild;e._focus(n,!0)}},time:{render:function(a){a.time_format||(a.time_format=["%H:%i","%d","%m","%Y"]),a._time_format_order={};var n=a.time_format,o=e.config,r=e.date.date_part(e._currentDate()),_=1440,i=0;e.config.limit_time_select&&(_=60*o.last_hour+1,i=60*o.first_hour,r.setHours(o.first_hour));for(var s="",d=0;d<n.length;d++){var l=n[d];d>0&&(s+=" ");var h="",f="";switch(l){case"%Y":var m,u,p;h="dhx_lightbox_year_select",a._time_format_order[3]=d,a.year_range&&(isNaN(a.year_range)?a.year_range.push&&(u=a.year_range[0],p=a.year_range[1]):m=a.year_range),m=m||10;var b=b||Math.floor(m/2);u=u||r.getFullYear()-b,p=p||u+m;for(var c=u;c<p;c++)f+="<option value='"+c+"'>"+c+"</option>";break;case"%m":for(h="dhx_lightbox_month_select",a._time_format_order[2]=d,c=0;c<12;c++)f+="<option value='"+c+"'>"+this.locale.date.month_full[c]+"</option>";break;case"%d":for(h="dhx_lightbox_day_select",a._time_format_order[1]=d,c=1;c<32;c++)f+="<option value='"+c+"'>"+c+"</option>";break;case"%H:%i":h="dhx_lightbox_time_select",a._time_format_order[0]=d,c=i;var g=r.getDate();for(a._time_values=[];c<_;)f+="<option value='"+c+"'>"+this.templates.time_picker(r)+"</option>",a._time_values.push(c),r.setTime(r.valueOf()+60*this.config.time_step*1e3),c=24*(r.getDate()!=g?1:0)*60+60*r.getHours()+r.getMinutes()}if(f){var v=e._waiAria.lightboxSelectAttrString(l);s+="<select class='"+h+"' "+(a.readonly?"disabled='disabled'":"")+v+">"+f+"</select> "}}return"<div class='dhx_section_time'>"+s+"<span style='font-weight:normal; font-size:10pt;' class='dhx_section_time_spacer'> &nbsp;&ndash;&nbsp; </span>"+s+"</div>"},set_value:function(a,n,o,r){var _,i,s=e.config,d=a.getElementsByTagName("select"),l=r._time_format_order;if(s.full_day){if(!a._full_day){var h="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+e.locale.labels.full_day+"&nbsp;</label></input>";e.config.wide_form||(h=a.previousSibling.innerHTML+h),a.previousSibling.innerHTML=h,a._full_day=!0}var f=a.previousSibling.getElementsByTagName("input")[0];f.checked=e.date.time_part(o.start_date)===0&&e.date.time_part(o.end_date)===0,d[l[0]].disabled=f.checked,d[l[0]+d.length/2].disabled=f.checked,f.$_eventAttached||(f.$_eventAttached=!0,e.event(f,"click",function(){if(f.checked){var b={};e.form_blocks.time.get_value(a,b,r),_=e.date.date_part(b.start_date),(+(i=e.date.date_part(b.end_date))==+_||+i>=+_&&(o.end_date.getHours()!==0||o.end_date.getMinutes()!==0))&&(i=e.date.add(i,1,"day"))}else _=null,i=null;d[l[0]].disabled=f.checked,d[l[0]+d.length/2].disabled=f.checked,p(d,0,_||o.start_date),p(d,4,i||o.end_date)}))}if(s.auto_end_date&&s.event_duration)for(var m=function(){s.auto_end_date&&s.event_duration&&(_=new Date(d[l[3]].value,d[l[2]].value,d[l[1]].value,0,d[l[0]].value),i=new Date(_.getTime()+60*e.config.event_duration*1e3),p(d,4,i))},u=0;u<4;u++)d[u].$_eventAttached||(d[u].$_eventAttached=!0,e.event(d[u],"change",m));function p(b,c,g){for(var v=r._time_values,y=60*g.getHours()+g.getMinutes(),x=y,k=!1,w=0;w<v.length;w++){var D=v[w];if(D===y){k=!0;break}D<y&&(x=D)}b[c+l[0]].value=k?y:x,k||x||(b[c+l[0]].selectedIndex=-1),b[c+l[1]].value=g.getDate(),b[c+l[2]].value=g.getMonth(),b[c+l[3]].value=g.getFullYear()}p(d,0,o.start_date),p(d,4,o.end_date)},get_value:function(a,n,o){var r=a.getElementsByTagName("select"),_=o._time_format_order;if(n.start_date=new Date(r[_[3]].value,r[_[2]].value,r[_[1]].value,0,r[_[0]].value),n.end_date=new Date(r[_[3]+4].value,r[_[2]+4].value,r[_[1]+4].value,0,r[_[0]+4].value),!r[_[3]].value||!r[_[3]+4].value){var i=e.getEvent(e._lightbox_id);i&&(n.start_date=i.start_date,n.end_date=i.end_date)}return n.end_date<=n.start_date&&(n.end_date=e.date.add(n.start_date,e.config.time_step,"minute")),{start_date:new Date(n.start_date),end_date:new Date(n.end_date)}},focus:function(a){e._focus(a.getElementsByTagName("select")[0])}}},e._setLbPosition=function(a){a&&(a.style.top=Math.max(t().offsetHeight/2-a.offsetHeight/2,0)+"px",a.style.left=Math.max(t().offsetWidth/2-a.offsetWidth/2,0)+"px")},e.showCover=function(a){a&&(a.style.display="block",this._setLbPosition(a)),e.config.responsive_lightbox&&(document.documentElement.classList.add("dhx_cal_overflow_container"),t().classList.add("dhx_cal_overflow_container")),this.show_cover(),this._cover.style.display=""},e.showLightbox=function(a){if(a)if(this.callEvent("onBeforeLightbox",[a])){this.showCover(n);var n=this.getLightbox();this._setLbPosition(n),this._fill_lightbox(a,n),this._waiAria.lightboxVisibleAttr(n),this.callEvent("onLightbox",[a])}else this._new_event&&(this._new_event=null)},e._fill_lightbox=function(a,n){var o=this.getEvent(a),r=n.getElementsByTagName("span"),_=[];if(e.templates.lightbox_header){_.push("");var i=e.templates.lightbox_header(o.start_date,o.end_date,o);_.push(i),r[1].innerHTML="",r[2].innerHTML=i}else{var s=this.templates.event_header(o.start_date,o.end_date,o),d=(this.templates.event_bar_text(o.start_date,o.end_date,o)||"").substr(0,70);_.push(s),_.push(d),r[1].innerHTML=s,r[2].innerHTML=d}this._waiAria.lightboxHeader(n,_.join(" "));for(var l=this.config.lightbox.sections,h=0;h<l.length;h++){var f=l[h],m=e._get_lightbox_section_node(f),u=this.form_blocks[f.type],p=o[f.map_to]!==void 0?o[f.map_to]:f.default_value;u.set_value.call(this,m,p,o,f),l[h].focus&&u.focus.call(this,m)}e._lightbox_id=a},e._get_lightbox_section_node=function(a){return e._lightbox.querySelector(`#${a.id}`).nextSibling},e._lightbox_out=function(a){for(var n=this.config.lightbox.sections,o=0;o<n.length;o++){var r=e._lightbox.querySelector(`#${n[o].id}`);r=r&&r.nextSibling;var _=this.form_blocks[n[o].type].get_value.call(this,r,a,n[o]);n[o].map_to!="auto"&&(a[n[o].map_to]=_)}return a},e._empty_lightbox=function(a){var n=e._lightbox_id,o=this.getEvent(n);this._lame_copy(o,a),this.setEvent(o.id,o),this._edit_stop_event(o,!0),this.render_view_data()},e.hide_lightbox=function(a){e.endLightbox(!1,this.getLightbox())},e.hideCover=function(a){a&&(a.style.display="none"),this.hide_cover(),e.config.responsive_lightbox&&(document.documentElement.classList.remove("dhx_cal_overflow_container"),t().classList.remove("dhx_cal_overflow_container"))},e.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},e.show_cover=function(){this._cover||(this._cover=document.createElement("div"),this._cover.className="dhx_cal_cover",this._cover.style.display="none",e.event(this._cover,"mousemove",e._move_while_dnd),e.event(this._cover,"mouseup",e._finish_dnd),t().appendChild(this._cover))},e.save_lightbox=function(){var a=this._lightbox_out({},this._lame_copy(this.getEvent(this._lightbox_id)));this.checkEvent("onEventSave")&&!this.callEvent("onEventSave",[this._lightbox_id,a,this._new_event])||(this._empty_lightbox(a),this.hide_lightbox())},e.startLightbox=function(a,n){this._lightbox_id=a,this._custom_lightbox=!0,this._temp_lightbox=this._lightbox,this._lightbox=n,this.showCover(n)},e.endLightbox=function(a,n){n=n||e.getLightbox();var o=e.getEvent(this._lightbox_id);o&&this._edit_stop_event(o,a),a&&e.render_view_data(),this.hideCover(n),this._custom_lightbox&&(this._lightbox=this._temp_lightbox,this._custom_lightbox=!1),this._temp_lightbox=this._lightbox_id=null,this._waiAria.lightboxHiddenAttr(n),this.resetLightbox(),this.callEvent("onAfterLightbox",[])},e.resetLightbox=function(){e._lightbox&&!e._custom_lightbox&&e._lightbox.parentNode.removeChild(e._lightbox),e._lightbox=null},e.cancel_lightbox=function(){this._lightbox_id&&this.callEvent("onEventCancel",[this._lightbox_id,!!this._new_event]),this.hide_lightbox()},e.hideLightbox=e.cancel_lightbox,e._init_lightbox_events=function(){if(this.getLightbox().$_eventAttached)return;const a=this.getLightbox();a.$_eventAttached=!0,e.event(a,"click",function(n){n.target.closest(".dhx_cal_ltitle_close_btn")&&e.cancel_lightbox();const o=e.$domHelpers.closest(n.target,".dhx_btn_set");if(!o){const i=e.$domHelpers.closest(n.target,".dhx_custom_button[data-section-index]");if(i){const s=Number(i.getAttribute("data-section-index"));e.form_blocks[e.config.lightbox.sections[s].type].button_click(e.$domHelpers.closest(i,".dhx_cal_lsection"),i,n)}return}const r=o?o.getAttribute("data-action"):null;switch(r){case"dhx_save_btn":case"save":if(e.config.readonly_active)return;e.save_lightbox();break;case"dhx_delete_btn":case"delete":if(e.config.readonly_active)return;var _=e.locale.labels.confirm_deleting;e._dhtmlx_confirm({message:_,title:e.locale.labels.title_confirm_deleting,callback:function(){e.deleteEvent(e._lightbox_id),e._new_event=null,e.hide_lightbox()},config:{ok:e.locale.labels.icon_delete}});break;case"dhx_cancel_btn":case"cancel":e.cancel_lightbox();break;default:e.callEvent("onLightboxButton",[r,o,n])}}),e.event(a,"keydown",function(n){var o=n||window.event,r=n.target||n.srcElement,_=r.querySelector("[dhx_button]");switch(_||(_=r.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")),(n||o).keyCode){case 32:if((n||o).shiftKey)return;_&&_.click&&_.click();break;case e.keys.edit_save:if((n||o).shiftKey)return;if(_&&_.click)_.click();else{if(e.config.readonly_active)return;e.save_lightbox()}break;case e.keys.edit_cancel:e.cancel_lightbox()}})},e.setLightboxSize=function(){},e._init_dnd_events=function(){e.event(t(),"mousemove",e._move_while_dnd),e.event(t(),"mouseup",e._finish_dnd),e._init_dnd_events=function(){}},e._move_while_dnd=function(a){if(e._dnd_start_lb){document.dhx_unselectable||(t().classList.add("dhx_unselectable"),document.dhx_unselectable=!0);var n=e.getLightbox(),o=[a.pageX,a.pageY];n.style.top=e._lb_start[1]+o[1]-e._dnd_start_lb[1]+"px",n.style.left=e._lb_start[0]+o[0]-e._dnd_start_lb[0]+"px"}},e._ready_to_dnd=function(a){var n=e.getLightbox();e._lb_start=[n.offsetLeft,n.offsetTop],e._dnd_start_lb=[a.pageX,a.pageY]},e._finish_dnd=function(){e._lb_start&&(e._lb_start=e._dnd_start_lb=!1,t().classList.remove("dhx_unselectable"),document.dhx_unselectable=!1)},e.getLightbox=function(){if(!this._lightbox){var a=document.createElement("div");a.className="dhx_cal_light",e.config.wide_form&&(a.className+=" dhx_cal_light_wide"),e.form_blocks.recurring&&(a.className+=" dhx_cal_light_rec"),e.config.rtl&&(a.className+=" dhx_cal_light_rtl"),e.config.responsive_lightbox&&(a.className+=" dhx_cal_light_responsive"),a.style.visibility="hidden";var n=this._lightbox_template,o=this.config.buttons_left;n+="<div class='dhx_cal_lcontrols'>";for(var r="",_=0;_<o.length;_++)n+="<div "+(r=this._waiAria.lightboxButtonAttrString(o[_]))+" data-action='"+o[_]+"' class='dhx_btn_set dhx_"+(e.config.rtl?"right":"left")+"_btn_set "+o[_]+"_set'><div class='dhx_btn_inner "+o[_]+"'></div><div>"+e.locale.labels[o[_]]+"</div></div>";o=this.config.buttons_right;var i=e.config.rtl;for(_=0;_<o.length;_++)r=this._waiAria.lightboxButtonAttrString(o[_]),e._is_new_skin()&&(n+="<div class='dhx_cal_lcontrols_push_right'></div>"),n+="<div "+r+" data-action='"+o[_]+"' class='dhx_btn_set dhx_"+(i?"left":"right")+"_btn_set "+o[_]+"_set'><div class='dhx_btn_inner "+o[_]+"'></div><div>"+e.locale.labels[o[_]]+"</div></div>";n+="</div>",n+="</div>",a.innerHTML=n,e.config.drag_lightbox&&(e.event(a.firstChild,"mousedown",e._ready_to_dnd),e.event(a.firstChild,"selectstart",function(u){return u.preventDefault(),!1}),a.firstChild.style.cursor="move",e._init_dnd_events()),this._waiAria.lightboxAttr(a),this.show_cover(),this._cover.insertBefore(a,this._cover.firstChild),this._lightbox=a;var s=this.config.lightbox.sections;for(n="",_=0;_<s.length;_++){var d=this.form_blocks[s[_].type];if(d){s[_].id="area_"+this.uid();var l="";s[_].button&&(l="<div "+(r=e._waiAria.lightboxSectionButtonAttrString(this.locale.labels["button_"+s[_].button]))+" class='dhx_custom_button' data-section-index='"+_+"' index='"+_+"'><div class='dhx_custom_button_"+s[_].button+"'></div><div>"+this.locale.labels["button_"+s[_].button]+"</div></div>"),this.config.wide_form&&(n+="<div class='dhx_wrap_section'>");var h=this.locale.labels["section_"+s[_].name];typeof h!="string"&&(h=s[_].name),n+="<div id='"+s[_].id+"' class='dhx_cal_lsection'>"+l+"<label>"+h+"</label></div>"+d.render.call(this,s[_]),n+="</div>"}}var f=a.getElementsByTagName("div");for(_=0;_<f.length;_++){var m=f[_];if(e._getClassName(m)=="dhx_cal_larea"){m.innerHTML=n;break}}e._bindLightboxLabels(s),this.setLightboxSize(),this._init_lightbox_events(this),a.style.visibility="visible"}return this._lightbox},e._bindLightboxLabels=function(a){for(var n=0;n<a.length;n++){var o=a[n];if(o.id&&e._lightbox.querySelector(`#${o.id}`)){for(var r=e._lightbox.querySelector(`#${o.id}`).querySelector("label"),_=e._get_lightbox_section_node(o);_&&!_.querySelector;)_=_.nextSibling;var i=!0;if(_){var s=_.querySelector("input, select, textarea");s&&(o.inputId=s.id||"input_"+e.uid(),s.id||(s.id=o.inputId),r.setAttribute("for",o.inputId),i=!1)}i&&e.form_blocks[o.type].focus&&e.event(r,"click",function(d){return function(){var l=e.form_blocks[d.type],h=e._get_lightbox_section_node(d);l&&l.focus&&l.focus.call(e,h)}}(o))}}},e.attachEvent("onEventIdChange",function(a,n){this._lightbox_id==a&&(this._lightbox_id=n)}),e._lightbox_template=`<div class='dhx_cal_ltitle'><div class="dhx_cal_ltitle_descr"><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span>
</div>
<div class="dhx_cal_ltitle_controls">
<a class="dhx_cal_ltitle_close_btn scheduler_icon close"></a>
</div></div><div class='dhx_cal_larea'></div>`}function extend$7(e){e._init_touch_events=function(){if((this.config.touch&&(navigator.userAgent.indexOf("Mobile")!=-1||navigator.userAgent.indexOf("iPad")!=-1||navigator.userAgent.indexOf("Android")!=-1||navigator.userAgent.indexOf("Touch")!=-1)&&!window.MSStream||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1)&&(this.xy.scroll_width=0,this._mobile=!0),this.config.touch){var t=!0;try{document.createEvent("TouchEvent")}catch{t=!1}t?this._touch_events(["touchmove","touchstart","touchend"],function(a){return a.touches&&a.touches.length>1?null:a.touches[0]?{target:a.target,pageX:a.touches[0].pageX,pageY:a.touches[0].pageY,clientX:a.touches[0].clientX,clientY:a.touches[0].clientY}:a},function(){return!1}):window.PointerEvent||window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(a){return a.pointerType=="mouse"?null:a},function(a){return!a||a.pointerType=="mouse"}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(a){return a.pointerType==a.MSPOINTER_TYPE_MOUSE?null:a},function(a){return!a||a.pointerType==a.MSPOINTER_TYPE_MOUSE})}},e._touch_events=function(t,a,n){var o,r,_,i,s,d,l=0;function h(m,u,p){m.addEventListener(u,function(b){return!!e._is_lightbox_open()||(n(b)?void 0:p(b))},{passive:!1})}function f(m){n(m)||(e._hide_global_tip(),i&&(e._on_mouse_up(a(m)),e._temp_touch_block=!1),e._drag_id=null,e._drag_mode=null,e._drag_pos=null,e._pointerDragId=null,clearTimeout(_),i=d=!1,s=!0)}h(document.body,t[0],function(m){if(!n(m)){var u=a(m);if(u){if(i)return function(p){if(!n(p)){var b=e.getState().drag_mode,c=!!e.matrix&&e.matrix[e._mode],g=e.render_view_data;b=="create"&&c&&(e.render_view_data=function(){for(var v=e.getState().drag_id,y=e.getEvent(v),x=c.y_property,k=e.getEvents(y.start_date,y.end_date),w=0;w<k.length;w++)k[w][x]!=y[x]&&(k.splice(w,1),w--);y._sorder=k.length-1,y._count=k.length,this.render_data([y],e.getState().mode)}),e._on_mouse_move(p),b=="create"&&c&&(e.render_view_data=g),p.preventDefault&&p.preventDefault(),p.cancelBubble=!0}}(u),m.preventDefault&&m.preventDefault(),m.cancelBubble=!0,e._update_global_tip(),!1;r=a(m),d&&(r?(o.target!=r.target||Math.abs(o.pageX-r.pageX)>5||Math.abs(o.pageY-r.pageY)>5)&&(s=!0,clearTimeout(_)):s=!0)}}}),h(this._els.dhx_cal_data[0],"touchcancel",f),h(this._els.dhx_cal_data[0],"contextmenu",function(m){if(!n(m))return d?(m&&m.preventDefault&&m.preventDefault(),m.cancelBubble=!0,!1):void 0}),h(this._obj,t[1],function(m){var u;if(document&&document.body&&document.body.classList.add("dhx_cal_touch_active"),!n(m))if(e._pointerDragId=m.pointerId,i=s=!1,d=!0,u=r=a(m)){var p=new Date;if(!s&&!i&&p-l<250)return e._click.dhx_cal_data(u),window.setTimeout(function(){e.$destroyed||e._on_dbl_click(u)},50),m.preventDefault&&m.preventDefault(),m.cancelBubble=!0,e._block_next_stop=!0,!1;if(l=p,!s&&!i&&e.config.touch_drag){var b=e._locate_event(document.activeElement),c=e._locate_event(u.target),g=o?e._locate_event(o.target):null;if(b&&c&&b==c&&b!=g)return m.preventDefault&&m.preventDefault(),m.cancelBubble=!0,e._ignore_next_click=!1,e._click.dhx_cal_data(u),o=u,!1;_=setTimeout(function(){if(!e.$destroyed){i=!0;var v=o.target,y=e._getClassName(v);v&&y.indexOf("dhx_body")!=-1&&(v=v.previousSibling),e._on_mouse_down(o,v),e._drag_mode&&e._drag_mode!="create"&&e.for_rendered(e._drag_id,function(x,k){x.style.display="none",e._rendered.splice(k,1)}),e.config.touch_tip&&e._show_global_tip(),e.updateEvent(e._drag_id)}},e.config.touch_drag),o=u}}else s=!0}),h(this._els.dhx_cal_data[0],t[2],function(m){if(document&&document.body&&document.body.classList.remove("dhx_cal_touch_active"),!n(m))return e.config.touch_swipe_dates&&!i&&function(u,p,b,c){if(!u||!p)return!1;for(var g=u.target;g&&g!=e._obj;)g=g.parentNode;if(g!=e._obj||e.matrix&&e.matrix[e.getState().mode]&&e.matrix[e.getState().mode].scrollable)return!1;var v=Math.abs(u.pageY-p.pageY),y=Math.abs(u.pageX-p.pageX);return v<c&&y>b&&(!v||y/v>3)&&(u.pageX>p.pageX?e._click.dhx_cal_next_button():e._click.dhx_cal_prev_button(),!0)}(o,r,200,100)&&(e._block_next_stop=!0),i&&(e._ignore_next_click=!0,setTimeout(function(){e._ignore_next_click=!1},100)),f(m),e._block_next_stop?(e._block_next_stop=!1,m.preventDefault&&m.preventDefault(),m.cancelBubble=!0,!1):void 0}),e.event(document.body,t[2],f)},e._show_global_tip=function(){e._hide_global_tip();var t=e._global_tip=document.createElement("div");t.className="dhx_global_tip",e._update_global_tip(1),document.body.appendChild(t)},e._update_global_tip=function(t){var a=e._global_tip;if(a){var n="";if(e._drag_id&&!t){var o=e.getEvent(e._drag_id);o&&(n="<div>"+(o._timed?e.templates.event_header(o.start_date,o.end_date,o):e.templates.day_date(o.start_date,o.end_date,o))+"</div>")}e._drag_mode=="create"||e._drag_mode=="new-size"?a.innerHTML=(e.locale.labels.drag_to_create||"Drag to create")+n:a.innerHTML=(e.locale.labels.drag_to_move||"Drag to move")+n}},e._hide_global_tip=function(){var t=e._global_tip;t&&t.parentNode&&(t.parentNode.removeChild(t),e._global_tip=0)}}function extend$6(e){e.getRootView=function(){return{view:{render:function(){return{tag:"div",type:1,attrs:{style:"width:100%;height:100%;"},hooks:{didInsert:function(){e.setCurrentView()}},body:[{el:this.el,type:1}]}},init:function(){var t=document.createElement("DIV");t.id="scheduler_"+e.uid(),t.style.width="100%",t.style.height="100%",t.classList.add("dhx_cal_container"),t.cmp="grid",t.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button"></div><div class="dhx_cal_next_button"></div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" data-tab="day"></div><div class="dhx_cal_tab" data-tab="week"></div><div class="dhx_cal_tab" data-tab="month"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',e.init(t),this.el=t}},type:4}}}function extend$5(e){var t,a;function n(){if(e._is_material_skin())return!0;if(a!==void 0)return a;var _=document.createElement("div");_.style.position="absolute",_.style.left="-9999px",_.style.top="-9999px",_.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_data'><div class='dhx_cal_event'><div class='dhx_body'></div></div><div>",document.body.appendChild(_);var i=window.getComputedStyle(_.querySelector(".dhx_body")).getPropertyValue("box-sizing");document.body.removeChild(_),(a=i==="border-box")||setTimeout(function(){a=void 0},1e3)}function o(){if(!e._is_material_skin()&&!e._border_box_events()){var _=a;a=void 0,t=void 0,_!==n()&&e.$container&&e.getState().mode&&e.setCurrentView()}}function r(_){var i=_.getMinutes();return i=i<10?"0"+i:i,"<span class='dhx_scale_h'>"+_.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+i+"</span>"}e._addThemeClass=function(){document.documentElement.setAttribute("data-scheduler-theme",e.skin)},e._skin_settings={fix_tab_position:[1,0],use_select_menu_space:[1,0],wide_form:[1,0],hour_size_px:[44,42],displayed_event_color:["#ff4a4a","ffc5ab"],displayed_event_text_color:["#ffef80","7e2727"]},e._skin_xy={lightbox_additional_height:[90,50],nav_height:[59,22],bar_height:[24,20]},e._is_material_skin=function(){return e.skin?(e.skin+"").indexOf("material")>-1:function(){if(t===void 0){var _=document.createElement("div");_.style.position="absolute",_.style.left="-9999px",_.style.top="-9999px",_.innerHTML="<div class='dhx_cal_container'><div class='dhx_cal_scale_placeholder'></div><div>",document.body.appendChild(_);var i=window.getComputedStyle(_.querySelector(".dhx_cal_scale_placeholder")).getPropertyValue("position");t=i==="absolute",setTimeout(function(){t=null,_&&_.parentNode&&_.parentNode.removeChild(_)},500)}return t}()},e._build_skin_info=function(){const _=getComputedStyle(this.$container),i=_.getPropertyValue("--dhx-scheduler-theme");let s,d=!!i,l={},h=!1;if(d){s=i;for(let f in e.xy)l[f]=_.getPropertyValue(`--dhx-scheduler-xy-${f}`);l.hour_size_px=_.getPropertyValue("--dhx-scheduler-config-hour_size_px"),l.wide_form=_.getPropertyValue("--dhx-scheduler-config-form_wide")}else s=function(){for(var f=document.getElementsByTagName("link"),m=0;m<f.length;m++){var u=f[m].href.match("dhtmlxscheduler_([a-z]+).css");if(u)return u[1]}}(),h=e._is_material_skin();if(e._theme_info={theme:s,cssVarTheme:d,oldMaterialTheme:h,values:l},e._theme_info.cssVarTheme){const f=this._theme_info.values;for(let m in e.xy)isNaN(parseInt(f[m]))||(e.xy[m]=parseInt(f[m]))}},e._is_new_skin=function(){return e._theme_info.cssVarTheme},window.addEventListener("DOMContentLoaded",o),window.addEventListener("load",o),e._border_box_events=function(){return n()},e._configure=function(_,i,s){for(var d in i)_[d]===void 0&&(_[d]=i[d][s])},e.setSkin=function(_){this.skin=_,e._addThemeClass(),e.$container&&(this._skin_init(),this.render())},e._skin_init=function(){if(this._build_skin_info(),this.skin||(this.skin=this._theme_info.theme),e._addThemeClass(),e.skin==="flat"?e.templates.hour_scale=r:e.templates.hour_scale===r&&(e.templates.hour_scale=e.date.date_to_str(e.config.hour_date)),!this._theme_info.cssVarTheme){var _=0;if(!e.skin||e.skin!=="classic"&&e.skin!=="glossy"||(_=1),e._is_material_skin()){var i=e.config.buttons_left.$initial,s=e.config.buttons_right.$initial;if(i&&e.config.buttons_left.slice().join()==i&&s&&e.config.buttons_right.slice().join()==s){var d=e.config.buttons_left.slice();e.config.buttons_left=e.config.buttons_right.slice(),e.config.buttons_right=d}e.xy.event_header_height=18,e.xy.week_agenda_scale_height=35,e.xy.map_icon_width=38,e._lightbox_controls.defaults.textarea.height=64,e._lightbox_controls.defaults.time.height="auto"}if(this._configure(e.config,e._skin_settings,_),this._configure(e.xy,e._skin_xy,_),e.skin==="flat"&&(e.xy.scale_height=35,e.templates.hour_scale=function(h){var f=h.getMinutes();return f=f<10?"0"+f:f,"<span class='dhx_scale_h'>"+h.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+f+"</span>"}),_)return}if(!this._theme_info.cssVarTheme){var l=e.config.minicalendar;l&&(l.padding=14)}e.attachEvent("onTemplatesReady",function(){var h=e.date.date_to_str("%d");e.templates._old_month_day||(e.templates._old_month_day=e.templates.month_day);var f=e.templates._old_month_day;e.templates.month_day=function(m){if(this._mode=="month"){var u=h(m);return m.getDate()==1&&(u=e.locale.date.month_full[m.getMonth()]+" "+u),+m==+e.date.date_part(this._currentDate())&&(u=e.locale.labels.dhx_cal_today_button+" "+u),u}return f.call(this,m)},e.config.fix_tab_position&&(e._els.dhx_cal_navline[0].querySelectorAll("[data-tab]").forEach(m=>{switch(m.getAttribute("data-tab")||m.getAttribute("name")){case"day":case"day_tab":m.classList.add("dhx_cal_tab_first"),m.classList.add("dhx_cal_tab_segmented");break;case"week":case"week_tab":m.classList.add("dhx_cal_tab_segmented");break;case"month":case"month_tab":m.classList.add("dhx_cal_tab_last"),m.classList.add("dhx_cal_tab_segmented");break;default:m.classList.add("dhx_cal_tab_standalone")}}),function(m){if(e.config.header)return;const u=Array.from(m.querySelectorAll(".dhx_cal_tab")),p=["day","week","month"].map(c=>u.find(g=>g.getAttribute("data-tab")===c)).filter(c=>c!==void 0);let b=u.length>0?u[0]:null;p.reverse().forEach(c=>{m.insertBefore(c,b),b=c})}(e._els.dhx_cal_navline[0]))},{once:!0})}}function extend$4(e){var t,a,n;window.jQuery&&(t=window.jQuery,a=0,n=[],t.fn.dhx_scheduler=function(o){if(typeof o!="string"){var r=[];return this.each(function(){if(this&&this.getAttribute)if(this.getAttribute("dhxscheduler"))r.push(window[this.getAttribute("dhxscheduler")]);else{var _="scheduler";a&&(_="scheduler"+(a+1),window[_]=Scheduler.getSchedulerInstance());var i=window[_];for(var s in this.setAttribute("dhxscheduler",_),o)s!="data"&&(i.config[s]=o[s]);this.getElementsByTagName("div").length||(this.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button"></div><div class="dhx_cal_next_button"></div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" data-tab="day" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" data-tab="week" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" data-tab="month" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',this.className+=" dhx_cal_container"),i.init(this,i.config.date,i.config.mode),o.data&&i.parse(o.data),r.push(i),a++}}),r.length===1?r[0]:r}if(n[o])return n[o].apply(this,[]);t.error("Method "+o+" does not exist on jQuery.dhx_scheduler")})}function extend$3(e){(function(){var t=e.setCurrentView,a=e.updateView,n=null,o=null,r=function(s,d){var l=this;global$1.clearTimeout(o),global$1.clearTimeout(n);var h=l._date,f=l._mode;i(this,s,d),o=setTimeout(function(){e.$destroyed||(l.callEvent("onBeforeViewChange",[f,h,d||l._mode,s||l._date])?(a.call(l,s,d),l.callEvent("onViewChange",[l._mode,l._date]),global$1.clearTimeout(n),o=0):i(l,h,f))},e.config.delay_render)},_=function(s,d){var l=this,h=arguments;i(this,s,d),global$1.clearTimeout(n),n=setTimeout(function(){e.$destroyed||o||a.apply(l,h)},e.config.delay_render)};function i(s,d,l){d&&(s._date=d),l&&(s._mode=l)}e.attachEvent("onSchedulerReady",function(){e.config.delay_render?(e.setCurrentView=r,e.updateView=_):(e.setCurrentView=t,e.updateView=a)})})()}function DataProcessorEvents(e,t){this.$scheduler=e,this.$dp=t,this._dataProcessorHandlers=[],this.attach=function(){var a=this.$dp,n=this.$scheduler;this._dataProcessorHandlers.push(n.attachEvent("onEventAdded",function(o){!this._loading&&this._validId(o)&&a.setUpdated(o,!0,"inserted")})),this._dataProcessorHandlers.push(n.attachEvent("onConfirmedBeforeEventDelete",function(o){if(this._validId(o)){var r=a.getState(o);return r=="inserted"||this._new_event?(a.setUpdated(o,!1),!0):r!="deleted"&&(r=="true_deleted"||(a.setUpdated(o,!0,"deleted"),!1))}})),this._dataProcessorHandlers.push(n.attachEvent("onEventChanged",function(o){!this._loading&&this._validId(o)&&a.setUpdated(o,!0,"updated")})),this._dataProcessorHandlers.push(n.attachEvent("onClearAll",function(){a._in_progress={},a._invalid={},a.updatedRows=[],a._waitMode=0})),a.attachEvent("insertCallback",n._update_callback),a.attachEvent("updateCallback",n._update_callback),a.attachEvent("deleteCallback",function(o,r){n.getEvent(r)?(n.setUserData(r,this.action_param,"true_deleted"),n.deleteEvent(r)):n._add_rec_marker&&n._update_callback(o,r)})},this.detach=function(){for(var a in this._dataProcessorHandlers){var n=this._dataProcessorHandlers[a];this.$scheduler.detachEvent(n)}this._dataProcessorHandlers=[]}}function extendScheduler(e,t){e._validId=function(a){return!this._is_virtual_event||!this._is_virtual_event(a)},e.setUserData=function(a,n,o){if(a){var r=this.getEvent(a);r&&(r[n]=o)}else this._userdata[n]=o},e.getUserData=function(a,n){if(a){var o=this.getEvent(a);return o?o[n]:null}return this._userdata[n]},e._set_event_text_style=function(a,n){if(e.getEvent(a)){this.for_rendered(a,function(r){r.style.cssText+=";"+n});var o=this.getEvent(a);o._text_style=n,this.event_updated(o)}},e._update_callback=function(a,n){var o=e._xmlNodeToJSON(a.firstChild);o.rec_type=="none"&&(o.rec_pattern="none"),o.text=o.text||o._tagvalue,o.start_date=e._helpers.parseDate(o.start_date),o.end_date=e._helpers.parseDate(o.end_date),e.addEvent(o),e._add_rec_marker&&e.setCurrentView()},e._dp_change_event_id=function(a,n){e.getEvent(a)&&e.changeEventId(a,n)},e._dp_hook_delete=function(a,n){if(e.getEvent(a))return n&&a!=n&&(this.getUserData(a,t.action_param)=="true_deleted"&&this.setUserData(a,t.action_param,"updated"),this.changeEventId(a,n)),this.deleteEvent(n,!0)},e.setDp=function(){this._dp=t},e.setDp()}function DataProcessor(e){return this.serverProcessor=e,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),makeEventable(this),this}function extend$2(e){e.createDataProcessor=function(t){var a,n;t instanceof Function?a=t:t.hasOwnProperty("router")?a=t.router:t.hasOwnProperty("event")&&(a=t),n=a?"CUSTOM":t.mode||"REST-JSON";var o=new DataProcessor(t.url);return o.init(e),o.setTransactionMode({mode:n,router:a},t.batchUpdate),o},e.DataProcessor=DataProcessor}function message(e){var t="data-dhxbox",a=null;function n(c,g){var v=c.callback;u.hide(c.box),a=c.box=null,v&&v(g)}function o(c){if(a){var g=c.which||c.keyCode,v=!1;if(p.keyboard){if(g==13||g==32){var y=c.target||c.srcElement;dom_helpers.getClassName(y).indexOf("scheduler_popup_button")>-1&&y.click?y.click():(n(a,!0),v=!0)}g==27&&(n(a,!1),v=!0)}return v?(c.preventDefault&&c.preventDefault(),!(c.cancelBubble=!0)):void 0}}function r(c){r.cover||(r.cover=document.createElement("div"),e.event(r.cover,"keydown",o),r.cover.className="dhx_modal_cover",document.body.appendChild(r.cover)),r.cover.style.display=c?"inline-block":"none"}function _(c,g,v){var y=e._waiAria.messageButtonAttrString(c),x=(g||"").toLowerCase().replace(/ /g,"_");return`<div ${y} class='scheduler_popup_button dhtmlx_popup_button ${`scheduler_${x}_button dhtmlx_${x}_button`}' data-result='${v}' result='${v}' ><div>${c}</div></div>`}function i(){for(var c=[].slice.apply(arguments,[0]),g=0;g<c.length;g++)if(c[g])return c[g]}function s(c,g,v){var y=c.tagName?c:function(w,D,E){var S=document.createElement("div"),N=utils.uid();e._waiAria.messageModalAttr(S,N),S.className=" scheduler_modal_box dhtmlx_modal_box scheduler-"+w.type+" dhtmlx-"+w.type,S.setAttribute(t,1);var A="";if(w.width&&(S.style.width=w.width),w.height&&(S.style.height=w.height),w.title&&(A+='<div class="scheduler_popup_title dhtmlx_popup_title">'+w.title+"</div>"),A+='<div class="scheduler_popup_text dhtmlx_popup_text" id="'+N+'"><span>'+(w.content?"":w.text)+'</span></div><div  class="scheduler_popup_controls dhtmlx_popup_controls">',D&&(A+=_(i(w.ok,e.locale.labels.message_ok,"OK"),"ok",!0)),E&&(A+=_(i(w.cancel,e.locale.labels.message_cancel,"Cancel"),"cancel",!1)),w.buttons)for(var M=0;M<w.buttons.length;M++){var T=w.buttons[M];A+=typeof T=="object"?_(T.label,T.css||"scheduler_"+T.label.toLowerCase()+"_button dhtmlx_"+T.label.toLowerCase()+"_button",T.value||M):_(T,T,M)}if(A+="</div>",S.innerHTML=A,w.content){var C=w.content;typeof C=="string"&&(C=document.getElementById(C)),C.style.display=="none"&&(C.style.display=""),S.childNodes[w.title?1:0].appendChild(C)}return e.event(S,"click",function(O){var L=O.target||O.srcElement;if(L.className||(L=L.parentNode),dom_helpers.closest(L,".scheduler_popup_button")){var $=L.getAttribute("data-result");n(w,$=$=="true"||$!="false"&&$)}}),w.box=S,(D||E)&&(a=w),S}(c,g,v);c.hidden||r(!0),document.body.appendChild(y);var x=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-y.offsetWidth)/2)),k=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-y.offsetHeight)/2));return c.position=="top"?y.style.top="-3px":y.style.top=k+"px",y.style.left=x+"px",e.event(y,"keydown",o),u.focus(y),c.hidden&&u.hide(y),e.callEvent("onMessagePopup",[y]),y}function d(c){return s(c,!0,!1)}function l(c){return s(c,!0,!0)}function h(c){return s(c)}function f(c,g,v){return typeof c!="object"&&(typeof g=="function"&&(v=g,g=""),c={text:c,type:g,callback:v}),c}function m(c,g,v,y){return typeof c!="object"&&(c={text:c,type:g,expire:v,id:y}),c.id=c.id||utils.uid(),c.expire=c.expire||p.expire,c}e.event(document,"keydown",o,!0);var u=function(){var c=f.apply(this,arguments);return c.type=c.type||"alert",h(c)};u.hide=function(c){for(;c&&c.getAttribute&&!c.getAttribute(t);)c=c.parentNode;c&&(c.parentNode.removeChild(c),r(!1),e.callEvent("onAfterMessagePopup",[c]))},u.focus=function(c){setTimeout(function(){var g=dom_helpers.getFocusableNodes(c);g.length&&g[0].focus&&g[0].focus()},1)};var p=function(c,g,v,y){switch((c=m.apply(this,arguments)).type=c.type||"info",c.type.split("-")[0]){case"alert":return d(c);case"confirm":return l(c);case"modalbox":return h(c);default:return function(x){p.area||(p.area=document.createElement("div"),p.area.className="scheduler_message_area dhtmlx_message_area",p.area.style[p.position]="5px",document.body.appendChild(p.area)),p.hide(x.id);var k=document.createElement("div");return k.innerHTML="<div>"+x.text+"</div>",k.className="scheduler-info dhtmlx-info scheduler-"+x.type+" dhtmlx-"+x.type,e.event(k,"click",function(){p.hide(x.id),x=null}),e._waiAria.messageInfoAttr(k),p.position=="bottom"&&p.area.firstChild?p.area.insertBefore(k,p.area.firstChild):p.area.appendChild(k),x.expire>0&&(p.timers[x.id]=window.setTimeout(function(){p&&p.hide(x.id)},x.expire)),p.pull[x.id]=k,k=null,x.id}(c)}};p.seed=new Date().valueOf(),p.uid=utils.uid,p.expire=4e3,p.keyboard=!0,p.position="top",p.pull={},p.timers={},p.hideAll=function(){for(var c in p.pull)p.hide(c)},p.hide=function(c){var g=p.pull[c];g&&g.parentNode&&(window.setTimeout(function(){g.parentNode.removeChild(g),g=null},2e3),g.className+=" hidden",p.timers[c]&&window.clearTimeout(p.timers[c]),delete p.pull[c])};var b=[];return e.attachEvent("onMessagePopup",function(c){b.push(c)}),e.attachEvent("onAfterMessagePopup",function(c){for(var g=0;g<b.length;g++)b[g]===c&&(b.splice(g,1),g--)}),e.attachEvent("onDestroy",function(){r.cover&&r.cover.parentNode&&r.cover.parentNode.removeChild(r.cover);for(var c=0;c<b.length;c++)b[c].parentNode&&b[c].parentNode.removeChild(b[c]);b=null,p.area&&p.area.parentNode&&p.area.parentNode.removeChild(p.area),p=null}),{alert:function(){var c=f.apply(this,arguments);return c.type=c.type||"confirm",d(c)},confirm:function(){var c=f.apply(this,arguments);return c.type=c.type||"alert",l(c)},message:p,modalbox:u}}DataProcessor.prototype={setTransactionMode:function(e,t){typeof e=="object"?(this._tMode=e.mode||this._tMode,e.headers!==void 0&&(this._headers=e.headers),e.payload!==void 0&&(this._payload=e.payload),this._tSend=!!t):(this._tMode=e,this._tSend=t),this._tMode=="REST"&&(this._tSend=!1,this._endnm=!0),this._tMode==="JSON"||this._tMode==="REST-JSON"?(this._tSend=!1,this._endnm=!0,this._serializeAsJson=!0,this._headers=this._headers||{},this._headers["Content-Type"]="application/json"):this._headers&&!this._headers["Content-Type"]&&(this._headers["Content-Type"]="application/x-www-form-urlencoded"),this._tMode==="CUSTOM"&&(this._tSend=!1,this._endnm=!0,this._router=e.router)},escape:function(e){return this._utf?encodeURIComponent(e):escape(e)},enableUTFencoding:function(e){this._utf=!!e},setDataColumns:function(e){this._columns=typeof e=="string"?e.split(","):e},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(e){this._endnm=!!e},enablePartialDataSend:function(e){this._changed=!!e},setUpdateMode:function(e,t){this.autoUpdate=e=="cell",this.updateMode=e,this.dnd=t},ignore:function(e,t){this._silent_mode=!0,e.call(t||window),this._silent_mode=!1},setUpdated:function(e,t,a){if(!this._silent_mode){var n=this.findRow(e);a=a||"updated";var o=this.$scheduler.getUserData(e,this.action_param);o&&a=="updated"&&(a=o),t?(this.set_invalid(e,!1),this.updatedRows[n]=e,this.$scheduler.setUserData(e,this.action_param,a),this._in_progress[e]&&(this._in_progress[e]="wait")):this.is_invalid(e)||(this.updatedRows.splice(n,1),this.$scheduler.setUserData(e,this.action_param,"")),this.markRow(e,t,a),t&&this.autoUpdate&&this.sendData(e)}},markRow:function(e,t,a){var n="",o=this.is_invalid(e);if(o&&(n=this.styles[o],t=!0),this.callEvent("onRowMark",[e,t,a,o])&&(n=this.styles[t?a:"clear"]+n,this.$scheduler[this._methods[0]](e,n),o&&o.details)){n+=this.styles[o+"_cell"];for(var r=0;r<o.details.length;r++)o.details[r]&&this.$scheduler[this._methods[1]](e,r,n)}},getActionByState:function(e){return e==="inserted"?"create":e==="updated"?"update":e==="deleted"?"delete":"update"},getState:function(e){return this.$scheduler.getUserData(e,this.action_param)},is_invalid:function(e){return this._invalid[e]},set_invalid:function(e,t,a){a&&(t={value:t,details:a,toString:function(){return this.value.toString()}}),this._invalid[e]=t},checkBeforeUpdate:function(e){return!0},sendData:function(e){return this.$scheduler.editStop&&this.$scheduler.editStop(),e===void 0||this._tSend?this.sendAllData():!this._in_progress[e]&&(this.messages=[],!(!this.checkBeforeUpdate(e)&&this.callEvent("onValidationError",[e,this.messages]))&&void this._beforeSendData(this._getRowData(e),e))},_beforeSendData:function(e,t){if(!this.callEvent("onBeforeUpdate",[t,this.getState(t),e]))return!1;this._sendData(e,t)},serialize:function(e,t){if(this._serializeAsJson)return this._serializeAsJSON(e);if(typeof e=="string")return e;if(t!==void 0)return this.serialize_one(e,"");var a=[],n=[];for(var o in e)e.hasOwnProperty(o)&&(a.push(this.serialize_one(e[o],o+this.post_delim)),n.push(o));return a.push("ids="+this.escape(n.join(","))),this.$scheduler.security_key&&a.push("dhx_security="+this.$scheduler.security_key),a.join("&")},serialize_one:function(e,t){if(typeof e=="string")return e;var a=[],n="";for(var o in e)if(e.hasOwnProperty(o)){if((o=="id"||o==this.action_param)&&this._tMode=="REST")continue;n=typeof e[o]=="string"||typeof e[o]=="number"?e[o]:JSON.stringify(e[o]),a.push(this.escape((t||"")+o)+"="+this.escape(n))}return a.join("&")},_applyPayload:function(e){var t=this.$scheduler.ajax;if(this._payload)for(var a in this._payload)e=e+t.urlSeparator(e)+this.escape(a)+"="+this.escape(this._payload[a]);return e},_sendData:function(e,t){if(e){if(!this.callEvent("onBeforeDataSending",t?[t,this.getState(t),e]:[null,null,e]))return!1;t&&(this._in_progress[t]=new Date().valueOf());var a=this,n=this.$scheduler.ajax;if(this._tMode!=="CUSTOM"){var o,r={callback:function(u){var p=[];if(t)p.push(t);else if(e)for(var b in e)p.push(b);return a.afterUpdate(a,u,p)},headers:a._headers},_=this.serverProcessor+(this._user?n.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.$scheduler.getUserData(0,"version")].join("&"):""),i=this._applyPayload(_);switch(this._tMode){case"GET":o=this._cleanupArgumentsBeforeSend(e),r.url=i+n.urlSeparator(i)+this.serialize(o,t),r.method="GET";break;case"POST":o=this._cleanupArgumentsBeforeSend(e),r.url=i,r.method="POST",r.data=this.serialize(o,t);break;case"JSON":o={};var s=this._cleanupItemBeforeSend(e);for(var d in s)d!==this.action_param&&d!=="id"&&d!=="gr_id"&&(o[d]=s[d]);r.url=i,r.method="POST",r.data=JSON.stringify({id:t,action:e[this.action_param],data:o});break;case"REST":case"REST-JSON":switch(i=_.replace(/(&|\?)editing=true/,""),o="",this.getState(t)){case"inserted":r.method="POST",r.data=this.serialize(e,t);break;case"deleted":r.method="DELETE",i=i+(i.slice(-1)==="/"?"":"/")+t;break;default:r.method="PUT",r.data=this.serialize(e,t),i=i+(i.slice(-1)==="/"?"":"/")+t}r.url=this._applyPayload(i)}return this._waitMode++,n.query(r)}{var l=this.getState(t),h=this.getActionByState(l),f=function(p){var b=l;if(p&&p.responseText&&p.setRequestHeader){p.status!==200&&(b="error");try{p=JSON.parse(p.responseText)}catch{}}b=b||"updated";var c=t,g=t;p&&(b=p.action||b,c=p.sid||c,g=p.id||p.tid||g),a.afterUpdateCallback(c,g,b,p)};const u="event";var m;if(this._router instanceof Function)m=this._router(u,h,e,t);else switch(l){case"inserted":m=this._router[u].create(e);break;case"deleted":m=this._router[u].delete(t);break;default:m=this._router[u].update(e,t)}if(m){if(!m.then&&m.id===void 0&&m.tid===void 0&&m.action===void 0)throw new Error("Incorrect router return value. A Promise or a response object is expected");m.then?m.then(f).catch(function(p){p&&p.action?f(p):f({action:"error",value:p})}):f(m)}else f(null)}}},sendAllData:function(){if(this.updatedRows.length&&this.updateMode!=="off"){this.messages=[];var e=!0;if(this._forEachUpdatedRow(function(t){e=e&&this.checkBeforeUpdate(t)}),!e&&!this.callEvent("onValidationError",["",this.messages]))return!1;this._tSend?this._sendData(this._getAllData()):this._forEachUpdatedRow(function(t){if(!this._in_progress[t]){if(this.is_invalid(t))return;this._beforeSendData(this._getRowData(t),t)}})}},_getAllData:function(e){var t={},a=!1;return this._forEachUpdatedRow(function(n){if(!this._in_progress[n]&&!this.is_invalid(n)){var o=this._getRowData(n);this.callEvent("onBeforeUpdate",[n,this.getState(n),o])&&(t[n]=o,a=!0,this._in_progress[n]=new Date().valueOf())}}),a?t:null},findRow:function(e){var t=0;for(t=0;t<this.updatedRows.length&&e!=this.updatedRows[t];t++);return t},defineAction:function(e,t){this._uActions||(this._uActions={}),this._uActions[e]=t},afterUpdateCallback:function(e,t,a,n){if(this.$scheduler){var o=e,r=a!=="error"&&a!=="invalid";if(r||this.set_invalid(e,a),this._uActions&&this._uActions[a]&&!this._uActions[a](n))return delete this._in_progress[o];this._in_progress[o]!=="wait"&&this.setUpdated(e,!1);var _=e;switch(a){case"inserted":case"insert":t!=e&&(this.setUpdated(e,!1),this.$scheduler[this._methods[2]](e,t),e=t);break;case"delete":case"deleted":return this.$scheduler.setUserData(e,this.action_param,"true_deleted"),this.$scheduler[this._methods[3]](e,t),delete this._in_progress[o],this.callEvent("onAfterUpdate",[e,a,t,n])}this._in_progress[o]!=="wait"?(r&&this.$scheduler.setUserData(e,this.action_param,""),delete this._in_progress[o]):(delete this._in_progress[o],this.setUpdated(t,!0,this.$scheduler.getUserData(e,this.action_param))),this.callEvent("onAfterUpdate",[_,a,t,n])}},_errorResponse:function(e,t){return this.$scheduler&&this.$scheduler.callEvent&&this.$scheduler.callEvent("onSaveError",[t,e.xmlDoc]),this.cleanUpdate(t)},_setDefaultTransactionMode:function(){this.serverProcessor&&(this.setTransactionMode("POST",!0),this.serverProcessor+=(this.serverProcessor.indexOf("?")!==-1?"&":"?")+"editing=true",this._serverProcessor=this.serverProcessor)},afterUpdate:function(e,t,a){var n=this.$scheduler.ajax;if(t.xmlDoc.status===200){var o;try{o=JSON.parse(t.xmlDoc.responseText)}catch{t.xmlDoc.responseText.length||(o={})}if(o){var r=o.action||this.getState(a)||"updated",_=o.sid||a[0],i=o.tid||a[0];return e.afterUpdateCallback(_,i,r,o),void e.finalizeUpdate()}var s=n.xmltop("data",t.xmlDoc);if(!s)return this._errorResponse(t,a);var d=n.xpath("//data/action",s);if(!d.length)return this._errorResponse(t,a);for(var l=0;l<d.length;l++){var h=d[l];r=h.getAttribute("type"),_=h.getAttribute("sid"),i=h.getAttribute("tid"),e.afterUpdateCallback(_,i,r,h)}e.finalizeUpdate()}else this._errorResponse(t,a)},cleanUpdate:function(e){if(e)for(var t=0;t<e.length;t++)delete this._in_progress[e[t]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(e){if(!this._initialized){this.$scheduler=e,this.$scheduler._dp_init&&this.$scheduler._dp_init(this),this._setDefaultTransactionMode(),this._methods=this._methods||["_set_event_text_style","","_dp_change_event_id","_dp_hook_delete"],extendScheduler(this.$scheduler,this);var t=new DataProcessorEvents(this.$scheduler,this);t.attach(),this.attachEvent("onDestroy",function(){delete this._getRowData,delete this.$scheduler._dp,delete this.$scheduler._dataprocessor,delete this.$scheduler._set_event_text_style,delete this.$scheduler._dp_change_event_id,delete this.$scheduler._dp_hook_delete,delete this.$scheduler,t.detach()}),this.$scheduler.callEvent("onDataProcessorReady",[this]),this._initialized=!0,e._dataprocessor=this}},setOnAfterUpdate:function(e){this.attachEvent("onAfterUpdate",e)},setOnBeforeUpdateHandler:function(e){this.attachEvent("onBeforeDataSending",e)},setAutoUpdate:function(e,t){e=e||2e3,this._user=t||new Date().valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(n,o,r,_){this.afterAutoUpdate(n,o,r,_)}),this.attachEvent("onFullSync",function(){this.fullSync()});var a=this;global$1.setInterval(function(){a.loadUpdate()},e)},afterAutoUpdate:function(e,t,a,n){return t!="collision"||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(e,t){var a=this.$scheduler.ajax;if(this._update_busy)return!1;this._update_busy=!0,a.get(e,t)},_getXmlNodeValue:function(e){return e.firstChild?e.firstChild.nodeValue:""},loadUpdate:function(){var e=this,t=this.$scheduler.ajax,a=this.$scheduler.getUserData(0,"version"),n=this.serverProcessor+t.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+a].join("&");n=n.replace("editing=true&",""),this.getUpdates(n,function(o){var r=t.xpath("//userdata",o);e.$scheduler.setUserData(0,"version",e._getXmlNodeValue(r[0]));var _=t.xpath("//update",o);if(_.length){e._silent_mode=!0;for(var i=0;i<_.length;i++){var s=_[i].getAttribute("status"),d=_[i].getAttribute("id"),l=_[i].getAttribute("parent");switch(s){case"inserted":this.callEvent("insertCallback",[_[i],d,l]);break;case"updated":this.callEvent("updateCallback",[_[i],d,l]);break;case"deleted":this.callEvent("deleteCallback",[_[i],d,l])}}e._silent_mode=!1}e._update_busy=!1,e=null})},destructor:function(){this.callEvent("onDestroy",[]),this.detachAllEvents(),this.updatedRows=[],this._in_progress={},this._invalid={},this._headers=null,this._payload=null,delete this._initialized},url:function(e){this.serverProcessor=this._serverProcessor=e},_serializeAsJSON:function(e){if(typeof e=="string")return e;var t=this.$scheduler.utils.copy(e);return this._tMode==="REST-JSON"&&(delete t.id,delete t[this.action_param]),JSON.stringify(t)},_cleanupArgumentsBeforeSend:function(e){var t;if(e[this.action_param]===void 0)for(var a in t={},e)t[a]=this._cleanupArgumentsBeforeSend(e[a]);else t=this._cleanupItemBeforeSend(e);return t},_cleanupItemBeforeSend:function(e){var t=null;return e&&(e[this.action_param]==="deleted"?((t={}).id=e.id,t[this.action_param]=e[this.action_param]):t=e),t},_forEachUpdatedRow:function(e){for(var t=this.updatedRows.slice(),a=0;a<t.length;a++){var n=t[a];this.$scheduler.getUserData(n,this.action_param)&&e.call(this,n)}},_prepareDataItem:function(e){var t={},a=this.$scheduler,n=a.utils.copy(e);for(var o in n)o.indexOf("_")!==0&&n[o]&&(n[o].getUTCFullYear?t[o]=a._helpers.formatDate(n[o]):typeof n[o]=="object"?t[o]=this._prepareDataItem(n[o]):n[o]===null?t[o]="":t[o]=n[o]);return t[this.action_param]=a.getUserData(e.id,this.action_param),t},_getRowData:function(e){var t=this.$scheduler.getEvent(e);return t||(t={id:e}),this._prepareDataItem(t)}};const ar={date:{month_full:[" ","","","","","","","",""," "," "," "],month_short:["","","","","","","","","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{dhx_cal_today_button:"",day_tab:"",week_tab:"",month_tab:"",new_event:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"  ,   ",confirm_deleting:"       ",section_description:"",section_time:" ",full_day:" ",confirm_recurring:"       ",section_recurring:" ",button_recurring:"",button_recurring_open:"",button_edit_series:" ",button_edit_occurrence:" ",grid_tab:"",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},be={date:{month_full:["","","","","Ma","","","","","","",""],month_short:["","","","","Ma","","","","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{dhx_cal_today_button:"",day_tab:"",week_tab:"",month_tab:"",new_event:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"   , ?",section_description:"",section_time:" ",full_day:" ",confirm_recurring:"      ?",section_recurring:"",button_recurring:"",button_recurring_open:"",button_edit_series:" ",button_edit_occurrence:" ",agenda_tab:"",date:"",description:"",year_tab:"",week_agenda_tab:"",grid_tab:"ic",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"",repeat_radio_week:"",repeat_radio_month:"",repeat_radio_year:"",repeat_radio_day_type:"",repeat_text_day_count:"",repeat_radio_day_type2:"  ",repeat_week:"  ",repeat_text_week_count:"",repeat_radio_month_type:"",repeat_radio_month_start:"",repeat_text_month_day:"  ",repeat_text_month_count:"",repeat_text_month_count2_before:" ",repeat_text_month_count2_after:"",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"",select_year_month:"",repeat_radio_end:"  ",repeat_text_occurences_count:"",repeat_radio_end2:"",repeat_radio_end3:" ",month_for_recurring:["","","","","","","e","","","","",""],day_for_recurring:["","","","","","",""]}},ca={date:{month_full:["Gener","Febrer","Mar","Abril","Maig","Juny","Juliol","Agost","Setembre","Octubre","Novembre","Desembre"],month_short:["Gen","Feb","Mar","Abr","Mai","Jun","Jul","Ago","Set","Oct","Nov","Des"],day_full:["Diumenge","Dilluns","Dimarts","Dimecres","Dijous","Divendres","Dissabte"],day_short:["Dg","Dl","Dm","Dc","Dj","Dv","Ds"]},labels:{dhx_cal_today_button:"Hui",day_tab:"Dia",week_tab:"Setmana",month_tab:"Mes",new_event:"Nou esdeveniment",icon_save:"Guardar",icon_cancel:"Cancellar",icon_details:"Detalls",icon_edit:"Editar",icon_delete:"Esborrar",confirm_closing:"",confirm_deleting:"L'esdeveniment s'esborrar definitivament, continuar ?",section_description:"Descripci",section_time:"Periode de temps",full_day:"Tot el dia",confirm_recurring:"Desitja modificar el conjunt d'esdeveniments repetits?",section_recurring:"Repeteixca l'esdeveniment",button_recurring:"Impedit",button_recurring_open:"Perms",button_edit_series:"Edit srie",button_edit_occurrence:"Edita Instncia",agenda_tab:"Agenda",date:"Data",description:"Descripci",year_tab:"Any",week_agenda_tab:"Agenda",grid_tab:"Taula",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},cn={date:{month_full:["","","","","","","","","","","",""],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{dhx_cal_today_button:"",day_tab:"",week_tab:"",month_tab:"",new_event:"",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"!",confirm_deleting:"?",section_description:"",section_time:"",full_day:"",confirm_recurring:"?",section_recurring:"",button_recurring:"",button_recurring_open:"",button_edit_series:"",button_edit_occurrence:"",agenda_tab:"",date:"",description:"",year_tab:"",week_agenda_tab:"",grid_tab:"",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"",repeat_radio_week:"",repeat_radio_month:"",repeat_radio_year:"",repeat_radio_day_type:"",repeat_text_day_count:"",repeat_radio_day_type2:"",repeat_week:"  ",repeat_text_week_count:":",repeat_radio_month_type:"",repeat_radio_month_start:"",repeat_text_month_day:" ",repeat_text_month_count:"",repeat_text_month_count2_before:"",repeat_text_month_count2_after:"",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"",select_year_month:"",repeat_radio_end:"",repeat_text_occurences_count:"",repeat_radio_end2:"",repeat_radio_end3:"",month_for_recurring:["","","","","","","","","","","",""],day_for_recurring:["","","","","","",""]}},cs={date:{month_full:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],month_short:["Led","n","Be","Dub","Kv","er","ec","Srp","Z","j","List","Pro"],day_full:["Nedle","Pondl","ter","Steda","tvrtek","Ptek","Sobota"],day_short:["Ne","Po","t","St","t","P","So"]},labels:{dhx_cal_today_button:"Dnes",day_tab:"Den",week_tab:"Tden",month_tab:"Msc",new_event:"Nov udlost",icon_save:"Uloit",icon_cancel:"Zpt",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Smazat",confirm_closing:"",confirm_deleting:"Udlost bude trvale smazna, opravdu?",section_description:"Poznmky",section_time:"Doba platnosti",confirm_recurring:"Pejete si upravit celou adu opakovanch udlost?",section_recurring:"Opakovn udlosti",button_recurring:"Vypnuto",button_recurring_open:"Zapnuto",button_edit_series:"Edit series",button_edit_occurrence:"Upravit instance",agenda_tab:"Program",date:"Datum",description:"Poznmka",year_tab:"Rok",full_day:"Full day",week_agenda_tab:"Program",grid_tab:"Mka",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Denn",repeat_radio_week:"Tdn",repeat_radio_month:"Msn",repeat_radio_year:"Ron",repeat_radio_day_type:"kad",repeat_text_day_count:"Den",repeat_radio_day_type2:"pracovn dny",repeat_week:"Opakuje kadch",repeat_text_week_count:"Tdn na:",repeat_radio_month_type:"u kadho",repeat_radio_month_start:"na",repeat_text_month_day:"Den kadho",repeat_text_month_count:"Msc",repeat_text_month_count2_before:"kad",repeat_text_month_count2_after:"Msc",repeat_year_label:"na",select_year_day2:"v",repeat_text_year_day:"Den v",select_year_month:"",repeat_radio_end:"bez data ukonen",repeat_text_occurences_count:"Udlosti",repeat_radio_end2:"po",repeat_radio_end3:"Konec",month_for_recurring:["Leden","nor","Bezen","Duben","Kvten","erven","ervenec","Srpen","Z","jen","Listopad","Prosinec"],day_for_recurring:["Nedle ","Pondl","ter","Steda","tvrtek","Ptek","Sobota"]}},da={date:{month_full:["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],day_short:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Uge",month_tab:"Mned",new_event:"Ny begivenhed",icon_save:"Gem",icon_cancel:"Fortryd",icon_details:"Detaljer",icon_edit:"Tilret",icon_delete:"Slet",confirm_closing:"Dine rettelser vil g tabt.. Er dy sikker?",confirm_deleting:"Bigivenheden vil blive slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",confirm_recurring:"Vil du tilrette hele serien af gentagne begivenheder?",section_recurring:"Gentag begivenhed",button_recurring:"Frakoblet",button_recurring_open:"Tilkoblet",button_edit_series:"Rediger serien",button_edit_occurrence:"Rediger en kopi",agenda_tab:"Dagsorden",date:"Dato",description:"Beskrivelse",year_tab:"r",week_agenda_tab:"Dagsorden",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ugenlig",repeat_radio_month:"Mnedlig",repeat_radio_year:"rlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"P hver arbejdsdag",repeat_week:" Gentager sig hver",repeat_text_week_count:"uge p flgende dage:",repeat_radio_month_type:"Hver den",repeat_radio_month_start:"Den",repeat_text_month_day:" i hver",repeat_text_month_count:"mned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"mned",repeat_year_label:"Den",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"",repeat_radio_end:"Ingen slutdato",repeat_text_occurences_count:"gentagelse",repeat_radio_end2:"Efter",repeat_radio_end3:"Slut",month_for_recurring:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day_for_recurring:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"]}},de={date:{month_full:[" Januar"," Februar"," Mrz "," April"," Mai"," Juni"," Juli"," August"," September "," Oktober"," November "," Dezember"],month_short:["Jan","Feb","Mr","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],day_full:["Sonntag","Montag","Dienstag"," Mittwoch"," Donnerstag","Freitag","Samstag"],day_short:["So","Mo","Di","Mi","Do","Fr","Sa"]},labels:{dhx_cal_today_button:"Heute",day_tab:"Tag",week_tab:"Woche",month_tab:"Monat",new_event:"neuer Eintrag",icon_save:"Speichern",icon_cancel:"Abbrechen",icon_details:"Details",icon_edit:"ndern",icon_delete:"Lschen",confirm_closing:"",confirm_deleting:"Der Eintrag wird gelscht",section_description:"Beschreibung",section_time:"Zeitspanne",full_day:"Ganzer Tag",confirm_recurring:"Wollen Sie alle Eintrge bearbeiten oder nur diesen einzelnen Eintrag?",section_recurring:"Wiederholung",button_recurring:"Aus",button_recurring_open:"An",button_edit_series:"Bearbeiten Sie die Serie",button_edit_occurrence:"Bearbeiten Sie eine Kopie",agenda_tab:"Agenda",date:"Datum",description:"Beschreibung",year_tab:"Jahre",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Tglich",repeat_radio_week:"Wchentlich",repeat_radio_month:"Monatlich",repeat_radio_year:"Jhrlich",repeat_radio_day_type:"jeden",repeat_text_day_count:"Tag",repeat_radio_day_type2:"an jedem Arbeitstag",repeat_week:" Wiederholt sich jede",repeat_text_week_count:"Woche am:",repeat_radio_month_type:"an jedem",repeat_radio_month_start:"am",repeat_text_month_day:"Tag eines jeden",repeat_text_month_count:"Monats",repeat_text_month_count2_before:"jeden",repeat_text_month_count2_after:"Monats",repeat_year_label:"am",select_year_day2:"im",repeat_text_year_day:"Tag im",select_year_month:"",repeat_radio_end:"kein Enddatum",repeat_text_occurences_count:"Ereignissen",repeat_radio_end3:"Schlu",repeat_radio_end2:"nach",month_for_recurring:["Januar","Februar","Mrz","April","Mai","Juni","Juli","August","September","Oktober","November","Dezember"],day_for_recurring:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"]}},el={date:{month_full:["","","","","","","","","","","",""],month_short:["","","","","","","","","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{dhx_cal_today_button:"",day_tab:"",week_tab:"",month_tab:"",new_event:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"    .   ;",section_description:"",section_time:" ",full_day:" ",confirm_recurring:"        ;",section_recurring:" ",button_recurring:"",button_recurring_open:"",button_edit_series:"  ",button_edit_occurrence:"  ",agenda_tab:" ",date:"",description:"",year_tab:"",week_agenda_tab:" ",grid_tab:"",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"",repeat_radio_week:"",repeat_radio_month:"",repeat_radio_year:"",repeat_radio_day_type:"",repeat_text_day_count:"",repeat_radio_day_type2:" ",repeat_week:"  ",repeat_text_week_count:"   :",repeat_radio_month_type:"",repeat_radio_month_start:"",repeat_text_month_day:" ",repeat_text_month_count:"",repeat_text_month_count2_before:"",repeat_text_month_count2_after:"",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"",select_year_month:"",repeat_radio_end:"  ",repeat_text_occurences_count:"",repeat_radio_end3:" ",repeat_radio_end2:" ",month_for_recurring:["","","","","","","","","","","",""],day_for_recurring:["","","","","","",""]}},en={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daily",repeat_radio_week:"Weekly",repeat_radio_month:"Monthly",repeat_radio_year:"Yearly",repeat_radio_day_type:"Every",repeat_text_day_count:"day",repeat_radio_day_type2:"Every workday",repeat_week:" Repeat every",repeat_text_week_count:"week next days:",repeat_radio_month_type:"Repeat",repeat_radio_month_start:"On",repeat_text_month_day:"day every",repeat_text_month_count:"month",repeat_text_month_count2_before:"every",repeat_text_month_count2_after:"month",repeat_year_label:"On",select_year_day2:"of",repeat_text_year_day:"day",select_year_month:"month",repeat_radio_end:"No end date",repeat_text_occurences_count:"occurrences",repeat_radio_end2:"After",repeat_radio_end3:"End by",month_for_recurring:["January","February","March","April","May","June","July","August","September","October","November","December"],day_for_recurring:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},es={date:{month_full:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],month_short:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],day_full:["Domingo","Lunes","Martes","Mircoles","Jueves","Viernes","Sbado"],day_short:["Dom","Lun","Mar","Mi","Jue","Vie","Sb"]},labels:{dhx_cal_today_button:"Hoy",day_tab:"Da",week_tab:"Semana",month_tab:"Mes",new_event:"Nuevo evento",icon_save:"Guardar",icon_cancel:"Cancelar",icon_details:"Detalles",icon_edit:"Editar",icon_delete:"Eliminar",confirm_closing:"",confirm_deleting:"El evento se borrar definitivamente, continuar?",section_description:"Descripcin",section_time:"Perodo",full_day:"Todo el da",confirm_recurring:"Desea modificar el conjunto de eventos repetidos?",section_recurring:"Repita el evento",button_recurring:"Impedido",button_recurring_open:"Permitido",button_edit_series:"Editar la serie",button_edit_occurrence:"Editar este evento",agenda_tab:"Da",date:"Fecha",description:"Descripcin",year_tab:"Ao",week_agenda_tab:"Da",grid_tab:"Reja",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Diariamente",repeat_radio_week:"Semanalmente",repeat_radio_month:"Mensualmente",repeat_radio_year:"Anualmente",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia",repeat_radio_day_type2:"Cada jornada de trabajo",repeat_week:" Repetir cada",repeat_text_week_count:"semana:",repeat_radio_month_type:"Repita",repeat_radio_month_start:"El",repeat_text_month_day:"dia cada ",repeat_text_month_count:"mes",repeat_text_month_count2_before:"cada",repeat_text_month_count2_after:"mes",repeat_year_label:"El",select_year_day2:"del",repeat_text_year_day:"dia",select_year_month:"mes",repeat_radio_end:"Sin fecha de finalizacin",repeat_text_occurences_count:"ocurrencias",repeat_radio_end3:"Fin",repeat_radio_end2:"Despus de",month_for_recurring:["Enero","Febrero","rzo","bril","Mayo","Junio","Julio","gosto","Setiembre","Octubre","Noviembre","Diciembre"],day_for_recurring:["Domingo","Lunes","Martes","Mircoles","Jeuves","Viernes","Sabado"]}},fi={date:{month_full:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],month_short:["Tam","Hel","Maa","Huh","Tou","Kes","Hei","Elo","Syy","Lok","Mar","Jou"],day_full:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],day_short:["Su","Ma","Ti","Ke","To","Pe","La"]},labels:{dhx_cal_today_button:"Tnn",day_tab:"Piv",week_tab:"Viikko",month_tab:"Kuukausi",new_event:"Uusi tapahtuma",icon_save:"Tallenna",icon_cancel:"Peru",icon_details:"Tiedot",icon_edit:"Muokkaa",icon_delete:"Poista",confirm_closing:"",confirm_deleting:"Haluatko varmasti poistaa tapahtuman?",section_description:"Kuvaus",section_time:"Aikajakso",full_day:"Koko piv",confirm_recurring:"Haluatko varmasti muokata toistuvan tapahtuman kaikkia jaksoja?",section_recurring:"Toista tapahtuma",button_recurring:"Ei k&auml;yt&ouml;ss&auml;",button_recurring_open:"K&auml;yt&ouml;ss&auml;",button_edit_series:"Muokkaa sarja",button_edit_occurrence:"Muokkaa kopio",agenda_tab:"Esityslista",date:"Pivmr",description:"Kuvaus",year_tab:"Vuoden",week_agenda_tab:"Esityslista",grid_tab:"Ritil",drag_to_create:"Luo uusi vetmll",drag_to_move:"Siirr vetmll",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"P&auml;ivitt&auml;in",repeat_radio_week:"Viikoittain",repeat_radio_month:"Kuukausittain",repeat_radio_year:"Vuosittain",repeat_radio_day_type:"Joka",repeat_text_day_count:"p&auml;iv&auml;",repeat_radio_day_type2:"Joka arkip&auml;iv&auml;",repeat_week:"Toista joka",repeat_text_week_count:"viikko n&auml;in&auml; p&auml;ivin&auml;:",repeat_radio_month_type:"Toista",repeat_radio_month_start:"",repeat_text_month_day:"p&auml;iv&auml;n&auml; joka",repeat_text_month_count:"kuukausi",repeat_text_month_count2_before:"joka",repeat_text_month_count2_after:"kuukausi",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"p&auml;iv&auml;",select_year_month:"kuukausi",repeat_radio_end:"Ei loppumisaikaa",repeat_text_occurences_count:"Toiston j&auml;lkeen",repeat_radio_end3:"Loppuu",repeat_radio_end2:"",month_for_recurring:["Tammikuu","Helmikuu","Maaliskuu","Huhtikuu","Toukokuu","Kes&auml;kuu","Hein&auml;kuu","Elokuu","Syyskuu","Lokakuu","Marraskuu","Joulukuu"],day_for_recurring:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"]}},fr={date:{month_full:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],month_short:["Jan","Fv","Mar","Avr","Mai","Juin","Juil","Ao","Sep","Oct","Nov","Dc"],day_full:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],day_short:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"]},labels:{dhx_cal_today_button:"Aujourd'hui",day_tab:"Jour",week_tab:"Semaine",month_tab:"Mois",new_event:"Nouvel vnement",icon_save:"Enregistrer",icon_cancel:"Annuler",icon_details:"Dtails",icon_edit:"Modifier",icon_delete:"Effacer",confirm_closing:"",confirm_deleting:"L'vnement sera effac sans appel, tes-vous sr ?",section_description:"Description",section_time:"Priode",full_day:"Journe complte",confirm_recurring:"Voulez-vous diter toute une srie d'vnements rpts?",section_recurring:"Priodicit",button_recurring:"Dsactiv",button_recurring_open:"Activ",button_edit_series:"Modifier la srie",button_edit_occurrence:"Modifier une copie",agenda_tab:"Jour",date:"Date",description:"Description",year_tab:"Anne",week_agenda_tab:"Jour",grid_tab:"Grille",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Quotidienne",repeat_radio_week:"Hebdomadaire",repeat_radio_month:"Mensuelle",repeat_radio_year:"Annuelle",repeat_radio_day_type:"Chaque",repeat_text_day_count:"jour",repeat_radio_day_type2:"Chaque journe de travail",repeat_week:" Rpter toutes les",repeat_text_week_count:"semaine:",repeat_radio_month_type:"Rpter",repeat_radio_month_start:"Le",repeat_text_month_day:"jour chaque",repeat_text_month_count:"mois",repeat_text_month_count2_before:"chaque",repeat_text_month_count2_after:"mois",repeat_year_label:"Le",select_year_day2:"du",repeat_text_year_day:"jour",select_year_month:"mois",repeat_radio_end:"Pas de date d&quot;achvement",repeat_text_occurences_count:"occurrences",repeat_radio_end3:"Fin",repeat_radio_end2:"Aprs",month_for_recurring:["Janvier","Fvrier","Mars","Avril","Mai","Juin","Juillet","Aot","Septembre","Octobre","Novembre","Dcembre"],day_for_recurring:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"]}},he={date:{month_full:["","","","","","","","","","","",""],month_short:["","","","","","","","","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{dhx_cal_today_button:"",day_tab:"",week_tab:"",month_tab:"",new_event:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"  .?",section_description:"",section_time:"",confirm_recurring:"      ?",section_recurring:" ",button_recurring:" ",button_recurring_open:"",full_day:" ",button_edit_series:"  ",button_edit_occurrence:" ",agenda_tab:" ",date:"",description:"",year_tab:"",week_agenda_tab:" ",grid_tab:"",drag_to_create:"Drag to create",drag_to_move:"  ",message_ok:"OK",message_cancel:"",next:"",prev:"",year:"",month:"",day:"",hour:"",minute:"",repeat_radio_day:"",repeat_radio_week:"",repeat_radio_month:"",repeat_radio_year:"",repeat_radio_day_type:" ",repeat_text_day_count:"",repeat_radio_day_type2:"   ",repeat_week:"  ",repeat_text_week_count:"  :",repeat_radio_month_type:" ",repeat_radio_month_start:"",repeat_text_month_day:" ",repeat_text_month_count:"",repeat_text_month_count2_before:" ",repeat_text_month_count2_after:"",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"",select_year_month:"",repeat_radio_end:"  ",repeat_text_occurences_count:"",repeat_radio_end3:" ",repeat_radio_end2:"",month_for_recurring:["","","","","","","","","","","",""],day_for_recurring:["","","","","","",""]}},hu={date:{month_full:["Janur","Februr","Mrcius","prilis","Mjus","Jnius","Jlius","Augusztus","Szeptember","Oktber","November","December"],month_short:["Jan","Feb","Mr","pr","Mj","Jn","Jl","Aug","Sep","Okt","Nov","Dec"],day_full:["Vasrnap","Htf","Kedd","Szerda","Cstrtk","Pntek","szombat"],day_short:["Va","H","Ke","Sze","Cs","P","Szo"]},labels:{dhx_cal_today_button:"Ma",day_tab:"Nap",week_tab:"Ht",month_tab:"Hnap",new_event:"j esemny",icon_save:"Ments",icon_cancel:"Mgse",icon_details:"Rszletek",icon_edit:"Szerkeszts",icon_delete:"Trls",confirm_closing:"",confirm_deleting:"Az esemny trlve lesz, biztosan folytatja?",section_description:"Lers",section_time:"Idszak",full_day:"Egesz napos",confirm_recurring:"Biztosan szerkeszteni akarod az sszes ismtld esemny belltst?",section_recurring:"Esemny ismtlse",button_recurring:"Tilts",button_recurring_open:"Engedlyezs",button_edit_series:"Edit series",button_edit_occurrence:"Szerkeszts brsg",agenda_tab:"Napirend",date:"Dtum",description:"Lers",year_tab:"v",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},id={date:{month_full:["Januari","Februari","Maret","April","Mei","Juni","Juli","Agustus","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mei","Jun","Jul","Ags","Sep","Okt","Nov","Des"],day_full:["Minggu","Senin","Selasa","Rabu","Kamis","Jumat","Sabtu"],day_short:["Ming","Sen","Sel","Rab","Kam","Jum","Sab"]},labels:{dhx_cal_today_button:"Hari Ini",day_tab:"Hari",week_tab:"Minggu",month_tab:"Bulan",new_event:"Acara Baru",icon_save:"Simpan",icon_cancel:"Batal",icon_details:"Detail",icon_edit:"Edit",icon_delete:"Hapus",confirm_closing:"",confirm_deleting:"Acara akan dihapus",section_description:"Keterangan",section_time:"Periode",full_day:"Hari penuh",confirm_recurring:"Apakah acara ini akan berulang?",section_recurring:"Acara Rutin",button_recurring:"Tidak Difungsikan",button_recurring_open:"Difungsikan",button_edit_series:"Mengedit seri",button_edit_occurrence:"Mengedit salinan",agenda_tab:"Agenda",date:"Tanggal",description:"Keterangan",year_tab:"Tahun",week_agenda_tab:"Agenda",grid_tab:"Tabel",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},it={date:{month_full:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],month_short:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],day_full:["Domenica","Luned","Marted","Mercoled","Gioved","Venerd","Sabato"],day_short:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"]},labels:{dhx_cal_today_button:"Oggi",day_tab:"Giorno",week_tab:"Settimana",month_tab:"Mese",new_event:"Nuovo evento",icon_save:"Salva",icon_cancel:"Chiudi",icon_details:"Dettagli",icon_edit:"Modifica",icon_delete:"Elimina",confirm_closing:"",confirm_deleting:"L'evento sar eliminato, siete sicuri?",section_description:"Descrizione",section_time:"Periodo di tempo",full_day:"Intera giornata",confirm_recurring:"Vuoi modificare l'intera serie di eventi?",section_recurring:"Ripetere l'evento",button_recurring:"Disattivato",button_recurring_open:"Attivato",button_edit_series:"Modificare la serie",button_edit_occurrence:"Modificare una copia",agenda_tab:"Agenda",date:"Data",description:"Descrizione",year_tab:"Anno",week_agenda_tab:"Agenda",grid_tab:"Griglia",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Quotidiano",repeat_radio_week:"Settimanale",repeat_radio_month:"Mensile",repeat_radio_year:"Annuale",repeat_radio_day_type:"Ogni",repeat_text_day_count:"giorno",repeat_radio_day_type2:"Ogni giornata lavorativa",repeat_week:" Ripetere ogni",repeat_text_week_count:"settimana:",repeat_radio_month_type:"Ripetere",repeat_radio_month_start:"Il",repeat_text_month_day:"giorno ogni",repeat_text_month_count:"mese",repeat_text_month_count2_before:"ogni",repeat_text_month_count2_after:"mese",repeat_year_label:"Il",select_year_day2:"del",repeat_text_year_day:"giorno",select_year_month:"mese",repeat_radio_end:"Senza data finale",repeat_text_occurences_count:"occorenze",repeat_radio_end3:"Fine",repeat_radio_end2:"Dopo",month_for_recurring:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Jiugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],day_for_recurring:["Domenica","Luned","Marted","Mercoled","Joved","Venerd","Sabato"]}},jp={date:{month_full:["1","2","3","4","5","6","7","8","9","10","11","12"],month_short:["1","2","3","4","5","6","7","8","9","10","11","12"],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{dhx_cal_today_button:"",day_tab:"",week_tab:"",month_tab:"",new_event:"",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"",section_description:"",section_time:"",confirm_recurring:"",section_recurring:"",button_recurring:"",button_recurring_open:"",full_day:"",button_edit_series:"",button_edit_occurrence:"",agenda_tab:"",date:"",description:"",year_tab:"",week_agenda_tab:"",grid_tab:"",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}};class LocaleManager{constructor(t){this._locales={};for(const a in t)this._locales[a]=t[a]}addLocale(t,a){this._locales[t]=a}getLocale(t){return this._locales[t]}}const nb={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],day_short:["Sn","Mon","Tir","Ons","Tor","Fre","Lr"]},labels:{dhx_cal_today_button:"I dag",day_tab:"Dag",week_tab:"Uke",month_tab:"Mned",new_event:"Ny hendelse",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Rediger",icon_delete:"Slett",confirm_closing:"",confirm_deleting:"Hendelsen vil bli slettet permanent. Er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",confirm_recurring:"Vil du forandre hele dette settet av repeterende hendelser?",section_recurring:"Repeter hendelsen",button_recurring:"Av",button_recurring_open:"P",button_edit_series:"Rediger serien",button_edit_occurrence:"Redigere en kopi",agenda_tab:"Agenda",date:"Dato",description:"Beskrivelse",year_tab:"r",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Daglig",repeat_radio_week:"Ukentlig",repeat_radio_month:"Mnedlig",repeat_radio_year:"rlig",repeat_radio_day_type:"Hver",repeat_text_day_count:"dag",repeat_radio_day_type2:"Alle hverdager",repeat_week:" Gjentas hver",repeat_text_week_count:"uke p:",repeat_radio_month_type:"P hver",repeat_radio_month_start:"P",repeat_text_month_day:"dag hver",repeat_text_month_count:"mned",repeat_text_month_count2_before:"hver",repeat_text_month_count2_after:"mned",repeat_year_label:"p",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"",repeat_radio_end:"Ingen sluttdato",repeat_text_occurences_count:"forekomst",repeat_radio_end3:"Stop den",repeat_radio_end2:"Etter",month_for_recurring:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],day_for_recurring:["Sondag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"]}},nl={date:{month_full:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],month_short:["Jan","Feb","mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],day_short:["Zo","Ma","Di","Wo","Do","Vr","Za"]},labels:{dhx_cal_today_button:"Vandaag",day_tab:"Dag",week_tab:"Week",month_tab:"Maand",new_event:"Nieuw item",icon_save:"Opslaan",icon_cancel:"Annuleren",icon_details:"Details",icon_edit:"Bewerken",icon_delete:"Verwijderen",confirm_closing:"",confirm_deleting:"Item zal permanent worden verwijderd, doorgaan?",section_description:"Beschrijving",section_time:"Tijd periode",full_day:"Hele dag",confirm_recurring:"Wilt u alle terugkerende items bijwerken?",section_recurring:"Item herhalen",button_recurring:"Uit",button_recurring_open:"Aan",button_edit_series:"Bewerk de serie",button_edit_occurrence:"Bewerk een kopie",agenda_tab:"Agenda",date:"Datum",description:"Omschrijving",year_tab:"Jaar",week_agenda_tab:"Agenda",grid_tab:"Tabel",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dagelijks",repeat_radio_week:"Wekelijks",repeat_radio_month:"Maandelijks",repeat_radio_year:"Jaarlijks",repeat_radio_day_type:"Elke",repeat_text_day_count:"dag(en)",repeat_radio_day_type2:"Elke werkdag",repeat_week:" Herhaal elke",repeat_text_week_count:"week op de volgende dagen:",repeat_radio_month_type:"Herhaal",repeat_radio_month_start:"Op",repeat_text_month_day:"dag iedere",repeat_text_month_count:"maanden",repeat_text_month_count2_before:"iedere",repeat_text_month_count2_after:"maanden",repeat_year_label:"Op",select_year_day2:"van",repeat_text_year_day:"dag",select_year_month:"maand",repeat_radio_end:"Geen eind datum",repeat_text_occurences_count:"keren",repeat_radio_end3:"Eindigd per",repeat_radio_end2:"Na",month_for_recurring:["Januari","Februari","Maart","April","Mei","Juni","Juli","Augustus","September","Oktober","November","December"],day_for_recurring:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"]}},no={date:{month_full:["Januar","Februar","Mars","April","Mai","Juni","Juli","August","September","Oktober","November","Desember"],month_short:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],day_full:["Sndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","Lrdag"],day_short:["Sn","Man","Tir","Ons","Tor","Fre","Lr"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Uke",month_tab:"Mned",new_event:"Ny",icon_save:"Lagre",icon_cancel:"Avbryt",icon_details:"Detaljer",icon_edit:"Endre",icon_delete:"Slett",confirm_closing:"Endringer blir ikke lagret, er du sikker?",confirm_deleting:"Oppfringen vil bli slettet, er du sikker?",section_description:"Beskrivelse",section_time:"Tidsperiode",full_day:"Full dag",confirm_recurring:"Vil du endre hele settet med repeterende oppfringer?",section_recurring:"Repeterende oppfring",button_recurring:"Ikke aktiv",button_recurring_open:"Aktiv",button_edit_series:"Rediger serien",button_edit_occurrence:"Redigere en kopi",agenda_tab:"Agenda",date:"Dato",description:"Beskrivelse",year_tab:"r",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},pl={date:{month_full:["Stycze","Luty","Marzec","Kwiecie","Maj","Czerwiec","Lipiec","Sierpie","Wrzesie","Padziernik","Listopad","Grudzie"],month_short:["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Pa","Lis","Gru"],day_full:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"],day_short:["Nie","Pon","Wto","ro","Czw","Pi","Sob"]},labels:{dhx_cal_today_button:"Dzi",day_tab:"Dzie",week_tab:"Tydzie",month_tab:"Miesic",new_event:"Nowe zdarzenie",icon_save:"Zapisz",icon_cancel:"Anuluj",icon_details:"Szczegy",icon_edit:"Edytuj",icon_delete:"Usu",confirm_closing:"",confirm_deleting:"Zdarzenie zostanie usunite na zawsze, kontynuowa?",section_description:"Opis",section_time:"Okres czasu",full_day:"Cay dzie",confirm_recurring:"Czy chcesz edytowa cay zbir powtarzajcych si zdarze?",section_recurring:"Powtrz zdarzenie",button_recurring:"Nieaktywne",button_recurring_open:"Aktywne",button_edit_series:"Edytuj seri",button_edit_occurrence:"Edytuj kopi",agenda_tab:"Agenda",date:"Data",description:"Opis",year_tab:"Rok",week_agenda_tab:"Agenda",grid_tab:"Tabela",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Codziennie",repeat_radio_week:"Co tydzie",repeat_radio_month:"Co miesic",repeat_radio_year:"Co rok",repeat_radio_day_type:"Kadego",repeat_text_day_count:"dnia",repeat_radio_day_type2:"Kadego dnia roboczego",repeat_week:" Powtarzaj kadego",repeat_text_week_count:"tygodnia w dni:",repeat_radio_month_type:"Powtrz",repeat_radio_month_start:"W",repeat_text_month_day:"dnia kadego",repeat_text_month_count:"miesica",repeat_text_month_count2_before:"kadego",repeat_text_month_count2_after:"miesica",repeat_year_label:"W",select_year_day2:"miesica",repeat_text_year_day:"dnia miesica",select_year_month:"",repeat_radio_end:"Bez daty kocowej",repeat_text_occurences_count:"wystpieniu/ach",repeat_radio_end3:"Zakocz w",repeat_radio_end2:"Po",month_for_recurring:["Stycznia","Lutego","Marca","Kwietnia","Maja","Czerwca","Lipca","Sierpnia","Wrzenia","Padziernka","Listopada","Grudnia"],day_for_recurring:["Niedziela","Poniedziaek","Wtorek","roda","Czwartek","Pitek","Sobota"]}},pt={date:{month_full:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],month_short:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],day_full:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"],day_short:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"]},labels:{dhx_cal_today_button:"Hoje",day_tab:"Dia",week_tab:"Semana",month_tab:"Ms",new_event:"Novo evento",icon_save:"Salvar",icon_cancel:"Cancelar",icon_details:"Detalhes",icon_edit:"Editar",icon_delete:"Deletar",confirm_closing:"",confirm_deleting:"Tem certeza que deseja excluir?",section_description:"Descrio",section_time:"Perodo de tempo",full_day:"Dia inteiro",confirm_recurring:"Deseja editar todos esses eventos repetidos?",section_recurring:"Repetir evento",button_recurring:"Desabilitar",button_recurring_open:"Habilitar",button_edit_series:"Editar a srie",button_edit_occurrence:"Editar uma cpia",agenda_tab:"Dia",date:"Data",description:"Descrio",year_tab:"Ano",week_agenda_tab:"Dia",grid_tab:"Grade",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dirio",repeat_radio_week:"Semanal",repeat_radio_month:"Mensal",repeat_radio_year:"Anual",repeat_radio_day_type:"Cada",repeat_text_day_count:"dia(s)",repeat_radio_day_type2:"Cada trabalho dirio",repeat_week:" Repita cada",repeat_text_week_count:"semana:",repeat_radio_month_type:"Repetir",repeat_radio_month_start:"Em",repeat_text_month_day:"todo dia",repeat_text_month_count:"ms",repeat_text_month_count2_before:"todo",repeat_text_month_count2_after:"ms",repeat_year_label:"Em",select_year_day2:"of",repeat_text_year_day:"dia",select_year_month:"ms",repeat_radio_end:"Sem data final",repeat_text_occurences_count:"ocorrncias",repeat_radio_end3:"Fim",repeat_radio_end2:"Depois",month_for_recurring:["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],day_for_recurring:["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"]}},ro={date:{month_full:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","November","December"],month_short:["Ian","Feb","Mar","Apr","Mai","Iun","Iul","Aug","Sep","Oct","Nov","Dec"],day_full:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"],day_short:["Du","Lu","Ma","Mi","Jo","Vi","Sa"]},labels:{dhx_cal_today_button:"Astazi",day_tab:"Zi",week_tab:"Saptamana",month_tab:"Luna",new_event:"Eveniment nou",icon_save:"Salveaza",icon_cancel:"Anuleaza",icon_details:"Detalii",icon_edit:"Editeaza",icon_delete:"Sterge",confirm_closing:"Schimbarile nu vor fi salvate, esti sigur?",confirm_deleting:"Evenimentul va fi sters permanent, esti sigur?",section_description:"Descriere",section_time:"Interval",full_day:"Toata ziua",confirm_recurring:"Vrei sa editezi toata seria de evenimente repetate?",section_recurring:"Repetare",button_recurring:"Dezactivata",button_recurring_open:"Activata",button_edit_series:"Editeaza serie",button_edit_occurrence:"Editeaza doar intrare",agenda_tab:"Agenda",date:"Data",description:"Descriere",year_tab:"An",week_agenda_tab:"Agenda",grid_tab:"Lista",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Zilnic",repeat_radio_week:"Saptamanal",repeat_radio_month:"Lunar",repeat_radio_year:"Anual",repeat_radio_day_type:"La fiecare",repeat_text_day_count:"zi(le)",repeat_radio_day_type2:"Fiecare zi lucratoare",repeat_week:" Repeta la fiecare",repeat_text_week_count:"saptamana in urmatoarele zile:",repeat_radio_month_type:"Repeta in",repeat_radio_month_start:"In a",repeat_text_month_day:"zi la fiecare",repeat_text_month_count:"luni",repeat_text_month_count2_before:"la fiecare",repeat_text_month_count2_after:"luni",repeat_year_label:"In",select_year_day2:"a lunii",repeat_text_year_day:"zi a lunii",select_year_month:"",repeat_radio_end:"Fara data de sfarsit",repeat_text_occurences_count:"evenimente",repeat_radio_end3:"La data",repeat_radio_end2:"Dupa",month_for_recurring:["Ianuarie","Februarie","Martie","Aprilie","Mai","Iunie","Iulie","August","Septembrie","Octombrie","Noiembrie","Decembrie"],day_for_recurring:["Duminica","Luni","Marti","Miercuri","Joi","Vineri","Sambata"]}},ru={date:{month_full:["","","","","Ma","","","","","O","",""],month_short:["","","Ma","A","Ma","","","A","","","",""],day_full:["","","","","","",""],day_short:["","","","","","",""]},labels:{dhx_cal_today_button:"",day_tab:"",week_tab:"",month_tab:"",new_event:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"   , ?",section_description:"",section_time:" ",full_day:" ",confirm_recurring:"      ?",section_recurring:"",button_recurring:"",button_recurring_open:"",button_edit_series:" ",button_edit_occurrence:" ",agenda_tab:"",date:"",description:"",year_tab:"",week_agenda_tab:"",grid_tab:"",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"",repeat_radio_week:"",repeat_radio_month:"",repeat_radio_year:"",repeat_radio_day_type:"",repeat_text_day_count:"",repeat_radio_day_type2:"  ",repeat_week:"  ",repeat_text_week_count:" , :",repeat_radio_month_type:"",repeat_radio_month_start:"",repeat_text_month_day:"   ",repeat_text_month_count:"",repeat_text_month_count2_before:" ",repeat_text_month_count2_after:"",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"",select_year_month:"",repeat_radio_end:"  ",repeat_text_occurences_count:"",repeat_radio_end3:" ",repeat_radio_end2:"",month_for_recurring:["","","","","","","","","","","",""],day_for_recurring:["","","","","","",""]}},si={date:{month_full:["Januar","Februar","Marec","April","Maj","Junij","Julij","Avgust","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Nedelja","Ponedeljek","Torek","Sreda","etrtek","Petek","Sobota"],day_short:["Ned","Pon","Tor","Sre","et","Pet","Sob"]},labels:{dhx_cal_today_button:"Danes",day_tab:"Dan",week_tab:"Teden",month_tab:"Mesec",new_event:"Nov dogodek",icon_save:"Shrani",icon_cancel:"Preklii",icon_details:"Podrobnosti",icon_edit:"Uredi",icon_delete:"Izbrii",confirm_closing:"",confirm_deleting:"Dogodek bo izbrisan. elite nadaljevati?",section_description:"Opis",section_time:"asovni okvir",full_day:"Ves dan",confirm_recurring:"elite urediti celoten set ponavljajoih dogodkov?",section_recurring:"Ponovi dogodek",button_recurring:"Onemogoeno",button_recurring_open:"Omogoeno",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Zadeva",date:"Datum",description:"Opis",year_tab:"Leto",week_agenda_tab:"Zadeva",grid_tab:"Miza",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},sk={date:{month_full:["Janur","Februr","Marec","Aprl","Mj","Jn","Jl","August","September","Oktber","November","December"],month_short:["Jan","Feb","Mar","Apr","Mj","Jn","Jl","Aug","Sept","Okt","Nov","Dec"],day_full:["Nedea","Pondelok","Utorok","Streda","tvrtok","Piatok","Sobota"],day_short:["Ne","Po","Ut","St","t","Pi","So"]},labels:{dhx_cal_today_button:"Dnes",day_tab:"De",week_tab:"Tde",month_tab:"Mesiac",new_event:"Nov udalos",icon_save:"Uloi",icon_cancel:"Sp",icon_details:"Detail",icon_edit:"Edituj",icon_delete:"Zmaza",confirm_closing:"Vae zmeny nebud uloen. Skutone?",confirm_deleting:"Udalos bude natrvalo vymazan. Skutone?",section_description:"Poznmky",section_time:"Doba platnosti",confirm_recurring:"Prajete si upravi cel radu opakovanch udalost?",section_recurring:"Opakovanie udalosti",button_recurring:"Vypnut",button_recurring_open:"Zapnut",button_edit_series:"Upravi opakovania",button_edit_occurrence:"Upravi intancie",agenda_tab:"Program",date:"Dtum",description:"Poznmka",year_tab:"Rok",full_day:"Cel de",week_agenda_tab:"Program",grid_tab:"Mrieka",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Denne",repeat_radio_week:"Tdenne",repeat_radio_month:"Mesane",repeat_radio_year:"Rone",repeat_radio_day_type:"Kad",repeat_text_day_count:"de",repeat_radio_day_type2:"Kad prac. de",repeat_week:"Opakova kad",repeat_text_week_count:"tde v doch:",repeat_radio_month_type:"Opakova",repeat_radio_month_start:"On",repeat_text_month_day:"de kad",repeat_text_month_count:"mesiac",repeat_text_month_count2_before:"kad",repeat_text_month_count2_after:"mesiac",repeat_year_label:"On",select_year_day2:"poas",repeat_text_year_day:"de",select_year_month:"mesiac",repeat_radio_end:"Bez dtumu ukonenia",repeat_text_occurences_count:"udalostiach",repeat_radio_end3:"Ukoni",repeat_radio_end2:"Po",month_for_recurring:["Janur","Februr","Marec","Aprl","Mj","Jn","Jl","August","September","Oktber","November","December"],day_for_recurring:["Nedea","Pondelok","Utorok","Streda","tvrtok","Piatok","Sobota"]}},sv={date:{month_full:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],month_short:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],day_full:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"],day_short:["Sn","Mn","Tis","Ons","Tor","Fre","Lr"]},labels:{dhx_cal_today_button:"Idag",day_tab:"Dag",week_tab:"Vecka",month_tab:"Mnad",new_event:"Ny hndelse",icon_save:"Spara",icon_cancel:"ngra",icon_details:"Detaljer",icon_edit:"ndra",icon_delete:"Ta bort",confirm_closing:"",confirm_deleting:"r du sker p att du vill ta bort hndelsen permanent?",section_description:"Beskrivning",section_time:"Tid",full_day:"Hela dagen",confirm_recurring:"Vill du redigera hela serien med repeterande hndelser?",section_recurring:"Upprepa hndelse",button_recurring:"Inaktiverat",button_recurring_open:"Aktiverat",button_edit_series:"Redigera serien",button_edit_occurrence:"Redigera en kopia",agenda_tab:"Dagordning",date:"Datum",description:"Beskrivning",year_tab:"r",week_agenda_tab:"Dagordning",grid_tab:"Galler",drag_to_create:"Dra fr att skapa ny",drag_to_move:"Dra fr att flytta",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"Dagligen",repeat_radio_week:"Veckovis",repeat_radio_month:"Mnadsvis",repeat_radio_year:"rligen",repeat_radio_day_type:"Var",repeat_text_day_count:"dag",repeat_radio_day_type2:"Varje arbetsdag",repeat_week:" Upprepa var",repeat_text_week_count:"vecka dessa dagar:",repeat_radio_month_type:"Upprepa",repeat_radio_month_start:"Den",repeat_text_month_day:"dagen var",repeat_text_month_count:"mnad",repeat_text_month_count2_before:"var",repeat_text_month_count2_after:"mnad",repeat_year_label:"Den",select_year_day2:"i",repeat_text_year_day:"dag i",select_year_month:"mnad",repeat_radio_end:"Inget slutdatum",repeat_text_occurences_count:"upprepningar",repeat_radio_end3:"Sluta efter",repeat_radio_end2:"Efter",month_for_recurring:["Januari","Februari","Mars","April","Maj","Juni","Juli","Augusti","September","Oktober","November","December"],day_for_recurring:["Sndag","Mndag","Tisdag","Onsdag","Torsdag","Fredag","Lrdag"]}},tr={date:{month_full:["Ocak","ubat","Mart","Nisan","Mays","Haziran","Temmuz","Austos","Eyll","Ekim","Kasm","Aralk"],month_short:["Oca","ub","Mar","Nis","May","Haz","Tem","Au","Eyl","Eki","Kas","Ara"],day_full:["Pazar","Pazartes,","Sal","aramba","Perembe","Cuma","Cumartesi"],day_short:["Paz","Pts","Sal","ar","Per","Cum","Cts"]},labels:{dhx_cal_today_button:"Bugn",day_tab:"Gn",week_tab:"Hafta",month_tab:"Ay",new_event:"Uygun",icon_save:"Kaydet",icon_cancel:"ptal",icon_details:"Detaylar",icon_edit:"Dzenle",icon_delete:"Sil",confirm_closing:"",confirm_deleting:"Etkinlik silinecek, devam?",section_description:"Aklama",section_time:"Zaman aral",full_day:"Tam gn",confirm_recurring:"Tm tekrar eden etkinlikler silinecek, devam?",section_recurring:"Etkinlii tekrarla",button_recurring:"Pasif",button_recurring_open:"Aktif",button_edit_series:"Dizi dzenleme",button_edit_occurrence:"Bir kopyasn dzenleyin",agenda_tab:"Ajanda",date:"Tarih",description:"Aklama",year_tab:"Yl",week_agenda_tab:"Ajanda",grid_tab:"Izgara",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},ua={date:{month_full:["","","","","","","","","","","",""],month_short:["","","","","","","","","","","",""],day_full:["","","","","","'",""],day_short:["","","","","","",""]},labels:{dhx_cal_today_button:"",day_tab:"",week_tab:"",month_tab:"",new_event:" ",icon_save:"",icon_cancel:"",icon_details:"",icon_edit:"",icon_delete:"",confirm_closing:"",confirm_deleting:"  .  ?",section_description:"",section_time:" ",full_day:" ",confirm_recurring:"     ?",section_recurring:" ",button_recurring:"",button_recurring_open:"",button_edit_series:" ",button_edit_occurrence:" ",agenda_tab:"",date:"",description:"",year_tab:"",week_agenda_tab:"",grid_tab:"",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute",repeat_radio_day:"",repeat_radio_week:"",repeat_radio_month:"",repeat_radio_year:"",repeat_radio_day_type:"",repeat_text_day_count:"",repeat_radio_day_type2:"  ",repeat_week:"  ",repeat_text_week_count:" , :",repeat_radio_month_type:"",repeat_radio_month_start:"",repeat_text_month_day:"   ",repeat_text_month_count:"",repeat_text_month_count2_before:" ",repeat_text_month_count2_after:"",repeat_year_label:"",select_year_day2:"",repeat_text_year_day:"",select_year_month:"",repeat_radio_end:"  ",repeat_text_occurences_count:"",repeat_radio_end3:" ",repeat_radio_end2:"",month_for_recurring:["","","","","","","","","","","",""],day_for_recurring:["","","","","","'",""]}};function i18nFactory(){return new LocaleManager({en,ar,be,ca,cn,cs,da,de,el,es,fi,fr,he,hu,id,it,jp,nb,nl,no,pl,pt,ro,ru,si,sk,sv,tr,ua})}class DatePicker{constructor(t,a,n={}){this.state={date:new Date,modes:["days","months","years"],currentRange:[],eventDates:[],currentModeIndex:0,...n},this.container=null,this.element=null,this.onStateChangeHandlers=[],this.scheduler=t,this._domEvents=t._createDomEventScope(),this.state=this.getState(),makeEventable(this),a&&(this.container=a,this.render(this.container)),this.onStateChange((o,r)=>{this.callEvent("onStateChange",[r,o])})}getState(){return{...this.state,mode:this.state.modes[this.state.currentModeIndex]}}setState(t){const a={...this.state};t.mode&&(t.currentModeIndex=this.state.modes.indexOf(t.mode)),this.state={...this.state,...t},this._notifyStateChange(a,this.state),this.container&&this.render(this.container)}onStateChange(t){return this.onStateChangeHandlers.push(t),()=>{const a=this.onStateChangeHandlers.indexOf(t);a!==-1&&this.onStateChangeHandlers.splice(a,1)}}_notifyStateChange(t,a){this.onStateChangeHandlers.forEach(n=>n(t,a))}_adjustDate(t){const{mode:a,date:n}=this.getState(),o=new Date(n);a==="days"?o.setMonth(n.getMonth()+t):a==="months"?o.setFullYear(n.getFullYear()+t):o.setFullYear(n.getFullYear()+10*t),this.setState({date:o})}_toggleMode(){const t=(this.state.currentModeIndex+1)%this.state.modes.length;this.setState({currentModeIndex:t})}_renderCalendarHeader(t){const{mode:a,date:n}=this.getState(),o=document.createElement("div");o.classList.add("dhx_cal_datepicker_header");const r=document.createElement("button");r.classList.add("dhx_cal_datepicker_arrow","scheduler_icon","arrow_left"),o.appendChild(r);const _=document.createElement("div");if(_.classList.add("dhx_cal_datepicker_title"),a==="days")_.innerText=n.toLocaleString("default",{month:"long"})+" "+n.getFullYear();else if(a==="months")_.innerText=n.getFullYear();else{const s=10*Math.floor(n.getFullYear()/10);_.innerText=`${s} - ${s+9}`}this._domEvents.attach(_,"click",this._toggleMode.bind(this)),o.appendChild(_);const i=document.createElement("button");i.classList.add("dhx_cal_datepicker_arrow","scheduler_icon","arrow_right"),o.appendChild(i),t.appendChild(o),this._domEvents.attach(r,"click",this._adjustDate.bind(this,-1)),this._domEvents.attach(i,"click",this._adjustDate.bind(this,1))}render(t){this._domEvents.detachAll(),this.container=t||this.container,this.container.innerHTML="",this.element||(this.element=document.createElement("div"),this.element.classList.add("dhx_cal_datepicker")),this.element.innerHTML="",this.container.appendChild(this.element),this._renderCalendarHeader(this.element);const a=document.createElement("div");a.classList.add("dhx_cal_datepicker_data"),this.element.appendChild(a);const{mode:n}=this.getState();n==="days"?this._renderDayGrid(a):n==="months"?this._renderMonthGrid(a):this._renderYearGrid(a)}_renderDayGridHeader(t){const{date:a}=this.getState(),n=this.scheduler;let o=n.date.week_start(new Date(a));const r=n.date.add(n.date.week_start(new Date(a)),1,"week");t.classList.add("dhx_cal_datepicker_days");const _=n.date.date_to_str("%D");for(;o.valueOf()<r.valueOf();){const i=_(o),s=document.createElement("div");s.setAttribute("data-day",o.getDay()),s.classList.add("dhx_cal_datepicker_dayname"),s.innerText=i,t.appendChild(s),o=n.date.add(o,1,"day")}}_weeksBetween(t,a){const n=this.scheduler;let o=0,r=new Date(t);for(;r.valueOf()<a.valueOf();)o+=1,r=n.date.week_start(n.date.add(r,1,"week"));return o}_renderDayGrid(t){const{date:a,currentRange:n,eventDates:o,minWeeks:r}=this.getState();let _=n[0],i=n[1];const s=o.reduce((g,v)=>(g[this.scheduler.date.day_start(new Date(v)).valueOf()]=!0,g),{}),d=document.createElement("div");this._renderDayGridHeader(d),t.appendChild(d);const l=this.scheduler,h=l.date.week_start(l.date.month_start(new Date(a))),f=l.date.month_start(new Date(a)),m=l.date.add(l.date.month_start(new Date(a)),1,"month");let u=l.date.add(l.date.month_start(new Date(a)),1,"month");u.getDay()!==0&&(u=l.date.add(l.date.week_start(u),1,"week"));let p=this._weeksBetween(h,u);r&&p<r&&(u=l.date.add(u,r-p,"week"));let b=h;const c=document.createElement("div");for(c.classList.add("dhx_cal_datepicker_days"),this._domEvents.attach(c,"click",g=>{const v=g.target.closest("[data-cell-date]"),y=new Date(v.getAttribute("data-cell-date"));this.callEvent("onDateClick",[y,g])});b.valueOf()<u.valueOf();){const g=document.createElement("div");g.setAttribute("data-cell-date",l.templates.format_date(b)),g.setAttribute("data-day",b.getDay()),g.innerHTML=b.getDate(),b.valueOf()<f.valueOf()?g.classList.add("dhx_before"):b.valueOf()>=m.valueOf()&&g.classList.add("dhx_after"),b.getDay()!==0&&b.getDay()!==6||g.classList.add("dhx_cal_datepicker_weekend"),_&&i&&b.valueOf()>=_.valueOf()&&b.valueOf()<i.valueOf()&&g.classList.add("dhx_cal_datepicker_current"),s[b.valueOf()]&&g.classList.add("dhx_cal_datepicker_event"),g.classList.add("dhx_cal_datepicker_date"),c.appendChild(g),b=l.date.add(b,1,"day")}t.appendChild(c)}_renderMonthGrid(t){const{date:a}=this.getState(),n=document.createElement("div");n.classList.add("dhx_cal_datepicker_months");const o=[];for(let s=0;s<12;s++)o.push(new Date(a.getFullYear(),s,1));const r=this.scheduler.date.date_to_str("%M");o.forEach(s=>{const d=document.createElement("div");d.classList.add("dhx_cal_datepicker_month"),a.getMonth()===s.getMonth()&&d.classList.add("dhx_cal_datepicker_current"),d.setAttribute("data-month",s.getMonth()),d.innerHTML=r(s),this._domEvents.attach(d,"click",()=>{const l=new Date(s);this.setState({date:l,mode:"days"})}),n.appendChild(d)}),t.appendChild(n);const _=document.createElement("div");_.classList.add("dhx_cal_datepicker_done");const i=document.createElement("button");i.innerText="Done",i.classList.add("dhx_cal_datepicker_done_btn"),this._domEvents.attach(i,"click",()=>{this.setState({mode:"days"})}),_.appendChild(i),t.appendChild(_)}_renderYearGrid(t){const{date:a}=this.getState(),n=10*Math.floor(a.getFullYear()/10),o=document.createElement("div");o.classList.add("dhx_cal_datepicker_years");for(let i=n-1;i<=n+10;i++){const s=document.createElement("div");s.innerText=i,s.classList.add("dhx_cal_datepicker_year"),s.setAttribute("data-year",i),a.getFullYear()===i&&s.classList.add("dhx_cal_datepicker_current"),this._domEvents.attach(s,"click",()=>{this.setState({date:new Date(i,a.getMonth(),1),mode:"months"})}),o.appendChild(s)}t.appendChild(o);const r=document.createElement("div");r.classList.add("dhx_cal_datepicker_done");const _=document.createElement("button");_.innerText="Done",_.classList.add("dhx_cal_datepicker_done_btn"),this._domEvents.attach(_,"click",()=>{this.setState({mode:"months"})}),r.appendChild(_),t.appendChild(r)}destructor(){this.onStateChangeHandlers=[],this.element&&(this.element.innerHTML="",this.element.remove()),this._domEvents.detachAll(),this.callEvent("onDestroy",[]),this.detachAllEvents(),this.scheduler=null}}function factoryMethod(e){const t={version:"7.0.1"};extend$p(t),extend$k(t),extend$l(t),extend$j(t),t.utils=utils,t.$domHelpers=dom_helpers,t.utils.dom=dom_helpers,t.uid=utils.uid,t.mixin=utils.mixin,t.defined=utils.defined,t.assert=assert(t),t.copy=utils.copy,t._createDatePicker=function(r,_){return new DatePicker(t,r,_)},t._getFocusableNodes=dom_helpers.getFocusableNodes,t._getClassName=dom_helpers.getClassName,t._locate_css=dom_helpers.locateCss;const a=message(t);t.utils.mixin(t,a),t.env=t.$env=env,t.Promise=window.Promise,extend$i(t),extend$h(t),extend$g(t),extend$f(t),extend$e(t),extend$d(t),extend$9(t),extend$8(t),extend$7(t),extend$6(t),extend$5(t),extend$4(),extend$3(t),extend$2(t),extend$o(t);const n=i18nFactory();t.i18n={addLocale:n.addLocale,setLocale:function(r){if(typeof r=="string"){var _=n.getLocale(r);_||(_=n.getLocale("en")),t.locale=_}else if(r)if(t.locale)for(var i in r)r[i]&&typeof r[i]=="object"?(t.locale[i]||(t.locale[i]={}),t.mixin(t.locale[i],r[i],!0)):t.locale[i]=r[i];else t.locale=r;var s=t.locale.labels;s.dhx_save_btn=s.icon_save,s.dhx_cancel_btn=s.icon_cancel,s.dhx_delete_btn=s.icon_delete,t.$container&&t.get_elements()},getLocale:n.getLocale},t.i18n.setLocale("en"),t.ext={};const o={};return t.plugins=function(r){(function(i,s,d){const l=[];for(const h in i)if(i[h]){const f=h.toLowerCase();s[f]&&s[f].forEach(function(m){const u=m.toLowerCase();i[u]||l.push(u)}),l.push(f)}return l.sort(function(h,f){const m=d[h]||0,u=d[f]||0;return m>u?1:m<u?-1:0}),l})(r,{treetimeline:["timeline"],daytimeline:["timeline"],outerdrag:["legacy"]},{legacy:1,limit:1,timeline:2,daytimeline:3,treetimeline:3,outerdrag:6}).forEach(function(i){if(!o[i]){const s=e.getExtension(i);if(!s)throw new Error("unknown plugin "+i);s(t),o[i]=!0}})},t}class ExtensionsManager{constructor(t){this._extensions={};for(const a in t)this._extensions[a]=t[a]}addExtension(t,a){this._extensions[t]=a}getExtension(t){return this._extensions[t]}}dhtmlxHook();class SchedulerFactory{constructor(t){this._seed=0,this._schedulerPlugins=[],this._bundledExtensions=t,this._extensionsManager=new ExtensionsManager(t)}plugin(t){this._schedulerPlugins.push(t),global$1.scheduler&&t(global$1.scheduler)}getSchedulerInstance(t){for(var a=factoryMethod(this._extensionsManager),n=0;n<this._schedulerPlugins.length;n++)this._schedulerPlugins[n](a);return a._internal_id=this._seed++,this.$syncFactory&&this.$syncFactory(a),t&&this._initFromConfig(a,t),a}_initFromConfig(t,a){if(a.plugins&&t.plugins(a.plugins),a.config&&t.mixin(t.config,a.config,!0),a.templates&&t.attachEvent("onTemplatesReady",function(){t.mixin(t.templates,a.templates,!0)},{once:!0}),a.events)for(const n in a.events)t.attachEvent(n,a.events[n]);a.locale&&t.i18n.setLocale(a.locale),Array.isArray(a.calendars)&&a.calendars.forEach(function(n){t.addCalendar(n)}),a.container?t.init(a.container):t.init(),a.data&&(typeof a.data=="string"?t.load(a.data):t.parse(a.data))}}function active_links(e){e.config.active_link_view="day",e._active_link_click=function(t){var a=t.target.getAttribute("data-link-date"),n=e.date.str_to_date(e.config.api_date,!1,!0);if(a)return e.setCurrentView(n(a),e.config.active_link_view),t&&t.preventDefault&&t.preventDefault(),!1},e.attachEvent("onTemplatesReady",function(){var t=function(n,o){o=o||n+"_scale_date",e.templates["_active_links_old_"+o]||(e.templates["_active_links_old_"+o]=e.templates[o]);var r=e.templates["_active_links_old_"+o],_=e.date.date_to_str(e.config.api_date);e.templates[o]=function(i){return"<a data-link-date='"+_(i)+"' href='#'>"+r(i)+"</a>"}};if(t("week"),t("","month_day"),this.matrix)for(var a in this.matrix)t(a);this._detachDomEvent(this._obj,"click",e._active_link_click),e.event(this._obj,"click",e._active_link_click)})}function agenda_legacy(e){e.date.add_agenda_legacy=function(t){return e.date.add(t,1,"year")},e.templates.agenda_legacy_time=function(t,a,n){return n._timed?this.day_date(n.start_date,n.end_date,n)+" "+this.event_date(t):e.templates.day_date(t)+" &ndash; "+e.templates.day_date(a)},e.templates.agenda_legacy_text=function(t,a,n){return n.text},e.templates.agenda_legacy_date=function(){return""},e.date.agenda_legacy_start=function(){return e.date.date_part(e._currentDate())},e.attachEvent("onTemplatesReady",function(){var t=e.dblclick_dhx_cal_data;e.dblclick_dhx_cal_data=function(){if(this._mode=="agenda_legacy")!this.config.readonly&&this.config.dblclick_create&&this.addEventNow();else if(t)return t.apply(this,arguments)};var a=e.render_data;e.render_data=function(r){if(this._mode!="agenda_legacy")return a.apply(this,arguments);o()};var n=e.render_view_data;function o(){var r=e.get_visible_events();r.sort(function(c,g){return c.start_date>g.start_date?1:-1});for(var _,i="<div class='dhx_agenda_area' "+e._waiAria.agendaDataAttrString()+">",s=0;s<r.length;s++){var d=r[s],l=d.color?"--dhx-scheduler-event-background:"+d.color+";":"",h=d.textColor?"--dhx-scheduler-event-color:"+d.textColor+";":"",f=e.templates.event_class(d.start_date,d.end_date,d);_=e._waiAria.agendaEventAttrString(d);var m=e._waiAria.agendaDetailsBtnString();i+="<div "+_+" class='dhx_agenda_line"+(f?" "+f:"")+"' event_id='"+d.id+"' "+e.config.event_attribute+"='"+d.id+"' style='"+h+l+(d._text_style||"")+"'><div class='dhx_agenda_event_time'>"+(e.config.rtl?e.templates.agenda_time(d.end_date,d.start_date,d):e.templates.agenda_time(d.start_date,d.end_date,d))+"</div>",i+=`<div ${m} class='dhx_event_icon icon_details'><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z" fill="#A1A4A6"/>
			</svg></div>`,i+="<span>"+e.templates.agenda_text(d.start_date,d.end_date,d)+"</span></div>"}i+="<div class='dhx_v_border'></div></div>",e._els.dhx_cal_data[0].innerHTML=i,e._els.dhx_cal_data[0].childNodes[0].scrollTop=e._agendaScrollTop||0;var u=e._els.dhx_cal_data[0].childNodes[0];u.childNodes[u.childNodes.length-1].style.height=u.offsetHeight<e._els.dhx_cal_data[0].offsetHeight?"100%":u.offsetHeight+"px";var p=e._els.dhx_cal_data[0].firstChild.childNodes,b=e._getNavDateElement();for(b&&(b.innerHTML=e.templates.agenda_date(e._min_date,e._max_date,e._mode)),e._rendered=[],s=0;s<p.length-1;s++)e._rendered[s]=p[s]}e.render_view_data=function(){return this._mode=="agenda_legacy"&&(e._agendaScrollTop=e._els.dhx_cal_data[0].childNodes[0].scrollTop,e._els.dhx_cal_data[0].childNodes[0].scrollTop=0),n.apply(this,arguments)},e.agenda_legacy_view=function(r){e._min_date=e.config.agenda_start||e.date.agenda_legacy_start(e._date),e._max_date=e.config.agenda_end||e.date.add_agenda_legacy(e._min_date,1),function(_){if(_){var i=e.locale.labels,s=e._waiAria.agendaHeadAttrString(),d=e._waiAria.agendaHeadDateString(i.date),l=e._waiAria.agendaHeadDescriptionString(i.description);e._els.dhx_cal_header[0].innerHTML="<div "+s+" class='dhx_agenda_line dhx_agenda_line_header'><div "+d+">"+i.date+"</div><span class = 'description_header' style='padding-left:25px' "+l+">"+i.description+"</span></div>",e._table_view=!0,e.set_sizes()}}(r),r?(e._cols=null,e._colsS=null,e._table_view=!0,o()):e._table_view=!1}})}function agenda_view(e){e.date.add_agenda=function(o,r){return e.date.add(o,1*r,"month")},e.templates.agenda_time=function(o,r,_){return _._timed?`${this.event_date(o)} - ${this.event_date(r)}`:e.locale.labels.full_day},e.templates.agenda_text=function(o,r,_){return _.text};const t=e.date.date_to_str("%F %j"),a=e.date.date_to_str("%l");e.templates.agenda_day=function(o){return`<div class="dhx_agenda_day_date">${t(o)}</div>
		<div class="dhx_agenda_day_dow">${a(o)}</div>`},e.templates.agenda_date=function(o,r){return e.templates.month_date(e.getState().date)},e.date.agenda_start=function(o){return e.date.month_start(new Date(o))};let n=0;e.attachEvent("onTemplatesReady",function(){var o=e.dblclick_dhx_cal_data;e.dblclick_dhx_cal_data=function(){if(this._mode=="agenda")!this.config.readonly&&this.config.dblclick_create&&this.addEventNow();else if(o)return o.apply(this,arguments)};var r=e.render_data;e.render_data=function(d){if(this._mode!="agenda")return r.apply(this,arguments);i()};var _=e.render_view_data;function i(){const d=e.get_visible_events();d.sort(function(u,p){return u.start_date>p.start_date?1:-1});const l={};let h=e.getState().min_date;const f=e.getState().max_date;for(;h.valueOf()<f.valueOf();)l[h.valueOf()]=[],h=e.date.add(h,1,"day");let m=!1;if(d.forEach(u=>{let p=e.date.day_start(new Date(u.start_date));for(;p.valueOf()<u.end_date.valueOf();)l[p.valueOf()]&&(l[p.valueOf()].push(u),m=!0),p=e.date.day_start(e.date.add(p,1,"day"))}),m){let u="";for(let p in l)u+=s(new Date(1*p),l[p]);e._els.dhx_cal_data[0].innerHTML=u}else e._els.dhx_cal_data[0].innerHTML=`<div class="dhx_cal_agenda_no_events">${e.locale.labels.agenda_tab}</div>`;e._els.dhx_cal_data[0].scrollTop=n}function s(d,l){if(!l.length)return"";let h=`
<div class="dhx_cal_agenda_day">
	<div class="dhx_cal_agenda_day_header">${e.templates.agenda_day(d)}</div>
	<div class="dhx_cal_agenda_day_events">
`;return l.forEach(f=>{h+=function(m,u){const p=e.templates.agenda_time(u.start_date,u.end_date,u),b=e.getState().select_id,c=e.templates.event_class(u.start_date,u.end_date,u),g=e.templates.agenda_text(u.start_date,u.end_date,u);return`<div class="dhx_cal_agenda_event_line ${c||""} ${u.id==b?"dhx_cal_agenda_event_line_selected":""}" ${e.config.event_attribute}="${u.id}">
	<div class="dhx_cal_agenda_event_line_marker"></div>
	<div class="dhx_cal_agenda_event_line_time">${p}</div>
	<div class="dhx_cal_agenda_event_line_text">${g}</div>
</div>`}(0,f)}),h+="</div></div>",h}e.render_view_data=function(){return this._mode=="agenda"&&(n=e._els.dhx_cal_data[0].scrollTop,e._els.dhx_cal_data[0].scrollTop=0),_.apply(this,arguments)},e.agenda_view=function(d){d?(e._min_date=e.config.agenda_start||e.date.agenda_start(e._date),e._max_date=e.config.agenda_end||e.date.add_agenda(e._min_date,1),e._cols=null,e._colsS=null,e._table_view=!0,e._getNavDateElement().innerHTML=e.templates.agenda_date(e._date),i()):e._table_view=!1}})}function all_timed(e){e.config.all_timed="short",e.config.all_timed_month=!1;var t=function(i){return!((i.end_date-i.start_date)/36e5>=24)||e._drag_mode=="resize"&&e._drag_id==i.id};e._safe_copy=function(i){var s=null,d=e._copy_event(i);return i.event_pid&&(s=e.getEvent(i.event_pid)),s&&s.isPrototypeOf(i)&&(delete d.event_length,delete d.event_pid,delete d.rec_pattern,delete d.rec_type),d};var a=e._pre_render_events_line,n=e._pre_render_events_table,o=function(i,s){return this._table_view?n.call(this,i,s):a.call(this,i,s)};e._pre_render_events_line=e._pre_render_events_table=function(i,s){if(!this.config.all_timed||this._table_view&&this._mode!="month"||this._mode=="month"&&!this.config.all_timed_month)return o.call(this,i,s);for(var d=0;d<i.length;d++){var l=i[d];if(!l._timed)if(this.config.all_timed!="short"||t(l)){var h=this._safe_copy(l);l._virtual?h._first_chunk=!1:h._first_chunk=!0,h._drag_resize=!1,h._virtual=!0,h.start_date=new Date(h.start_date),p(l)?(h.end_date=b(h.start_date),this.config.last_hour!=24&&(h.end_date=c(h.start_date,this.config.last_hour))):h.end_date=new Date(l.end_date);var f=!1;h.start_date<this._max_date&&h.end_date>this._min_date&&h.start_date<h.end_date&&(i[d]=h,f=!0);var m=this._safe_copy(l);if(m._virtual=!0,m.end_date=new Date(m.end_date),m.start_date<this._min_date?m.start_date=c(this._min_date,this.config.first_hour):m.start_date=c(b(l.start_date),this.config.first_hour),m.start_date<this._max_date&&m.start_date<m.end_date){if(!f){i[d--]=m;continue}i.splice(d+1,0,m),m._last_chunk=!1}else h._last_chunk=!0,h._drag_resize=!0}else this._mode!="month"&&i.splice(d--,1)}var u=this._drag_mode!="move"&&s;return o.call(this,i,u);function p(g){var v=b(g.start_date);return+g.end_date>+v}function b(g){var v=e.date.add(g,1,"day");return v=e.date.date_part(v)}function c(g,v){var y=e.date.date_part(new Date(g));return y.setHours(v),y}};var r=e.get_visible_events;e.get_visible_events=function(i){return this.config.all_timed&&this.config.multi_day?r.call(this,!1):r.call(this,i)},e.attachEvent("onBeforeViewChange",function(i,s,d,l){return e._allow_dnd=d=="day"||d=="week"||e.getView(d),!0}),e._is_main_area_event=function(i){return!!(i._timed||this.config.all_timed===!0||this.config.all_timed=="short"&&t(i))};var _=e.updateEvent;e.updateEvent=function(i){var s,d,l=e.getEvent(i);l&&(s=e.config.all_timed&&!(e.isOneDayEvent(e._events[i])||e.getState().drag_id))&&(d=e.config.update_render,e.config.update_render=!0),_.apply(e,arguments),l&&s&&(e.config.update_render=d)}}function collision(e){var t,a;function n(o){e._get_section_view()&&o&&(t=e.getEvent(o)[e._get_section_property()])}e.config.collision_limit=1,e.attachEvent("onBeforeDrag",function(o){return n(o),!0}),e.attachEvent("onBeforeLightbox",function(o){var r=e.getEvent(o);return a=[r.start_date,r.end_date],n(o),!0}),e.attachEvent("onEventChanged",function(o){if(!o||!e.getEvent(o))return!0;var r=e.getEvent(o);if(!e.checkCollision(r)){if(!a)return!1;r.start_date=a[0],r.end_date=a[1],r._timed=this.isOneDayEvent(r)}return!0}),e.attachEvent("onBeforeEventChanged",function(o,r,_){return e.checkCollision(o)}),e.attachEvent("onEventAdded",function(o,r){e.checkCollision(r)||e.deleteEvent(o)}),e.attachEvent("onEventSave",function(o,r,_){if((r=e._lame_clone(r)).id=o,!r.start_date||!r.end_date){var i=e.getEvent(o);r.start_date=new Date(i.start_date),r.end_date=new Date(i.end_date)}return r.rec_type&&e._roll_back_dates(r),e.checkCollision(r)}),e._check_sections_collision=function(o,r){var _=e._get_section_property();return o[_]==r[_]&&o.id!=r.id},e.checkCollision=function(o){var r=[],_=e.config.collision_limit;if(o.rec_type)for(var i=e.getRecDates(o),s=0;s<i.length;s++)for(var d=e.getEvents(i[s].start_date,i[s].end_date),l=0;l<d.length;l++)(d[l].event_pid||d[l].id)!=o.id&&r.push(d[l]);else{r=e.getEvents(o.start_date,o.end_date);for(var h=0;h<r.length;h++){var f=r[h];if(f.id==o.id||f.event_length&&[f.event_pid,f.event_length].join("#")==o.id){r.splice(h,1);break}}}var m=e._get_section_view(),u=e._get_section_property(),p=!0;if(m){var b=0;for(h=0;h<r.length;h++)r[h].id!=o.id&&this._check_sections_collision(r[h],o)&&b++;b>=_&&(p=!1)}else r.length>=_&&(p=!1);if(!p){var c=!e.callEvent("onEventCollision",[o,r]);return c||(o[u]=t||o[u]),c}return p}}function container_autoresize(e){e.config.container_autoresize=!0,e.config.month_day_min_height=90,e.config.min_grid_size=25,e.config.min_map_size=400;var t=e._pre_render_events,a=!0,n=0,o=0;e._pre_render_events=function(l,h){if(!e.config.container_autoresize||!a)return t.apply(this,arguments);var f=this.xy.bar_height,m=this._colsS.heights,u=this._colsS.heights=[0,0,0,0,0,0,0],p=this._els.dhx_cal_data[0];if(l=this._table_view?this._pre_render_events_table(l,h):this._pre_render_events_line(l,h),this._table_view)if(h)this._colsS.heights=m;else{var b=p.firstChild;const w=b.querySelectorAll(".dhx_cal_month_row");if(w){for(var c=0;c<w.length;c++){if(u[c]++,u[c]*f>this._colsS.height-this.xy.month_head_height){var g=w[c].querySelectorAll(".dhx_cal_month_cell"),v=this._colsS.height-this.xy.month_head_height;1*this.config.max_month_events!==this.config.max_month_events||u[c]<=this.config.max_month_events?v=u[c]*f:(this.config.max_month_events+1)*f>this._colsS.height-this.xy.month_head_height&&(v=(this.config.max_month_events+1)*f),w[c].style.height=v+this.xy.month_head_height+"px";for(var y=0;y<g.length;y++)g[y].childNodes[1].style.height=v+"px";u[c]=(u[c-1]||0)+g[0].offsetHeight}u[c]=(u[c-1]||0)+w[c].querySelectorAll(".dhx_cal_month_cell")[0].offsetHeight}u.unshift(0),b.parentNode.offsetHeight<b.parentNode.scrollHeight&&b._h_fix}else if(l.length||this._els.dhx_multi_day[0].style.visibility!="visible"||(u[0]=-1),l.length||u[0]==-1){var x=(u[0]+1)*f+1;o!=x+1&&(this._obj.style.height=n-o+x-1+"px"),x+="px";const D=this._els.dhx_cal_navline[0].offsetHeight,E=this._els.dhx_cal_header[0].offsetHeight;p.style.height=this._obj.offsetHeight-D-E-(this.xy.margin_top||0)+"px";var k=this._els.dhx_multi_day[0];k.style.height=x,k.style.visibility=u[0]==-1?"hidden":"visible",(k=this._els.dhx_multi_day[1]).style.height=x,k.style.visibility=u[0]==-1?"hidden":"visible",k.style.visibility=="hidden"?k.style.display="none":k.style.display="",k.className=u[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(u[0]+1)*f,u[0]=0}}return l};var r=["dhx_cal_navline","dhx_cal_header","dhx_multi_day","dhx_cal_data"],_=function(l){n=0;for(var h=0;h<r.length;h++){var f=r[h],m=e._els[f]?e._els[f][0]:null,u=0;switch(f){case"dhx_cal_navline":case"dhx_cal_header":u=m.offsetHeight;break;case"dhx_multi_day":u=m?m.offsetHeight-1:0,o=u;break;case"dhx_cal_data":var p=e.getState().mode;if(m.childNodes[1]&&p!="month"){let A=0;for(let M=0;M<m.childNodes.length;M++)m.childNodes[M].offsetHeight>A&&(A=m.childNodes[M].offsetHeight);u=A}else u=Math.max(m.offsetHeight-1,m.scrollHeight);if(p=="month")e.config.month_day_min_height&&!l&&(u=m.querySelectorAll(".dhx_cal_month_row").length*e.config.month_day_min_height),l&&(m.style.height=u+"px");else if(p=="year")u=190*e.config.year_y;else if(p=="agenda"){if(u=0,m.childNodes&&m.childNodes.length)for(var b=0;b<m.childNodes.length;b++)u+=m.childNodes[b].offsetHeight;u+2<e.config.min_grid_size?u=e.config.min_grid_size:u+=2}else if(p=="week_agenda"){for(var c,g,v=e.xy.week_agenda_scale_height+e.config.min_grid_size,y=0;y<m.childNodes.length;y++)for(g=m.childNodes[y],b=0;b<g.childNodes.length;b++){for(var x=0,k=g.childNodes[b].childNodes[1],w=0;w<k.childNodes.length;w++)x+=k.childNodes[w].offsetHeight;c=x+e.xy.week_agenda_scale_height,(c=y!=1||b!=2&&b!=3?c:2*c)>v&&(v=c)}u=3*v}else if(p=="map"){u=0;var D=m.querySelectorAll(".dhx_map_line");for(b=0;b<D.length;b++)u+=D[b].offsetHeight;u+2<e.config.min_map_size?u=e.config.min_map_size:u+=2}else if(e._gridView)if(u=0,m.childNodes[1].childNodes[0].childNodes&&m.childNodes[1].childNodes[0].childNodes.length){for(D=m.childNodes[1].childNodes[0].childNodes[0].childNodes,b=0;b<D.length;b++)u+=D[b].offsetHeight;(u+=2)<e.config.min_grid_size&&(u=e.config.min_grid_size)}else u=e.config.min_grid_size;if(e.matrix&&e.matrix[p]){if(l)u+=0,m.style.height=u+"px";else{u=0;for(var E=e.matrix[p],S=E.y_unit,N=0;N<S.length;N++)u+=E.getSectionHeight(S[N].key);e.$container.clientWidth!=e.$container.scrollWidth&&(u+=d())}u-=1}(p=="day"||p=="week"||e._props&&e._props[p])&&(u+=2)}n+=u+=1}e._obj.style.height=n+"px",l||e.updateView()};function i(){a=!1,e.callEvent("onAfterSchedulerResize",[]),a=!0}var s=function(){if(!e.config.container_autoresize||!a)return!0;var l=e.getState().mode;if(!l)return!0;var h=window.requestAnimationFrame||window.setTimeout,f=document.documentElement.scrollTop;h(function(){!e.$destroyed&&e.$initialized&&_()}),e.matrix&&e.matrix[l]||l=="month"?h(function(){!e.$destroyed&&e.$initialized&&(_(!0),document.documentElement.scrollTop=f,i())},1):i()};function d(){var l=document.createElement("div");l.style.cssText="visibility:hidden;position:absolute;left:-1000px;width:100px;padding:0px;margin:0px;height:110px;min-height:100px;overflow-y:scroll;",document.body.appendChild(l);var h=l.offsetWidth-l.clientWidth;return document.body.removeChild(l),h}e.attachEvent("onBeforeViewChange",function(){var l=e.config.container_autoresize;if(e.xy.$original_scroll_width||(e.xy.$original_scroll_width=e.xy.scroll_width),e.xy.scroll_width=l?0:e.xy.$original_scroll_width,e.matrix)for(var h in e.matrix){var f=e.matrix[h];f.$original_section_autoheight||(f.$original_section_autoheight=f.section_autoheight),f.section_autoheight=!l&&f.$original_section_autoheight}return!0}),e.attachEvent("onViewChange",s),e.attachEvent("onXLE",s),e.attachEvent("onEventChanged",s),e.attachEvent("onEventCreated",s),e.attachEvent("onEventAdded",s),e.attachEvent("onEventDeleted",s),e.attachEvent("onAfterSchedulerResize",s),e.attachEvent("onClearAll",s),e.attachEvent("onBeforeExpand",function(){return a=!1,!0}),e.attachEvent("onBeforeCollapse",function(){return a=!0,!0})}function cookie(e){function t(o){return(o._obj.id||"scheduler")+"_settings"}var a=!0;e.attachEvent("onBeforeViewChange",function(o,r,_,i){if(a&&e._get_url_nav){var s=e._get_url_nav();(s.date||s.mode||s.event)&&(a=!1)}var d=t(e);if(a){a=!1;var l=function(f){var m=f+"=";if(document.cookie.length>0){var u=document.cookie.indexOf(m);if(u!=-1){u+=m.length;var p=document.cookie.indexOf(";",u);return p==-1&&(p=document.cookie.length),document.cookie.substring(u,p)}}return""}(d);if(l){e._min_date||(e._min_date=i),(l=unescape(l).split("@"))[0]=this._helpers.parseDate(l[0]);var h=this.isViewExists(l[1])?l[1]:_;return i=isNaN(+l[0])?i:l[0],window.setTimeout(function(){e.$destroyed||e.setCurrentView(i,h)},1),!1}}return!0}),e.attachEvent("onViewChange",function(o,r){var _,i,s=t(e),d=escape(this._helpers.formatDate(r)+"@"+o);i=s+"="+d+((_="expires=Sun, 31 Jan 9999 22:00:00 GMT")?"; "+_:""),document.cookie=i});var n=e._load;e._load=function(){var o=arguments;if(e._date)n.apply(this,o);else{var r=this;window.setTimeout(function(){n.apply(r,o)},1)}}}function extend$1(e){e._inited_multisection_copies||(e.attachEvent("onEventIdChange",function(t,a){var n=this._multisection_copies;if(n&&n[t]&&!n[a]){var o=n[t];delete n[t],n[a]=o}}),e._inited_multisection_copies=!0),e._register_copies_array=function(t){for(var a=0;a<t.length;a++)this._register_copy(t[a])},e._register_copy=function(t){if(this._multisection_copies){this._multisection_copies[t.id]||(this._multisection_copies[t.id]={});var a=t[this._get_section_property()];this._multisection_copies[t.id][a]=t}},e._get_copied_event=function(t,a){if(!this._multisection_copies[t])return null;if(this._multisection_copies[t][a])return this._multisection_copies[t][a];var n=this._multisection_copies[t];if(e._drag_event&&e._drag_event._orig_section&&n[e._drag_event._orig_section])return n[e._drag_event._orig_section];var o=1/0,r=null;for(var _ in n)n[_]._sorder<o&&(r=n[_],o=n[_]._sorder);return r},e._clear_copied_events=function(){this._multisection_copies={}},e._restore_render_flags=function(t){for(var a=this._get_section_property(),n=0;n<t.length;n++){var o=t[n],r=e._get_copied_event(o.id,o[a]);if(r)for(var _ in r)_.indexOf("_")===0&&(o[_]=r[_])}}}function daytimeline(e){extend$1(e);var t=e.createTimelineView;e.createTimelineView=function(a){if(a.render=="days"){var n=a.name,o=a.y_property="timeline-week"+n;a.y_unit=[],a.render="bar",a.days=a.days||7,t.call(this,a),e.templates[n+"_scalex_class"]=function(){},e.templates[n+"_scaley_class"]=function(){},e.templates[n+"_scale_label"]=function(y,x,k){return e.templates.day_date(x)},e.date[n+"_start"]=function(y){return y=e.date.week_start(y),y=e.date.add(y,a.x_step*a.x_start,a.x_unit)},e.date["add_"+n]=function(y,x){return e.date.add(y,x*a.days,"day")};var r=e._renderMatrix;e._renderMatrix=function(y,x){y&&function(){var k=new Date(e.getState().date),w=e.date[n+"_start"](k);w=e.date.date_part(w);var D=[],E=e.matrix[n];E.y_unit=D,E.order={};for(var S=0;S<a.days;S++)D.push({key:+w,label:w}),E.order[E.y_unit[S].key]=S,w=e.date.add(w,1,"day")}(),r.apply(this,arguments)};var _=e.checkCollision;e.checkCollision=function(y){return y[o]&&delete(y=function(x){var k={};for(var w in x)k[w]=x[w];return k}(y))[o],_.apply(e,[y])},e.attachEvent("onBeforeDrag",function(y,x,k){var w=k.target||k.srcElement,D=e._getClassName(w);if(x=="resize")D.indexOf("dhx_event_resize_end")<0?e._w_line_drag_from_start=!0:e._w_line_drag_from_start=!1;else if(x=="move"&&D.indexOf("no_drag_move")>=0)return!1;return!0});var i=e["mouse_"+n];e["mouse_"+n]=function(y){var x;this._drag_event&&(x=this._drag_event._move_delta);var k=e.matrix[this._mode];if(k.scrollable&&!y.converted&&(y.converted=1,y.x-=-k._x_scroll,y.y+=k._y_scroll),x===void 0&&e._drag_mode=="move"){var w={y:y.y};e._resolve_timeline_section(k,w);var D=y.x-k.dx,E=new Date(w.section);g(e._timeline_drag_date(k,D),E);var S=e._drag_event,N=this.getEvent(this._drag_id);N&&(S._move_delta=(N.start_date-E)/6e4,this.config.preserve_length&&y._ignores&&(S._move_delta=this._get_real_event_length(N.start_date,E,k),S._event_length=this._get_real_event_length(N.start_date,N.end_date,k)))}if(y=i.apply(e,arguments),e._drag_mode&&e._drag_mode!="move"){var A=null;A=e._drag_event&&e._drag_event["timeline-week"+n]?new Date(e._drag_event["timeline-week"+n]):new Date(y.section),y.y+=Math.round((A-e.date.date_part(new Date(e._min_date)))/(6e4*this.config.time_step)),e._drag_mode=="resize"&&(y.resize_from_start=e._w_line_drag_from_start)}else if(e._drag_event){var M=Math.floor(Math.abs(y.y/(1440/e.config.time_step)));M*=y.y>0?1:-1,y.y=y.y%(1440/e.config.time_step);var T=e.date.date_part(new Date(e._min_date));T.valueOf()!=new Date(y.section).valueOf()&&(y.x=Math.floor((y.section-T)/864e5),y.x+=M)}return y},e.attachEvent("onEventCreated",function(y,x){return e._events[y]&&delete e._events[y][o],!0}),e.attachEvent("onBeforeEventChanged",function(y,x,k,w){return e._events[y.id]&&delete e._events[y.id][o],!0});var s=e._update_timeline_section;e._update_timeline_section=function(y){var x,k;this._mode==n&&(x=y.event)&&(k=e._get_copied_event(x.id,e.date.day_start(new Date(x.start_date.valueOf()))))&&(y.event._sorder=k._sorder,y.event._count=k._count),s.apply(this,arguments),x&&k&&(k._count=x._count,k._sorder=x._sorder)};var d=e.render_view_data;e.render_view_data=function(y,x){return this._mode==n&&y&&(y=u(y),e._restore_render_flags(y)),d.apply(e,[y,x])};var l=e.get_visible_events;e.get_visible_events=function(){if(this._mode==n){this._clear_copied_events(),e._max_date=e.date.date_part(e.date.add(e._min_date,a.days,"day"));var y=l.apply(e,arguments);return y=u(y),e._register_copies_array(y),y}return l.apply(e,arguments)};var h=e.addEventNow;e.addEventNow=function(y){if(e.getState().mode==n)if(y[o]){var x=new Date(y[o]);m(x,y.start_date),m(x,y.end_date)}else{var k=new Date(y.start_date);y[o]=+e.date.date_part(k)}return h.apply(e,arguments)};var f=e._render_marked_timespan;e._render_marked_timespan=function(){if(e._mode!=n)return f.apply(this,arguments)}}else t.apply(this,arguments);function m(y,x){x.setDate(1),x.setFullYear(y.getFullYear()),x.setMonth(y.getMonth()),x.setDate(y.getDate())}function u(y){for(var x=[],k=0;k<y.length;k++){var w=b(y[k]);if(e.isOneDayEvent(w))c(w),x.push(w);else{for(var D=new Date(Math.min(+w.end_date,+e._max_date)),E=new Date(Math.max(+w.start_date,+e._min_date)),S=[];+E<+D;){var N=b(w);N.start_date=E,N.end_date=new Date(Math.min(+v(N.start_date),+D)),E=v(E),c(N),x.push(N),S.push(N)}p(S,w)}}return x}function p(y,x){for(var k=!1,w=!1,D=0,E=y.length;D<E;D++){var S=y[D];k=+S._w_start_date==+x.start_date,w=+S._w_end_date==+x.end_date,S._no_resize_start=S._no_resize_end=!0,k&&(S._no_resize_start=!1),w&&(S._no_resize_end=!1)}}function b(y){var x=e.getEvent(y.event_pid);return x&&x.isPrototypeOf(y)?(delete(y=e._copy_event(y)).event_length,delete y.event_pid,delete y.rec_pattern,delete y.rec_type):y=e._lame_clone(y),y}function c(y){if(!y._w_start_date||!y._w_end_date){var x=e.date,k=y._w_start_date=new Date(y.start_date),w=y._w_end_date=new Date(y.end_date);y[o]=+x.date_part(y.start_date),y._count||(y._count=1),y._sorder||(y._sorder=0);var D=w-k;y.start_date=new Date(e._min_date),g(k,y.start_date),y.end_date=new Date(+y.start_date+D),k.getTimezoneOffset()!=w.getTimezoneOffset()&&(y.end_date=new Date(y.end_date.valueOf()+6e4*(k.getTimezoneOffset()-w.getTimezoneOffset())))}}function g(y,x){x.setMinutes(y.getMinutes()),x.setHours(y.getHours())}function v(y){var x=e.date.add(y,1,"day");return x=e.date.date_part(x)}}}const externalDrag={from_scheduler:null,to_scheduler:null,drag_data:null,drag_placeholder:null,delete_dnd_holder:function(){var e=this.drag_placeholder;e&&(e.parentNode&&e.parentNode.removeChild(e),document.body.className=document.body.className.replace(" dhx_no_select",""),this.drag_placeholder=null)},copy_event_node:function(e,t){for(var a=null,n=0;n<t._rendered.length;n++){var o=t._rendered[n];if(o.getAttribute(t.config.event_attribute)==e.id||o.getAttribute(t.config.event_attribute)==t._drag_id){(a=o.cloneNode(!0)).style.position=a.style.top=a.style.left="";break}}return a||document.createElement("div")},create_dnd_holder:function(e,t){if(this.drag_placeholder)return this.drag_placeholder;var a=document.createElement("div"),n=t.templates.event_outside(e.start_date,e.end_date,e);return n?a.innerHTML=n:a.appendChild(this.copy_event_node(e,t)),a.className="dhx_drag_placeholder",a.style.position="absolute",this.drag_placeholder=a,document.body.appendChild(a),document.body.className+=" dhx_no_select",a},move_dnd_holder:function(e){var t={x:e.clientX,y:e.clientY};if(this.create_dnd_holder(this.drag_data.ev,this.from_scheduler),this.drag_placeholder){var a=t.x,n=t.y,o=document.documentElement,r=document.body,_=this.drag_placeholder;_.style.left=10+a+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o.clientLeft||0)+"px",_.style.top=10+n+(o&&o.scrollTop||r&&r.scrollTop||0)-(o.clientTop||0)+"px"}},clear_scheduler_dnd:function(e){e._drag_id=e._drag_pos=e._drag_mode=e._drag_event=e._new_event=null},stop_drag:function(e){e&&this.clear_scheduler_dnd(e),this.delete_dnd_holder(),this.drag_data=null},inject_into_scheduler:function(e,t,a){e._count=1,e._sorder=0,e.event_pid&&e.event_pid!="0"&&(e.event_pid=null,e.rec_type=e.rec_pattern="",e.event_length=0),t._drag_event=e,t._events[e.id]=e,t._drag_id=e.id,t._drag_mode="move",a&&t._on_mouse_move(a)},start_dnd:function(e){if(e.config.drag_out){this.from_scheduler=e,this.to_scheduler=e;var t=this.drag_data={};t.ev=e._drag_event,t.orig_id=e._drag_event.id}},land_into_scheduler:function(e,t){if(!e.config.drag_in)return this.move_dnd_holder(t),!1;var a=this.drag_data,n=e._lame_clone(a.ev);if(e!=this.from_scheduler){n.id=e.uid();var o=n.end_date-n.start_date;n.start_date=new Date(e.getState().min_date),n.end_date=new Date(n.start_date.valueOf()+o)}else n.id=this.drag_data.orig_id,n._dhx_changed=!0;return this.drag_data.target_id=n.id,!!e.callEvent("onBeforeEventDragIn",[n.id,n,t])&&(this.to_scheduler=e,this.inject_into_scheduler(n,e,t),this.delete_dnd_holder(),e.updateView(),e.callEvent("onEventDragIn",[n.id,n,t]),!0)},drag_from_scheduler:function(e,t){if(this.drag_data&&e._drag_id&&e.config.drag_out){if(!e.callEvent("onBeforeEventDragOut",[e._drag_id,e._drag_event,t]))return!1;this.to_scheduler==e&&(this.to_scheduler=null),this.create_dnd_holder(this.drag_data.ev,e);var a=e._drag_id;return this.drag_data.target_id=null,delete e._events[a],this.clear_scheduler_dnd(e),e.updateEvent(a),e.callEvent("onEventDragOut",[a,this.drag_data.ev,t]),!0}return!1},reset_event:function(e,t){this.inject_into_scheduler(e,t),this.stop_drag(t),t.updateView()},move_permanently:function(e,t,a,n){n.callEvent("onEventAdded",[t.id,t]),this.inject_into_scheduler(e,a),this.stop_drag(a),e.event_pid&&e.event_pid!="0"?(a.callEvent("onConfirmedBeforeEventDelete",[e.id]),a.updateEvent(t.event_pid)):a.deleteEvent(e.id),a.updateView(),n.updateView()}};let outerDragHandlerAttached=!1;const connectedSchedulers=[];function attachOuterDragHandler(e){e.event(document.body,"mousemove",function(t){var a=externalDrag,n=a.target_scheduler;if(n)if(a.from_scheduler){if(!n._drag_id){var o=a.to_scheduler;o&&!a.drag_from_scheduler(o,t)||a.land_into_scheduler(n,t)}}else n.getState().drag_mode=="move"&&n.config.drag_out&&a.start_dnd(n);else a.from_scheduler&&(a.to_scheduler?a.drag_from_scheduler(a.to_scheduler,t):a.move_dnd_holder(t));a.target_scheduler=null}),e.event(document.body,"mouseup",function(t){var a=externalDrag,n=a.from_scheduler,o=a.to_scheduler;if(n)if(o&&n==o)n.updateEvent(a.drag_data.target_id);else if(o&&n!==o){var r=a.drag_data.ev,_=o.getEvent(a.drag_data.target_id);n.callEvent("onEventDropOut",[r.id,r,o,t])?a.move_permanently(r,_,n,o):a.reset_event(r,n)}else r=a.drag_data.ev,n.callEvent("onEventDropOut",[r.id,r,null,t])&&a.reset_event(r,n);a.stop_drag(),a.current_scheduler=a.from_scheduler=a.to_scheduler=null})}function processScheduler(e){e.attachEvent("onSchedulerReady",function(){attachOuterDragHandler(e),outerDragHandlerAttached=!0},{once:!0}),e.attachEvent("onDestroy",function(){outerDragHandlerAttached=!1;const t=connectedSchedulers.unshift();t&&processScheduler(t)},{once:!0})}function drag_between(e){window.Scheduler&&window.Scheduler.plugin&&(window.Scheduler._outer_drag=externalDrag),connectedSchedulers.push(e),outerDragHandlerAttached||processScheduler(e),e.config.drag_in=!0,e.config.drag_out=!0,e.templates.event_outside=function(a,n,o){};var t=externalDrag;e.attachEvent("onTemplatesReady",function(){e.event(e._obj,"mousemove",function(a){t.target_scheduler=e}),e.event(e._obj,"mouseup",function(a){t.target_scheduler=e})})}function editors(e){e.form_blocks.combo={render:function(t){t.cached_options||(t.cached_options={});var a="";return a+="<div class='"+t.type+"' ></div>"},set_value:function(t,a,n,o){(function(){m();var f=e.attachEvent("onAfterLightbox",function(){m(),e.detachEvent(f)});function m(){if(t._combo&&t._combo.DOMParent){var u=t._combo;u.unload?u.unload():u.destructor&&u.destructor(),u.DOMParent=u.DOMelem=null}}})(),window.dhx_globalImgPath=o.image_path||"/",t._combo=new dhtmlXCombo(t,o.name,t.offsetWidth-8),o.onchange&&t._combo.attachEvent("onChange",o.onchange),o.options_height&&t._combo.setOptionHeight(o.options_height);var r=t._combo;if(r.enableFilteringMode(o.filtering,o.script_path||null,!!o.cache),o.script_path){var _=n[o.map_to];_?o.cached_options[_]?(r.addOption(_,o.cached_options[_]),r.disable(1),r.selectOption(0),r.disable(0)):e.ajax.get(o.script_path+"?id="+_+"&uid="+e.uid(),function(f){var m,u=f.xmlDoc.responseText;try{m=JSON.parse(u).options[0].text}catch{m=e.ajax.xpath("//option",f.xmlDoc)[0].childNodes[0].nodeValue}o.cached_options[_]=m,r.addOption(_,m),r.disable(1),r.selectOption(0),r.disable(0)}):r.setComboValue("")}else{for(var i=[],s=0;s<o.options.length;s++){var d=o.options[s],l=[d.key,d.label,d.css];i.push(l)}if(r.addOption(i),n[o.map_to]){var h=r.getIndexByValue(n[o.map_to]);r.selectOption(h)}}},get_value:function(t,a,n){var o=t._combo.getSelectedValue();return n.script_path&&(n.cached_options[o]=t._combo.getSelectedText()),o},focus:function(t){}},e.form_blocks.radio={render:function(t){var a="";a+=`<div class='dhx_cal_ltext dhx_cal_radio ${t.vertical?"dhx_cal_radio_vertical":""}' style='max-height:${t.height}px;'>`;for(var n=0;n<t.options.length;n++){var o=e.uid();a+="<label class='dhx_cal_radio_item' for='"+o+"'><input id='"+o+"' type='radio' name='"+t.name+"' value='"+t.options[n].key+"'><span> "+t.options[n].label+"</span></label>"}return a+="</div>"},set_value:function(t,a,n,o){for(var r=t.getElementsByTagName("input"),_=0;_<r.length;_++){r[_].checked=!1;var i=n[o.map_to]||a;r[_].value==i&&(r[_].checked=!0)}},get_value:function(t,a,n){for(var o=t.getElementsByTagName("input"),r=0;r<o.length;r++)if(o[r].checked)return o[r].value},focus:function(t){}},e.form_blocks.checkbox={render:function(t){return e.config.wide_form?'<div class="dhx_cal_wide_checkbox"></div>':""},set_value:function(t,a,n,o){t=e._lightbox.querySelector(`#${o.id}`);var r=e.uid(),_=o.checked_value!==void 0?a==o.checked_value:!!a;t.className+=" dhx_cal_checkbox";var i="<input id='"+r+"' type='checkbox' value='true' name='"+o.name+"'"+(_?"checked='true'":"")+"'>",s="<label for='"+r+"'>"+(e.locale.labels["section_"+o.name]||o.name)+"</label>";if(e.config.wide_form?(t.innerHTML=s,t.nextSibling.innerHTML=i):t.innerHTML=i+s,o.handler){var d=t.getElementsByTagName("input")[0];if(d.$_eventAttached)return;d.$_eventAttached=!0,e.event(d,"click",o.handler)}},get_value:function(t,a,n){var o=(t=e._lightbox.querySelector(`#${n.id}`)).getElementsByTagName("input")[0];return o||(o=t.nextSibling.getElementsByTagName("input")[0]),o.checked?n.checked_value||!0:n.unchecked_value||!1},focus:function(t){}}}function expand(e){e.ext.fullscreen={toggleIcon:null},e.expand=function(){if(e.callEvent("onBeforeExpand",[])){var t=e._obj;do t._position=t.style.position||"",t.style.position="static";while((t=t.parentNode)&&t.style);(t=e._obj).style.position="absolute",t._width=t.style.width,t._height=t.style.height,t.style.width=t.style.height="100%",t.style.top=t.style.left="0px";var a=document.body;a.scrollTop=0,(a=a.parentNode)&&(a.scrollTop=0),document.body._overflow=document.body.style.overflow||"",document.body.style.overflow="hidden",e._maximize(),e.callEvent("onExpand",[])}},e.collapse=function(){if(e.callEvent("onBeforeCollapse",[])){var t=e._obj;do t.style.position=t._position;while((t=t.parentNode)&&t.style);(t=e._obj).style.width=t._width,t.style.height=t._height,document.body.style.overflow=document.body._overflow,e._maximize(),e.callEvent("onCollapse",[])}},e.attachEvent("onTemplatesReady",function(){var t=document.createElement("div");t.className="dhx_expand_icon",e.ext.fullscreen.toggleIcon=t,t.innerHTML=`<svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
	<g>
	<line x1="0.5" y1="5" x2="0.5" y2="3.0598e-08" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line y1="0.5" x2="5" y2="0.5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="0.5" y1="11" x2="0.5" y2="16" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line y1="15.5" x2="5" y2="15.5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="11" y1="0.5" x2="16" y2="0.5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="15.5" y1="2.18557e-08" x2="15.5" y2="5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="11" y1="15.5" x2="16" y2="15.5" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	<line x1="15.5" y1="16" x2="15.5" y2="11" stroke="var(--dhx-scheduler-base-colors-icons)"/>
	</g>
	</svg>
	`,e._obj.appendChild(t),e.event(t,"click",function(){e.expanded?e.collapse():e.expand()})}),e._maximize=function(){this.expanded=!this.expanded,this.expanded?this.ext.fullscreen.toggleIcon.classList.add("dhx_expand_icon--expanded"):this.ext.fullscreen.toggleIcon.classList.remove("dhx_expand_icon--expanded");for(var t=["left","top"],a=0;a<t.length;a++){var n=e["_prev_margin_"+t[a]];e.xy["margin_"+t[a]]?(e["_prev_margin_"+t[a]]=e.xy["margin_"+t[a]],e.xy["margin_"+t[a]]=0):n&&(e.xy["margin_"+t[a]]=e["_prev_margin_"+t[a]],delete e["_prev_margin_"+t[a]])}e.setCurrentView()}}function grid_view(e){e._grid={names:{},sort_rules:{int:function(t,a,n){return 1*n(t)<1*n(a)?1:-1},str:function(t,a,n){return n(t)<n(a)?1:-1},date:function(t,a,n){return new Date(n(t))<new Date(n(a))?1:-1}},_getObjName:function(t){return"grid_"+t},_getViewName:function(t){return t.replace(/^grid_/,"")}},e.createGridView=function(t){var a=t.name||"grid",n=e._grid._getObjName(a);function o(i){return!(i!==void 0&&(1*i!=i||i<0))}e._grid.names[a]=a,e.config[a+"_start"]=t.from||new Date(0),e.config[a+"_end"]=t.to||new Date(9999,1,1),e[n]=t,e[n].defPadding=8,e[n].columns=e[n].fields,e[n].unit=t.unit||"month",e[n].step=t.step||1,delete e[n].fields;for(var r=e[n].columns,_=0;_<r.length;_++)o(r[_].width)&&(r[_].initialWidth=r[_].width),o(r[_].paddingLeft)||delete r[_].paddingLeft,o(r[_].paddingRight)||delete r[_].paddingRight;e[n].select=t.select===void 0||t.select,e.locale.labels[a+"_tab"]===void 0&&(e.locale.labels[a+"_tab"]=e[n].label||e.locale.labels.grid_tab),e[n]._selected_divs=[],e.date[a+"_start"]=function(i){return e.date[t.unit+"_start"]?e.date[t.unit+"_start"](i):i},e.date["add_"+a]=function(i,s){return e.date.add(i,s*e[n].step,e[n].unit)},e.templates[a+"_date"]=function(i,s){return e.config.rtl?e.templates.day_date(s)+" - "+e.templates.day_date(i):e.templates.day_date(i)+" - "+e.templates.day_date(s)},e.templates[a+"_full_date"]=function(i,s,d){return e.isOneDayEvent(d)?this[a+"_single_date"](i):e.config.rtl?e.templates.day_date(s)+" &ndash; "+e.templates.day_date(i):e.templates.day_date(i)+" &ndash; "+e.templates.day_date(s)},e.templates[a+"_single_date"]=function(i){return e.templates.day_date(i)+" "+this.event_date(i)},e.templates[a+"_field"]=function(i,s){return s[i]},e.attachEvent("onTemplatesReady",function(){e.attachEvent("onEventSelected",function(d){if(this._mode==a&&e[n].select)return e._grid.selectEvent(d,a),!1}),e.attachEvent("onEventUnselected",function(d){this._mode==a&&e[n].select&&e._grid.unselectEvent("",a)});var i=e.render_data;e.render_data=function(d){if(this._mode!=a)return i.apply(this,arguments);e._grid._fill_grid_tab(n)};var s=e.render_view_data;e.render_view_data=function(){var d=e._els.dhx_cal_data[0].lastChild;return this._mode==a&&d&&(e._grid._gridScrollTop=d.scrollTop),s.apply(this,arguments)}}),e[a+"_view"]=function(i){if(e._grid._sort_marker=null,delete e._gridView,e._grid._gridScrollTop=0,e._rendered=[],e[n]._selected_divs=[],i){var s=null,d=null;e[n].paging?(s=e.date[a+"_start"](new Date(e._date)),d=e.date["add_"+a](s,1)):(s=e.config[a+"_start"],d=e.config[a+"_end"]),e._min_date=s,e._max_date=d,e._grid.set_full_view(n);var l="";+s>+new Date(0)&&+d<+new Date(9999,1,1)&&(l=e.templates[a+"_date"](s,d));var h=e._getNavDateElement();h&&(h.innerHTML=l),e._gridView=n}}},e.dblclick_dhx_grid_area=function(){!this.config.readonly&&this.config.dblclick_create&&this.addEventNow()},e._click.dhx_cal_header&&(e._old_header_click=e._click.dhx_cal_header),e._click.dhx_cal_header=function(t){if(e._gridView){var a=t||window.event,n=e._grid._get_target_column(a,e._gridView);e._grid._toggle_sort_state(e._gridView,n.id),e.clear_view(),e._grid._fill_grid_tab(e._gridView)}else if(e._old_header_click)return e._old_header_click.apply(this,arguments)},e._grid.selectEvent=function(t,a){if(e.callEvent("onBeforeRowSelect",[t])){var n=e._grid._getObjName(a);e.for_rendered(t,function(o){o.className+=" dhx_grid_event_selected",e[n]._selected_divs.push(o)})}},e._grid._unselectDiv=function(t){t.className=t.className.replace(/ dhx_grid_event_selected/,"")},e._grid.unselectEvent=function(t,a){var n=e._grid._getObjName(a);if(n&&e[n]._selected_divs)if(t){for(o=0;o<e[n]._selected_divs.length;o++)if(e[n]._selected_divs[o].getAttribute(e.config.event_attribute)==t){e._grid._unselectDiv(e[n]._selected_divs[o]),e[n]._selected_divs.slice(o,1);break}}else{for(var o=0;o<e[n]._selected_divs.length;o++)e._grid._unselectDiv(e[n]._selected_divs[o]);e[n]._selected_divs=[]}},e._grid._get_target_column=function(t,a){var n=t.originalTarget||t.srcElement;e._getClassName(n)=="dhx_grid_view_sort"&&(n=n.parentNode);for(var o=0,r=0;r<n.parentNode.childNodes.length;r++)if(n.parentNode.childNodes[r]==n){o=r;break}return e[a].columns[o]},e._grid._get_sort_state=function(t){return e[t].sort},e._grid._toggle_sort_state=function(t,a){var n=this._get_sort_state(t),o=e[t];n&&n.column==a?n.direction=n.direction=="asc"?"desc":"asc":o.sort={column:a,direction:"desc"}},e._grid._get_sort_value_for_column=function(t){var a=null;if(t.template){var n=t.template;a=function(r){return n(r.start_date,r.end_date,r)}}else{var o=t.id;o=="date"&&(o="start_date"),a=function(r){return r[o]}}return a},e._grid.draw_sort_marker=function(t,a){if(e._grid._sort_marker&&(e._grid._sort_marker.className=e._grid._sort_marker.className.replace(/( )?dhx_grid_sort_(asc|desc)/,""),e._grid._sort_marker.removeChild(e._grid._sort_marker.lastChild)),a){var n=e._grid._get_column_node(t,a.column);n.className+=" dhx_grid_sort_"+a.direction,e._grid._sort_marker=n;var o="<div class='dhx_grid_view_sort' style='left:"+(+n.style.width.replace("px","")-15+n.offsetLeft)+"px'>&nbsp;</div>";n.innerHTML+=o}},e._grid.sort_grid=function(t){t=t||{direction:"desc",value:function(n){return n.start_date},rule:e._grid.sort_rules.date};var a=e.get_visible_events();return a.sort(function(n,o){return t.rule(n,o,t.value)}),t.direction=="asc"&&(a=a.reverse()),a},e._grid.set_full_view=function(t){if(t){var a=e._grid._print_grid_header(t);e._els.dhx_cal_header[0].innerHTML=a,e._table_view=!0,e.set_sizes()}},e._grid._calcPadding=function(t,a){return(t.paddingLeft!==void 0?1*t.paddingLeft:e[a].defPadding)+(t.paddingRight!==void 0?1*t.paddingRight:e[a].defPadding)},e._grid._getStyles=function(t,a){for(var n=[],o="",r=0;a[r];r++)switch(o=a[r]+":",a[r]){case"text-align":t.align&&n.push(o+t.align);break;case"vertical-align":t.valign&&n.push(o+t.valign);break;case"padding-left":t.paddingLeft!==void 0&&n.push(o+(t.paddingLeft||"0")+"px");break;case"padding-right":t.paddingRight!==void 0&&n.push(o+(t.paddingRight||"0")+"px")}return n},e._grid._get_column_node=function(t,a){for(var n=-1,o=0;o<t.length;o++)if(t[o].id==a){n=o;break}return n<0?null:e._obj.querySelectorAll(".dhx_grid_line > div")[n]},e._grid._get_sort_rule=function(t){var a,n=e[t],o=this._get_sort_state(t);if(o){for(var r,_=0;_<n.columns.length;_++)if(n.columns[_].id==o.column){r=n.columns[_];break}if(r){var i=e._grid._get_sort_value_for_column(r),s=r.sort;typeof s!="function"&&(s=e._grid.sort_rules[s]||e._grid.sort_rules.str),a={direction:o.direction,rule:s,value:i}}}return a},e._grid._fill_grid_tab=function(t){var a=e[t],n=this._get_sort_state(t),o=this._get_sort_rule(t);o&&e._grid.draw_sort_marker(a.columns,n);for(var r=e._grid.sort_grid(o),_=e[t].columns,i="<div>",s=-1,d=0;d<_.length;d++)s+=_[d].width,d<_.length-1&&(i+="<div class='dhx_grid_v_border' style='"+(e.config.rtl?"right":"left")+":"+s+"px'></div>");for(i+="</div>",i+="<div class='dhx_grid_area'><table "+e._waiAria.gridAttrString()+">",d=0;d<r.length;d++)i+=e._grid._print_event_row(r[d],t);i+="</table></div>",e._els.dhx_cal_data[0].innerHTML=i,e._els.dhx_cal_data[0].lastChild.scrollTop=e._grid._gridScrollTop||0;var l=e._els.dhx_cal_data[0].getElementsByTagName("tr");for(e._rendered=[],d=0;d<l.length;d++)e._rendered[d]=l[d]},e._grid._getCellContent=function(t,a){var n=e.getState().mode;return a.template?a.template(t.start_date,t.end_date,t):a.id=="date"?e.templates[n+"_full_date"](t.start_date,t.end_date,t):a.id=="start_date"||a.id=="end_date"?e.templates[n+"_single_date"](t[a.id]):e.templates[n+"_field"](a.id,t)},e._grid._print_event_row=function(t,a){var n=[];t.color&&n.push("--dhx-scheduler-event-background:"+t.color),t.textColor&&n.push("--dhx-scheduler-event-color:"+t.textColor),t._text_style&&n.push(t._text_style),e[a].rowHeight&&n.push("height:"+e[a].rowHeight+"px");var o="";n.length&&(o="style='"+n.join(";")+"'");for(var r=e[a].columns,_=e.templates.event_class(t.start_date,t.end_date,t),i="<tr "+e._waiAria.gridRowAttrString(t)+" class='dhx_grid_event"+(_?" "+_:"")+"' event_id='"+t.id+"' "+e.config.event_attribute+"='"+t.id+"' "+o+">",s=["text-align","vertical-align","padding-left","padding-right"],d=0;d<r.length;d++){var l=e._grid._getCellContent(t,r[d]),h=e._waiAria.gridCellAttrString(t,r[d],l),f=e._grid._getStyles(r[d],s),m=r[d].css?' class="'+r[d].css+'"':"";i+="<td "+h+" style='width:"+r[d].width+"px;"+f.join(";")+"' "+m+">"+l+"</td>"}return i+="<td class='dhx_grid_dummy'></td></tr>"},e._grid._print_grid_header=function(t){for(var a="<div class='dhx_grid_line'>",n=e[t].columns,o=[],r=n.length,_=e._obj.clientWidth-2*n.length-20,i=0;i<n.length;i++){var s=1*n[i].initialWidth;isNaN(s)||n[i].initialWidth===""||n[i].initialWidth===null||typeof n[i].initialWidth=="boolean"?o[i]=null:(r--,_-=s,o[i]=s)}for(var d=Math.floor(_/r),l=["text-align","padding-left","padding-right"],h=0;h<n.length;h++){var f=o[h]?o[h]:d;n[h].width=f;var m=e._grid._getStyles(n[h],l);a+="<div class='dhx_grid_column_label' style='line-height: "+e.xy.scale_height+"px;width:"+n[h].width+"px;"+m.join(";")+"'>"+(n[h].label===void 0?n[h].id:n[h].label)+"</div>"}return a+="</div>"}}function html_templates(e){e.attachEvent("onTemplatesReady",function(){for(var t=document.body.getElementsByTagName("DIV"),a=0;a<t.length;a++){var n=t[a].className||"";if((n=n.split(":")).length==2&&n[0]=="template"){var o='return "'+(t[a].innerHTML||"").replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/[\n\r]+/g,"")+'";';o=unescape(o).replace(/\{event\.([a-z]+)\}/g,function(r,_){return'"+ev.'+_+'+"'}),e.templates[n[1]]=Function("start","end","ev",o),t[a].style.display="none"}}})}function keyboard_shortcuts(e){e.$keyboardNavigation.shortcuts={createCommand:function(){return{modifiers:{shift:!1,alt:!1,ctrl:!1,meta:!1},keyCode:null}},parse:function(t){for(var a=[],n=this.getExpressions(this.trim(t)),o=0;o<n.length;o++){for(var r=this.getWords(n[o]),_=this.createCommand(),i=0;i<r.length;i++)this.commandKeys[r[i]]?_.modifiers[r[i]]=!0:this.specialKeys[r[i]]?_.keyCode=this.specialKeys[r[i]]:_.keyCode=r[i].charCodeAt(0);a.push(_)}return a},getCommandFromEvent:function(t){var a=this.createCommand();a.modifiers.shift=!!t.shiftKey,a.modifiers.alt=!!t.altKey,a.modifiers.ctrl=!!t.ctrlKey,a.modifiers.meta=!!t.metaKey,a.keyCode=t.which||t.keyCode,a.keyCode>=96&&a.keyCode<=105&&(a.keyCode-=48);var n=String.fromCharCode(a.keyCode);return n&&(a.keyCode=n.toLowerCase().charCodeAt(0)),a},getHashFromEvent:function(t){return this.getHash(this.getCommandFromEvent(t))},getHash:function(t){var a=[];for(var n in t.modifiers)t.modifiers[n]&&a.push(n);return a.push(t.keyCode),a.join(this.junctionChar)},getExpressions:function(t){return t.split(this.junctionChar)},getWords:function(t){return t.split(this.combinationChar)},trim:function(t){return t.replace(/\s/g,"")},junctionChar:",",combinationChar:"+",commandKeys:{shift:16,alt:18,ctrl:17,meta:!0},specialKeys:{backspace:8,tab:9,enter:13,esc:27,space:32,up:38,down:40,left:37,right:39,home:36,end:35,pageup:33,pagedown:34,delete:46,insert:45,plus:107,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123}}}function eventhandler(e){e.$keyboardNavigation.EventHandler={_handlers:null,findHandler:function(t){this._handlers||(this._handlers={});var a=e.$keyboardNavigation.shortcuts.getHash(t);return this._handlers[a]},doAction:function(t,a){var n=this.findHandler(t);n&&(n.call(this,a),a.preventDefault?a.preventDefault():a.returnValue=!1)},bind:function(t,a){this._handlers||(this._handlers={});for(var n=e.$keyboardNavigation.shortcuts,o=n.parse(t),r=0;r<o.length;r++)this._handlers[n.getHash(o[r])]=a},unbind:function(t){for(var a=e.$keyboardNavigation.shortcuts,n=a.parse(t),o=0;o<n.length;o++)this._handlers[a.getHash(n[o])]&&delete this._handlers[a.getHash(n[o])]},bindAll:function(t){for(var a in t)this.bind(a,t[a])},initKeys:function(){this._handlers||(this._handlers={}),this.keys&&this.bindAll(this.keys)}}}function trap_modal_focus(e){e.$keyboardNavigation.getFocusableNodes=e._getFocusableNodes,e.$keyboardNavigation.trapFocus=function(t,a){if(a.keyCode!=9)return!1;for(var n,o=e.$keyboardNavigation.getFocusableNodes(t),r=document.activeElement,_=-1,i=0;i<o.length;i++)if(o[i]==r){_=i;break}if(a.shiftKey){if(n=o[_<=0?o.length-1:_-1])return n.focus(),a.preventDefault(),!0}else if(n=o[_>=o.length-1?0:_+1])return n.focus(),a.preventDefault(),!0;return!1}}function marker(e){e.$keyboardNavigation.marker={clear:function(){for(var t=e.$container.querySelectorAll(".dhx_focus_slot"),a=0;a<t.length;a++)t[a].parentNode.removeChild(t[a])},createElement:function(){var t=document.createElement("div");return t.setAttribute("tabindex",-1),t.className="dhx_focus_slot",t},renderMultiple:function(t,a,n){for(var o=[],r=new Date(t),_=new Date(Math.min(a.valueOf(),e.date.add(e.date.day_start(new Date(t)),1,"day").valueOf()));r.valueOf()<a.valueOf();)o=o.concat(n.call(this,r,new Date(Math.min(_.valueOf(),a.valueOf())))),r=e.date.day_start(e.date.add(r,1,"day")),_=e.date.day_start(e.date.add(r,1,"day")),_=new Date(Math.min(_.valueOf(),a.valueOf()));return o},render:function(t,a,n){this.clear();var o=[],r=e.$keyboardNavigation.TimeSlot.prototype._modes;switch(e.$keyboardNavigation.TimeSlot.prototype._getMode()){case r.units:o=this.renderVerticalMarker(t,a,n);break;case r.timeline:o=this.renderTimelineMarker(t,a,n);break;case r.year:o=o.concat(this.renderMultiple(t,a,this.renderYearMarker));break;case r.month:o=this.renderMonthMarker(t,a);break;case r.weekAgenda:o=o.concat(this.renderMultiple(t,a,this.renderWeekAgendaMarker));break;case r.list:o=this.renderAgendaMarker(t,a);break;case r.dayColumns:o=o.concat(this.renderMultiple(t,a,this.renderVerticalMarker))}this.addWaiAriaLabel(o,t,a,n),this.addDataAttributes(o,t,a,n);for(var _=o.length-1;_>=0;_--)if(o[_].offsetWidth)return o[_];return null},addDataAttributes:function(t,a,n,o){for(var r=e.date.date_to_str(e.config.api_date),_=r(a),i=r(n),s=0;s<t.length;s++)t[s].setAttribute("data-start-date",_),t[s].setAttribute("data-end-date",i),o&&t[s].setAttribute("data-section",o)},addWaiAriaLabel:function(t,a,n,o){var r="",_=e.getState().mode,i=!1;r+=e.templates.day_date(a),e.date.day_start(new Date(a)).valueOf()!=a.valueOf()&&(r+=" "+e.templates.hour_scale(a),i=!0),e.date.day_start(new Date(a)).valueOf()!=e.date.day_start(new Date(n)).valueOf()&&(r+=" - "+e.templates.day_date(n),(i||e.date.day_start(new Date(n)).valueOf()!=n.valueOf())&&(r+=" "+e.templates.hour_scale(n))),o&&(e.matrix&&e.matrix[_]?r+=", "+e.templates[_+"_scale_label"](o.key,o.label,o):e._props&&e._props[_]&&(r+=", "+e.templates[_+"_scale_text"](o.key,o.label,o)));for(var s=0;s<t.length;s++)e._waiAria.setAttributes(t[s],{"aria-label":r,"aria-live":"polite"})},renderWeekAgendaMarker:function(t,a){for(var n=e.$container.querySelectorAll(".dhx_wa_day_cont .dhx_wa_scale_bar"),o=e.date.week_start(new Date(e.getState().min_date)),r=-1,_=e.date.day_start(new Date(t)),i=0;i<n.length&&(r++,e.date.day_start(new Date(o)).valueOf()!=_.valueOf());i++)o=e.date.add(o,1,"day");return r!=-1?this._wrapDiv(n[r]):[]},_wrapDiv:function(t){var a=this.createElement();return a.style.top=t.offsetTop+"px",a.style.left=t.offsetLeft+"px",a.style.width=t.offsetWidth+"px",a.style.height=t.offsetHeight+"px",t.appendChild(a),[a]},renderYearMarker:function(t,a){var n=e._get_year_cell(t);n.style.position="relative";var o=this.createElement();return o.style.top="0px",o.style.left="0px",o.style.width="100%",o.style.height="100%",n.appendChild(o),[o]},renderAgendaMarker:function(t,a){var n=this.createElement();return n.style.height="1px",n.style.width="100%",n.style.opacity=1,n.style.top="0px",n.style.left="0px",e.$container.querySelector(".dhx_cal_data").appendChild(n),[n]},renderTimelineMarker:function(t,a,n){var o=e._lame_copy({},e.matrix[e._mode]),r=o._scales;o.round_position=!1;var _=[],i=t?new Date(t):e._min_date,s=a?new Date(a):e._max_date;if(i.valueOf()<e._min_date.valueOf()&&(i=new Date(e._min_date)),s.valueOf()>e._max_date.valueOf()&&(s=new Date(e._max_date)),!o._trace_x)return _;for(var d=0;d<o._trace_x.length&&!e._is_column_visible(o._trace_x[d]);d++);if(d==o._trace_x.length)return _;var l=r[n];if(!(i<a&&s>t))return _;var h=this.createElement(),f=e._timeline_getX({start_date:t},!1,o)-1,m=e._timeline_getX({start_date:a},!1,o)-1,u=o._section_height[n]-1||o.dy-1,p=0;e._isRender("cell")&&(p=l.offsetTop,f+=o.dx,m+=o.dx,l=e.$container.querySelector(".dhx_cal_data"));var b=Math.max(1,m-f-1);let c="left";return e.config.rtl&&(c="right"),h.style.cssText=`height:${u}px; ${c}:${f}px; width:${b}px; top:${p}px;`,l&&(l.appendChild(h),_.push(h)),_},renderMonthCell:function(t){for(var a=e.$container.querySelectorAll(".dhx_month_head"),n=[],o=0;o<a.length;o++)n.push(a[o].parentNode);var r=-1,_=0,i=-1,s=e.date.week_start(new Date(e.getState().min_date)),d=e.date.day_start(new Date(t));for(o=0;o<n.length&&(r++,i==6?(_++,i=0):i++,e.date.day_start(new Date(s)).valueOf()!=d.valueOf());o++)s=e.date.add(s,1,"day");if(r==-1)return[];var l=e._colsS[i],h=e._colsS.heights[_],f=this.createElement();f.style.top=h+"px",f.style.left=l+"px",f.style.width=e._cols[i]+"px",f.style.height=(e._colsS.heights[_+1]-h||e._colsS.height)+"px";var m=e.$container.querySelector(".dhx_cal_data"),u=m.querySelector("table");return u.nextSibling?m.insertBefore(f,u.nextSibling):m.appendChild(f),f},renderMonthMarker:function(t,a){for(var n=[],o=t;o.valueOf()<a.valueOf();)n.push(this.renderMonthCell(o)),o=e.date.add(o,1,"day");return n},renderVerticalMarker:function(t,a,n){var o=e.locate_holder_day(t),r=[],_=null,i=e.config;if(e._ignores[o])return r;if(e._props&&e._props[e._mode]&&n){var s=e._props[e._mode];o=s.order[n];var d=s.order[n];s.days>1?o=e.locate_holder_day(t)+d:(o=d,s.size&&o>s.position+s.size&&(o=0))}if(!(_=e.locate_holder(o))||_.querySelector(".dhx_scale_hour"))return document.createElement("div");var l=Math.max(60*t.getHours()+t.getMinutes(),60*i.first_hour),h=Math.min(60*a.getHours()+a.getMinutes(),60*i.last_hour);if(!h&&e.date.day_start(new Date(a)).valueOf()>e.date.day_start(new Date(t)).valueOf()&&(h=60*i.last_hour),h<=l)return[];var f=this.createElement(),m=e.config.hour_size_px*i.last_hour+1,u=36e5;return f.style.top=Math.round((60*l*1e3-e.config.first_hour*u)*e.config.hour_size_px/u)%m+"px",f.style.lineHeight=f.style.height=Math.max(Math.round(60*(h-l)*1e3*e.config.hour_size_px/u)%m,1)+"px",f.style.width="100%",_.appendChild(f),r.push(f),r[0]}}}function scheduler_node(e){e.$keyboardNavigation.SchedulerNode=function(){},e.$keyboardNavigation.SchedulerNode.prototype=e._compose(e.$keyboardNavigation.EventHandler,{getDefaultNode:function(){var t=new e.$keyboardNavigation.TimeSlot;return t.isValid()||(t=t.fallback()),t},_modes:{month:"month",year:"year",dayColumns:"dayColumns",timeline:"timeline",units:"units",weekAgenda:"weekAgenda",list:"list"},getMode:function(){var t=e.getState().mode;return e.matrix&&e.matrix[t]?this._modes.timeline:e._props&&e._props[t]?this._modes.units:t=="month"?this._modes.month:t=="year"?this._modes.year:t=="week_agenda"?this._modes.weekAgenda:t=="map"||t=="agenda"||e._grid&&e["grid_"+t]?this._modes.list:this._modes.dayColumns},focus:function(){e.focus()},blur:function(){},disable:function(){e.$container.setAttribute("tabindex","0")},enable:function(){e.$container&&e.$container.removeAttribute("tabindex")},isEnabled:function(){return e.$container.hasAttribute("tabindex")},_compareEvents:function(t,a){return t.start_date.valueOf()==a.start_date.valueOf()?t.id>a.id?1:-1:t.start_date.valueOf()>a.start_date.valueOf()?1:-1},_pickEvent:function(t,a,n,o){var r=e.getState();t=new Date(Math.max(r.min_date.valueOf(),t.valueOf())),a=new Date(Math.min(r.max_date.valueOf(),a.valueOf()));var _=e.getEvents(t,a);_.sort(this._compareEvents),o&&(_=_.reverse());for(var i=!!n,s=0;s<_.length&&i;s++)_[s].id==n&&(i=!1),_.splice(s,1),s--;for(s=0;s<_.length;s++)if(new e.$keyboardNavigation.Event(_[s].id).getNode())return _[s];return null},nextEventHandler:function(t){var a=e.$keyboardNavigation.dispatcher.activeNode,n=t||a&&a.eventId,o=null;if(n&&e.getEvent(n)){var r=e.getEvent(n);o=e.$keyboardNavigation.SchedulerNode.prototype._pickEvent(r.start_date,e.date.add(r.start_date,1,"year"),r.id,!1)}if(!o&&!t){var _=e.getState();o=e.$keyboardNavigation.SchedulerNode.prototype._pickEvent(_.min_date,e.date.add(_.min_date,1,"year"),null,!1)}if(o){var i=new e.$keyboardNavigation.Event(o.id);i.isValid()?(a&&a.blur(),e.$keyboardNavigation.dispatcher.setActiveNode(i)):this.nextEventHandler(o.id)}},prevEventHandler:function(t){var a=e.$keyboardNavigation.dispatcher.activeNode,n=t||a&&a.eventId,o=null;if(n&&e.getEvent(n)){var r=e.getEvent(n);o=e.$keyboardNavigation.SchedulerNode.prototype._pickEvent(e.date.add(r.end_date,-1,"year"),r.end_date,r.id,!0)}if(!o&&!t){var _=e.getState();o=e.$keyboardNavigation.SchedulerNode.prototype._pickEvent(e.date.add(_.max_date,-1,"year"),_.max_date,null,!0)}if(o){var i=new e.$keyboardNavigation.Event(o.id);i.isValid()?(a&&a.blur(),e.$keyboardNavigation.dispatcher.setActiveNode(i)):this.prevEventHandler(o.id)}},keys:{"alt+1, alt+2, alt+3, alt+4, alt+5, alt+6, alt+7, alt+8, alt+9":function(t){var a=e.$keyboardNavigation.HeaderCell.prototype.getNodes(".dhx_cal_navline .dhx_cal_tab"),n=t.key;n===void 0&&(n=t.keyCode-48),a[1*n-1]&&a[1*n-1].click()},"ctrl+left,meta+left":function(t){e._click.dhx_cal_prev_button()},"ctrl+right,meta+right":function(t){e._click.dhx_cal_next_button()},"ctrl+up,meta+up":function(t){e.$container.querySelector(".dhx_cal_data").scrollTop-=20},"ctrl+down,meta+down":function(t){e.$container.querySelector(".dhx_cal_data").scrollTop+=20},e:function(){this.nextEventHandler()},home:function(){e.setCurrentView(new Date)},"shift+e":function(){this.prevEventHandler()},"ctrl+enter,meta+enter":function(){e.addEventNow({start_date:new Date(e.getState().date)})},"ctrl+c,meta+c":function(t){e._key_nav_copy_paste(t)},"ctrl+v,meta+v":function(t){e._key_nav_copy_paste(t)},"ctrl+x,meta+x":function(t){e._key_nav_copy_paste(t)}}}),e.$keyboardNavigation.SchedulerNode.prototype.bindAll(e.$keyboardNavigation.SchedulerNode.prototype.keys)}function nav_node(e){e.$keyboardNavigation.KeyNavNode=function(){},e.$keyboardNavigation.KeyNavNode.prototype=e._compose(e.$keyboardNavigation.EventHandler,{isValid:function(){return!0},fallback:function(){return null},moveTo:function(t){e.$keyboardNavigation.dispatcher.setActiveNode(t)},compareTo:function(t){if(!t)return!1;for(var a in this){if(!!this[a]!=!!t[a])return!1;var n=!(!this[a]||!this[a].toString),o=!(!t[a]||!t[a].toString);if(o!=n)return!1;if(o&&n){if(t[a].toString()!=this[a].toString())return!1}else if(t[a]!=this[a])return!1}return!0},getNode:function(){},focus:function(){var t=this.getNode();t&&(t.setAttribute("tabindex","-1"),t.focus&&t.focus())},blur:function(){var t=this.getNode();t&&t.setAttribute("tabindex","-1")}})}function header_cell(e){e.$keyboardNavigation.HeaderCell=function(t){this.index=t||0},e.$keyboardNavigation.HeaderCell.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{getNode:function(t){t=t||this.index||0;var a=this.getNodes();if(a[t])return a[t]},getNodes:function(t){t=t||[".dhx_cal_navline .dhx_cal_prev_button",".dhx_cal_navline .dhx_cal_next_button",".dhx_cal_navline .dhx_cal_today_button",".dhx_cal_navline .dhx_cal_tab"].join(", ");var a=Array.prototype.slice.call(e.$container.querySelectorAll(t));return a.sort(function(n,o){return n.offsetLeft-o.offsetLeft}),a},_handlers:null,isValid:function(){return!!this.getNode(this.index)},fallback:function(){var t=this.getNode(0);return t||(t=new e.$keyboardNavigation.TimeSlot),t},keys:{left:function(){var t=this.index-1;t<0&&(t=this.getNodes().length-1),this.moveTo(new e.$keyboardNavigation.HeaderCell(t))},right:function(){var t=this.index+1;t>=this.getNodes().length&&(t=0),this.moveTo(new e.$keyboardNavigation.HeaderCell(t))},down:function(){this.moveTo(new e.$keyboardNavigation.TimeSlot)},enter:function(){var t=this.getNode();t&&t.click()}}}),e.$keyboardNavigation.HeaderCell.prototype.bindAll(e.$keyboardNavigation.HeaderCell.prototype.keys)}function event$1(e){e.$keyboardNavigation.Event=function(t){if(this.eventId=null,e.getEvent(t)){var a=e.getEvent(t);this.start=new Date(a.start_date),this.end=new Date(a.end_date),this.section=this._getSection(a),this.eventId=t}},e.$keyboardNavigation.Event.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{_getNodes:function(){return Array.prototype.slice.call(e.$container.querySelectorAll("["+e.config.event_attribute+"]"))},_modes:e.$keyboardNavigation.SchedulerNode.prototype._modes,getMode:e.$keyboardNavigation.SchedulerNode.prototype.getMode,_handlers:null,isValid:function(){return!(!e.getEvent(this.eventId)||!this.getNode())},fallback:function(){var t=this._getNodes()[0],a=null;if(t&&e._locate_event(t)){var n=e._locate_event(t);a=new e.$keyboardNavigation.Event(n)}else a=new e.$keyboardNavigation.TimeSlot;return a},isScrolledIntoView:function(t){var a=t.getBoundingClientRect(),n=e.$container.querySelector(".dhx_cal_data").getBoundingClientRect();return!(a.bottom<n.top||a.top>n.bottom)},getNode:function(){var t="["+e.config.event_attribute+"='"+this.eventId+"']",a=e.$keyboardNavigation.dispatcher.getInlineEditor(this.eventId);if(a)return a;if(e.isMultisectionEvent&&e.isMultisectionEvent(e.getEvent(this.eventId))){for(var n=e.$container.querySelectorAll(t),o=0;o<n.length;o++)if(this.isScrolledIntoView(n[o]))return n[o];return n[0]}return e.$container.querySelector(t)},focus:function(){var t=e.getEvent(this.eventId),a=e.getState();(t.start_date.valueOf()>a.max_date.valueOf()||t.end_date.valueOf()<=a.min_date.valueOf())&&e.setCurrentView(t.start_date);var n=this.getNode();this.isScrolledIntoView(n)?e.$keyboardNavigation.dispatcher.keepScrollPosition((function(){e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)}).bind(this)):e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){e.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getSection:function(t){var a=null,n=e.getState().mode;return e.matrix&&e.matrix[n]?a=t[e.matrix[e.getState().mode].y_property]:e._props&&e._props[n]&&(a=t[e._props[n].map_to]),a},_moveToSlot:function(t){var a=e.getEvent(this.eventId);if(a){var n=this._getSection(a),o=new e.$keyboardNavigation.TimeSlot(a.start_date,null,n);this.moveTo(o.nextSlot(o,t))}else this.moveTo(new e.$keyboardNavigation.TimeSlot)},keys:{left:function(){this._moveToSlot("left")},right:function(){this._moveToSlot("right")},down:function(){this.getMode()==this._modes.list?e.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler():this._moveToSlot("down")},space:function(){var t=this.getNode();t&&t.click?t.click():this.moveTo(new e.$keyboardNavigation.TimeSlot)},up:function(){this.getMode()==this._modes.list?e.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler():this._moveToSlot("up")},delete:function(){e.getEvent(this.eventId)?e._click.buttons.delete(this.eventId):this.moveTo(new e.$keyboardNavigation.TimeSlot)},enter:function(){e.getEvent(this.eventId)?e.showLightbox(this.eventId):this.moveTo(new e.$keyboardNavigation.TimeSlot)}}}),e.$keyboardNavigation.Event.prototype.bindAll(e.$keyboardNavigation.Event.prototype.keys)}function time_slot(e){e.$keyboardNavigation.TimeSlot=function(t,a,n,o){var r=e.getState(),_=e.matrix&&e.matrix[r.mode];t||(t=this.getDefaultDate()),a||(a=_?e.date.add(t,_.x_step,_.x_unit):e.date.add(t,e.config.key_nav_step,"minute")),this.section=n||this._getDefaultSection(),this.start_date=new Date(t),this.end_date=new Date(a),this.movingDate=o||null},e.$keyboardNavigation.TimeSlot.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{_handlers:null,getDefaultDate:function(){var t,a=e.getState(),n=new Date(a.date);n.setSeconds(0),n.setMilliseconds(0);var o=new Date;o.setSeconds(0),o.setMilliseconds(0);var r=e.matrix&&e.matrix[a.mode],_=!1;if(n.valueOf()===o.valueOf()&&(_=!0),r)_?(r.x_unit==="day"?(o.setHours(0),o.setMinutes(0)):r.x_unit==="hour"&&o.setMinutes(0),t=o):t=e.date[r.name+"_start"](new Date(a.date)),t=this.findVisibleColumn(t);else if(t=new Date(e.getState().min_date),_&&(t=o),t=this.findVisibleColumn(t),_||t.setHours(e.config.first_hour),!e._table_view){var i=e.$container.querySelector(".dhx_cal_data");i.scrollTop&&t.setHours(e.config.first_hour+Math.ceil(i.scrollTop/e.config.hour_size_px))}return t},clone:function(t){return new e.$keyboardNavigation.TimeSlot(t.start_date,t.end_date,t.section,t.movingDate)},_getMultisectionView:function(){var t,a=e.getState();return e._props&&e._props[a.mode]?t=e._props[a.mode]:e.matrix&&e.matrix[a.mode]&&(t=e.matrix[a.mode]),t},_getDefaultSection:function(){var t=null;return this._getMultisectionView()&&!t&&(t=this._getNextSection()),t},_getNextSection:function(t,a){var n=this._getMultisectionView(),o=n.order[t],r=o;(r=o!==void 0?o+a:n.size&&n.position?n.position:0)<0&&(r=0);var _=n.options||n.y_unit;return r>=_.length&&(r=_.length-1),_[r]?_[r].key:null},isValid:function(){var t=e.getState();if(this.start_date.valueOf()<t.min_date.valueOf()||this.start_date.valueOf()>=t.max_date.valueOf()||!this.isVisible(this.start_date,this.end_date))return!1;var a=this._getMultisectionView();return!a||a.order[this.section]!==void 0},fallback:function(){var t=new e.$keyboardNavigation.TimeSlot;return t.isValid()?t:new e.$keyboardNavigation.DataArea},getNodes:function(){return Array.prototype.slice.call(e.$container.querySelectorAll(".dhx_focus_slot"))},getNode:function(){return this.getNodes()[0]},focus:function(){this.section&&e.getView()&&e.getView().smart_rendering&&e.getView().scrollTo&&!e.$container.querySelector(`[data-section-id="${this.section}"]`)&&e.getView().scrollTo({section:this.section}),e.$keyboardNavigation.marker.render(this.start_date,this.end_date,this.section),e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this),e.$keyboardNavigation._pasteDate=this.start_date,e.$keyboardNavigation._pasteSection=this.section},blur:function(){e.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this),e.$keyboardNavigation.marker.clear()},_modes:e.$keyboardNavigation.SchedulerNode.prototype._modes,_getMode:e.$keyboardNavigation.SchedulerNode.prototype.getMode,addMonthDate:function(t,a,n){var o;switch(a){case"up":o=e.date.add(t,-1,"week");break;case"down":o=e.date.add(t,1,"week");break;case"left":o=e.date.day_start(e.date.add(t,-1,"day")),o=this.findVisibleColumn(o,-1);break;case"right":o=e.date.day_start(e.date.add(t,1,"day")),o=this.findVisibleColumn(o,1);break;default:o=e.date.day_start(new Date(t))}var r=e.getState();return(t.valueOf()<r.min_date.valueOf()||!n&&t.valueOf()>=r.max_date.valueOf())&&(o=new Date(r.min_date)),o},nextMonthSlot:function(t,a,n){var o,r;return(o=this.addMonthDate(t.start_date,a,n)).setHours(e.config.first_hour),(r=new Date(o)).setHours(e.config.last_hour),{start_date:o,end_date:r}},_alignTimeSlot:function(t,a,n,o){for(var r=new Date(a);r.valueOf()<t.valueOf();)r=e.date.add(r,o,n);return r.valueOf()>t.valueOf()&&(r=e.date.add(r,-o,n)),r},nextTimelineSlot:function(t,a,n){var o=e.getState(),r=e.matrix[o.mode],_=this._alignTimeSlot(t.start_date,e.date[r.name+"_start"](new Date(t.start_date)),r.x_unit,r.x_step),i=this._alignTimeSlot(t.end_date,e.date[r.name+"_start"](new Date(t.end_date)),r.x_unit,r.x_step);i.valueOf()<=_.valueOf()&&(i=e.date.add(_,r.x_step,r.x_unit));var s=this.clone(t);switch(s.start_date=_,s.end_date=i,s.section=t.section||this._getNextSection(),a){case"up":s.section=this._getNextSection(t.section,-1);break;case"down":s.section=this._getNextSection(t.section,1);break;case"left":s.start_date=this.findVisibleColumn(e.date.add(s.start_date,-r.x_step,r.x_unit),-1),s.end_date=e.date.add(s.start_date,r.x_step,r.x_unit);break;case"right":s.start_date=this.findVisibleColumn(e.date.add(s.start_date,r.x_step,r.x_unit),1),s.end_date=e.date.add(s.start_date,r.x_step,r.x_unit)}return(s.start_date.valueOf()<o.min_date.valueOf()||s.start_date.valueOf()>=o.max_date.valueOf())&&(n&&s.start_date.valueOf()>=o.max_date.valueOf()?s.start_date=new Date(o.max_date):(s.start_date=e.date[o.mode+"_start"](e.date.add(o.date,a=="left"?-1:1,o.mode)),s.end_date=e.date.add(s.start_date,r.x_step,r.x_unit))),s},nextUnitsSlot:function(t,a,n){var o=this.clone(t);o.section=t.section||this._getNextSection();var r=t.section||this._getNextSection(),_=e.getState(),i=e._props[_.mode];switch(a){case"left":r=this._getNextSection(t.section,-1);var s=i.size?i.size-1:i.options.length;i.days>1&&i.order[r]==s-1&&e.date.add(t.start_date,-1,"day").valueOf()>=_.min_date.valueOf()&&(o=this.nextDaySlot(t,a,n));break;case"right":r=this._getNextSection(t.section,1),i.days>1&&!i.order[r]&&e.date.add(t.start_date,1,"day").valueOf()<_.max_date.valueOf()&&(o=this.nextDaySlot(t,a,n));break;default:o=this.nextDaySlot(t,a,n),r=t.section}return o.section=r,o},_moveDate:function(t,a){var n=this.findVisibleColumn(e.date.add(t,a,"day"),a);return n.setHours(t.getHours()),n.setMinutes(t.getMinutes()),n},isBeforeLastHour:function(t,a){var n=t.getMinutes(),o=t.getHours(),r=e.config.last_hour;return o<r||!a&&(r==24||o==r)&&!n},isAfterFirstHour:function(t,a){var n=t.getMinutes(),o=t.getHours(),r=e.config.first_hour,_=e.config.last_hour;return o>=r||!a&&!n&&(!o&&_==24||o==_)},isInVisibleDayTime:function(t,a){return this.isBeforeLastHour(t,a)&&this.isAfterFirstHour(t,a)},nextDaySlot:function(t,a,n){var o,r,_=e.config.key_nav_step,i=this._alignTimeSlot(t.start_date,e.date.day_start(new Date(t.start_date)),"minute",_),s=t.start_date;switch(a){case"up":if(o=e.date.add(i,-_,"minute"),!this.isInVisibleDayTime(o,!0)&&(!n||this.isInVisibleDayTime(s,!0))){var d=!0;n&&e.date.date_part(new Date(o)).valueOf()!=e.date.date_part(new Date(s)).valueOf()&&(d=!1),d&&(o=this.findVisibleColumn(e.date.add(t.start_date,-1,"day"),-1)),o.setHours(e.config.last_hour),o.setMinutes(0),o=e.date.add(o,-_,"minute")}r=e.date.add(o,_,"minute");break;case"down":o=e.date.add(i,_,"minute");var l=n?o:e.date.add(o,_,"minute");!this.isInVisibleDayTime(l,!1)&&(!n||this.isInVisibleDayTime(s,!1))&&(n?(d=!0,e.date.date_part(new Date(s)).valueOf()==s.valueOf()&&(d=!1),d&&(o=this.findVisibleColumn(e.date.add(t.start_date,1,"day"),1)),o.setHours(e.config.first_hour),o.setMinutes(0),o=e.date.add(o,_,"minute")):((o=this.findVisibleColumn(e.date.add(t.start_date,1,"day"),1)).setHours(e.config.first_hour),o.setMinutes(0))),r=e.date.add(o,_,"minute");break;case"left":o=this._moveDate(t.start_date,-1),r=this._moveDate(t.end_date,-1);break;case"right":o=this._moveDate(t.start_date,1),r=this._moveDate(t.end_date,1);break;default:o=i,r=e.date.add(o,_,"minute")}return{start_date:o,end_date:r}},nextWeekAgendaSlot:function(t,a){var n,o,r=e.getState();switch(a){case"down":case"left":n=e.date.day_start(e.date.add(t.start_date,-1,"day")),n=this.findVisibleColumn(n,-1);break;case"up":case"right":n=e.date.day_start(e.date.add(t.start_date,1,"day")),n=this.findVisibleColumn(n,1);break;default:n=e.date.day_start(t.start_date)}return(t.start_date.valueOf()<r.min_date.valueOf()||t.start_date.valueOf()>=r.max_date.valueOf())&&(n=new Date(r.min_date)),(o=new Date(n)).setHours(e.config.last_hour),{start_date:n,end_date:o}},nextAgendaSlot:function(t,a){return{start_date:t.start_date,end_date:t.end_date}},isDateVisible:function(t){if(!e._ignores_detected)return!0;var a,n=e.matrix&&e.matrix[e.getState().mode];return a=n?e._get_date_index(n,t):e.locate_holder_day(t),!e._ignores[a]},findVisibleColumn:function(t,a){var n=t;a=a||1;for(var o=e.getState();!this.isDateVisible(n)&&(a>0&&n.valueOf()<=o.max_date.valueOf()||a<0&&n.valueOf()>=o.min_date.valueOf());)n=this.nextDateColumn(n,a);return n},nextDateColumn:function(t,a){a=a||1;var n=e.matrix&&e.matrix[e.getState().mode];return n?e.date.add(t,a*n.x_step,n.x_unit):e.date.day_start(e.date.add(t,a,"day"))},isVisible:function(t,a){if(!e._ignores_detected)return!0;for(var n=new Date(t);n.valueOf()<a.valueOf();){if(this.isDateVisible(n))return!0;n=this.nextDateColumn(n)}return!1},nextSlot:function(t,a,n,o){var r;n=n||this._getMode();var _=e.$keyboardNavigation.TimeSlot.prototype.clone(t);switch(n){case this._modes.units:r=this.nextUnitsSlot(_,a,o);break;case this._modes.timeline:r=this.nextTimelineSlot(_,a,o);break;case this._modes.year:case this._modes.month:r=this.nextMonthSlot(_,a,o);break;case this._modes.weekAgenda:r=this.nextWeekAgendaSlot(_,a,o);break;case this._modes.list:r=this.nextAgendaSlot(_,a,o);break;case this._modes.dayColumns:r=this.nextDaySlot(_,a,o)}return r.start_date.valueOf()>=r.end_date.valueOf()&&(r=this.nextSlot(r,a,n)),e.$keyboardNavigation.TimeSlot.prototype.clone(r)},extendSlot:function(t,a){var n;switch(this._getMode()){case this._modes.units:n=a=="left"||a=="right"?this.nextUnitsSlot(t,a):this.extendUnitsSlot(t,a);break;case this._modes.timeline:n=a=="down"||a=="up"?this.nextTimelineSlot(t,a):this.extendTimelineSlot(t,a);break;case this._modes.year:case this._modes.month:n=this.extendMonthSlot(t,a);break;case this._modes.dayColumns:n=this.extendDaySlot(t,a);break;case this._modes.weekAgenda:n=this.extendWeekAgendaSlot(t,a);break;default:n=t}var o=e.getState();return n.start_date.valueOf()<o.min_date.valueOf()&&(n.start_date=this.findVisibleColumn(o.min_date),n.start_date.setHours(e.config.first_hour)),n.end_date.valueOf()>o.max_date.valueOf()&&(n.end_date=this.findVisibleColumn(o.max_date,-1)),e.$keyboardNavigation.TimeSlot.prototype.clone(n)},extendTimelineSlot:function(t,a){return this.extendGenericSlot({left:"start_date",right:"end_date"},t,a,"timeline")},extendWeekAgendaSlot:function(t,a){return this.extendGenericSlot({left:"start_date",right:"end_date"},t,a,"weekAgenda")},extendGenericSlot:function(t,a,n,o){var r,_=a.movingDate;if(_||(_=t[n]),!_||!t[n])return a;if(!n)return e.$keyboardNavigation.TimeSlot.prototype.clone(a);(r=this.nextSlot({start_date:a[_],section:a.section},n,o,!0)).start_date.valueOf()==a.start_date.valueOf()&&(r=this.nextSlot({start_date:r.start_date,section:r.section},n,o,!0)),r.movingDate=_;var i=this.extendSlotDates(a,r,r.movingDate);return i.end_date.valueOf()<=i.start_date.valueOf()&&(r.movingDate=r.movingDate=="end_date"?"start_date":"end_date"),i=this.extendSlotDates(a,r,r.movingDate),r.start_date=i.start_date,r.end_date=i.end_date,r},extendSlotDates:function(t,a,n){var o={start_date:null,end_date:null};return n=="start_date"?(o.start_date=a.start_date,o.end_date=t.end_date):(o.start_date=t.start_date,o.end_date=a.start_date),o},extendMonthSlot:function(t,a){return(t=this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},t,a,"month")).start_date.setHours(e.config.first_hour),t.end_date=e.date.add(t.end_date,-1,"day"),t.end_date.setHours(e.config.last_hour),t},extendUnitsSlot:function(t,a){var n;switch(a){case"down":case"up":n=this.extendDaySlot(t,a);break;default:n=t}return n.section=t.section,n},extendDaySlot:function(t,a){return this.extendGenericSlot({up:"start_date",down:"end_date",left:"start_date",right:"end_date"},t,a,"dayColumns")},scrollSlot:function(t){var a=e.getState(),n=this.nextSlot(this,t);(n.start_date.valueOf()<a.min_date.valueOf()||n.start_date.valueOf()>=a.max_date.valueOf())&&e.setCurrentView(new Date(n.start_date)),this.moveTo(n)},keys:{left:function(){this.scrollSlot("left")},right:function(){this.scrollSlot("right")},down:function(){this._getMode()==this._modes.list?e.$keyboardNavigation.SchedulerNode.prototype.nextEventHandler():this.scrollSlot("down")},up:function(){this._getMode()==this._modes.list?e.$keyboardNavigation.SchedulerNode.prototype.prevEventHandler():this.scrollSlot("up")},"shift+down":function(){this.moveTo(this.extendSlot(this,"down"))},"shift+up":function(){this.moveTo(this.extendSlot(this,"up"))},"shift+right":function(){this.moveTo(this.extendSlot(this,"right"))},"shift+left":function(){this.moveTo(this.extendSlot(this,"left"))},enter:function(){var t={start_date:new Date(this.start_date),end_date:new Date(this.end_date)},a=e.getState().mode;e.matrix&&e.matrix[a]?t[e.matrix[e.getState().mode].y_property]=this.section:e._props&&e._props[a]&&(t[e._props[a].map_to]=this.section),e.addEventNow(t)}}}),e.$keyboardNavigation.TimeSlot.prototype.bindAll(e.$keyboardNavigation.TimeSlot.prototype.keys)}function minical_button(e){e.$keyboardNavigation.MinicalButton=function(t,a){this.container=t,this.index=a||0},e.$keyboardNavigation.MinicalButton.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{isValid:function(){return!!this.container.offsetWidth},fallback:function(){var t=new e.$keyboardNavigation.TimeSlot;return t.isValid()?t:new e.$keyboardNavigation.DataArea},focus:function(){e.$keyboardNavigation.dispatcher.globalNode.disable(),this.container.removeAttribute("tabindex"),e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0"),e.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},getNode:function(){return this.index?this.container.querySelector(".dhx_cal_next_button"):this.container.querySelector(".dhx_cal_prev_button")},keys:{right:function(t){this.moveTo(new e.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},left:function(t){this.moveTo(new e.$keyboardNavigation.MinicalButton(this.container,this.index?0:1))},down:function(){var t=new e.$keyboardNavigation.MinicalCell(this.container,0,0);t&&!t.isValid()&&(t=t.fallback()),this.moveTo(t)},enter:function(t){this.getNode().click()}}}),e.$keyboardNavigation.MinicalButton.prototype.bindAll(e.$keyboardNavigation.MinicalButton.prototype.keys)}function minical_cell(e){e.$keyboardNavigation.MinicalCell=function(t,a,n){this.container=t,this.row=a||0,this.col=n||0},e.$keyboardNavigation.MinicalCell.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{isValid:function(){var t=this._getGrid();return!(!t[this.row]||!t[this.row][this.col])},fallback:function(){var t=this.row,a=this.col,n=this._getGrid();n[t]||(t=0);var o=!0;if(t>n.length/2&&(o=!1),!n[t]){var r=new e.$keyboardNavigation.TimeSlot;return r.isValid()?r:new e.$keyboardNavigation.DataArea}if(o){for(var _=a;n[t]&&_<n[t].length;_++)if(n[t][_]||_!=n[t].length-1||(t++,a=0),n[t][_])return new e.$keyboardNavigation.MinicalCell(this.container,t,_)}else for(_=a;n[t]&&_<n[t].length;_--)if(n[t][_]||_||(a=n[--t].length-1),n[t][_])return new e.$keyboardNavigation.MinicalCell(this.container,t,_);return new e.$keyboardNavigation.MinicalButton(this.container,0)},focus:function(){e.$keyboardNavigation.dispatcher.globalNode.disable(),this.container.removeAttribute("tabindex"),e.$keyboardNavigation.KeyNavNode.prototype.focus.apply(this)},blur:function(){this.container.setAttribute("tabindex","0"),e.$keyboardNavigation.KeyNavNode.prototype.blur.apply(this)},_getNode:function(t,a){return this.container.querySelector(".dhx_year_body tr:nth-child("+(t+1)+") td:nth-child("+(a+1)+")")},getNode:function(){return this._getNode(this.row,this.col)},_getGrid:function(){for(var t=this.container.querySelectorAll(".dhx_year_body tr"),a=[],n=0;n<t.length;n++){a[n]=[];for(var o=t[n].querySelectorAll("td"),r=0;r<o.length;r++){var _=o[r],i=!0,s=e._getClassName(_);(s.indexOf("dhx_after")>-1||s.indexOf("dhx_before")>-1||s.indexOf("dhx_scale_ignore")>-1)&&(i=!1),a[n][r]=i}}return a},keys:{right:function(t){var a=this._getGrid(),n=this.row,o=this.col+1;a[n]&&a[n][o]||(a[n+1]?(n+=1,o=0):o=this.col);var r=new e.$keyboardNavigation.MinicalCell(this.container,n,o);r.isValid()||(r=r.fallback()),this.moveTo(r)},left:function(t){var a=this._getGrid(),n=this.row,o=this.col-1;a[n]&&a[n][o]||(o=a[n-1]?a[n-=1].length-1:this.col);var r=new e.$keyboardNavigation.MinicalCell(this.container,n,o);r.isValid()||(r=r.fallback()),this.moveTo(r)},down:function(){var t=this._getGrid(),a=this.row+1,n=this.col;t[a]&&t[a][n]||(a=this.row);var o=new e.$keyboardNavigation.MinicalCell(this.container,a,n);o.isValid()||(o=o.fallback()),this.moveTo(o)},up:function(){var t=this._getGrid(),a=this.row-1,n=this.col;if(t[a]&&t[a][n]){var o=new e.$keyboardNavigation.MinicalCell(this.container,a,n);o.isValid()||(o=o.fallback()),this.moveTo(o)}else{var r=0;this.col>t[this.row].length/2&&(r=1),this.moveTo(new e.$keyboardNavigation.MinicalButton(this.container,r))}},enter:function(t){this.getNode().querySelector(".dhx_month_head").click()}}}),e.$keyboardNavigation.MinicalCell.prototype.bindAll(e.$keyboardNavigation.MinicalCell.prototype.keys)}function data_area(e){e.$keyboardNavigation.DataArea=function(t){this.index=t||0},e.$keyboardNavigation.DataArea.prototype=e._compose(e.$keyboardNavigation.KeyNavNode,{getNode:function(t){return e.$container.querySelector(".dhx_cal_data")},_handlers:null,isValid:function(){return!0},fallback:function(){return this},keys:{"up,down,right,left":function(){this.moveTo(new e.$keyboardNavigation.TimeSlot)}}}),e.$keyboardNavigation.DataArea.prototype.bindAll(e.$keyboardNavigation.DataArea.prototype.keys)}function modals(e){(function(){var t=[];function a(){return!!t.length}function n(i){setTimeout(function(){if(e.$destroyed)return!0;a()||function(s,d){for(;s&&s!=d;)s=s.parentNode;return s==d}(document.activeElement,e.$container)||e.focus()},1)}function o(i){var s=(i=i||window.event).currentTarget;s==t[t.length-1]&&e.$keyboardNavigation.trapFocus(s,i)}if(e.attachEvent("onLightbox",function(){var i;i=e.getLightbox(),e.eventRemove(i,"keydown",o),e.event(i,"keydown",o),t.push(i)}),e.attachEvent("onAfterLightbox",function(){var i=t.pop();i&&e.eventRemove(i,"keydown",o),n()}),e.attachEvent("onAfterQuickInfo",function(){n()}),!e._keyNavMessagePopup){e._keyNavMessagePopup=!0;var r=null,_=null;const i=[];e.attachEvent("onMessagePopup",function(s){for(r=document.activeElement,_=r;_&&e._getClassName(_).indexOf("dhx_cal_data")<0;)_=_.parentNode;_&&(_=_.parentNode),e.eventRemove(s,"keydown",o),e.event(s,"keydown",o),i.push(s)}),e.attachEvent("onAfterMessagePopup",function(){var s=i.pop();s&&e.eventRemove(s,"keydown",o),setTimeout(function(){if(e.$destroyed)return!0;for(var d=document.activeElement;d&&e._getClassName(d).indexOf("dhx_cal_light")<0;)d=d.parentNode;d||(r&&r.parentNode?r.focus():_&&_.parentNode&&_.focus(),r=null,_=null)},1)})}e.$keyboardNavigation.isModal=a})()}function core(e){e.$keyboardNavigation.dispatcher={isActive:!1,activeNode:null,globalNode:new e.$keyboardNavigation.SchedulerNode,keepScrollPosition:function(t){var a,n,o=e.$container.querySelector(".dhx_timeline_scrollable_data");o||(o=e.$container.querySelector(".dhx_cal_data")),o&&(a=o.scrollTop,n=o.scrollLeft),t(),o&&(o.scrollTop=a,o.scrollLeft=n)},enable:function(){if(e.$container){this.isActive=!0;var t=this;this.keepScrollPosition(function(){t.globalNode.enable(),t.setActiveNode(t.getActiveNode())})}},disable:function(){this.isActive=!1,this.globalNode.disable()},isEnabled:function(){return!!this.isActive},getDefaultNode:function(){return this.globalNode.getDefaultNode()},setDefaultNode:function(){this.setActiveNode(this.getDefaultNode())},getActiveNode:function(){var t=this.activeNode;return t&&!t.isValid()&&(t=t.fallback()),t},focusGlobalNode:function(){this.blurNode(this.globalNode),this.focusNode(this.globalNode)},setActiveNode:function(t){t&&t.isValid()&&(this.activeNode&&this.activeNode.compareTo(t)||this.isEnabled()&&(this.blurNode(this.activeNode),this.activeNode=t,this.focusNode(this.activeNode)))},focusNode:function(t){t&&t.focus&&(t.focus(),t.getNode&&document.activeElement!=t.getNode()&&this.setActiveNode(new e.$keyboardNavigation.DataArea))},blurNode:function(t){t&&t.blur&&t.blur()},getInlineEditor:function(t){var a=e.$container.querySelector(".dhx_cal_editor["+e.config.event_attribute+"='"+t+"'] textarea");return a&&a.offsetWidth?a:null},keyDownHandler:function(t){if(!t.defaultPrevented){var a=this.getActiveNode();if((!e.$keyboardNavigation.isModal()||a&&a.container&&e.utils.dom.locateCss({target:a.container},"dhx_minical_popup",!1))&&(!e.getState().editor_id||!this.getInlineEditor(e.getState().editor_id))&&this.isEnabled()){t=t||window.event;var n=this.globalNode,o=e.$keyboardNavigation.shortcuts.getCommandFromEvent(t);a?a.findHandler(o)?a.doAction(o,t):n.findHandler(o)&&n.doAction(o,t):this.setDefaultNode()}}},_timeout:null,delay:function(t,a){clearTimeout(this._timeout),this._timeout=setTimeout(t,a||1)}}}function key_nav_legacy(e){e._temp_key_scope=function(){e.config.key_nav=!0,e.$keyboardNavigation._pasteDate=null,e.$keyboardNavigation._pasteSection=null;var t=null,a={};function n(_){_=_||window.event,a.x=_.clientX,a.y=_.clientY}function o(){for(var _,i,s=document.elementFromPoint(a.x,a.y);s&&s!=e._obj;)s=s.parentNode;return _=s==e._obj,i=e.$keyboardNavigation.dispatcher.isEnabled(),_||i}function r(_){return e._lame_copy({},_)}document.body?e.event(document.body,"mousemove",n):e.event(window,"load",function(){e.event(document.body,"mousemove",n)}),e.attachEvent("onMouseMove",function(_,i){var s=e.getState();if(s.mode&&s.min_date){var d=e.getActionData(i);e.$keyboardNavigation._pasteDate=d.date,e.$keyboardNavigation._pasteSection=d.section}}),e._make_pasted_event=function(_){var i=e.$keyboardNavigation._pasteDate,s=e.$keyboardNavigation._pasteSection,d=_.end_date-_.start_date,l=r(_);if(function(f){delete f.rec_type,delete f.rec_pattern,delete f.event_pid,delete f.event_length}(l),l.start_date=new Date(i),l.end_date=new Date(l.start_date.valueOf()+d),s){var h=e._get_section_property();e.config.multisection?l[h]=_[h]:l[h]=s}return l},e._do_paste=function(_,i,s){e.callEvent("onBeforeEventPasted",[_,i,s])!==!1&&(e.addEvent(i),e.callEvent("onEventPasted",[_,i,s]))},e._is_key_nav_active=function(){return!(!this._is_initialized()||this._is_lightbox_open()||!this.config.key_nav)},e.event(document,"keydown",function(_){(_.ctrlKey||_.metaKey)&&_.keyCode==86&&e._buffer_event&&!e.$keyboardNavigation.dispatcher.isEnabled()&&(e.$keyboardNavigation.dispatcher.isActive=o())}),e._key_nav_copy_paste=function(_){if(!e._is_key_nav_active())return!0;if(_.keyCode==37||_.keyCode==39){_.cancelBubble=!0;var i=e.date.add(e._date,_.keyCode==37?-1:1,e._mode);return e.setCurrentView(i),!0}var s,d=(s=e.$keyboardNavigation.dispatcher.getActiveNode())&&s.eventId?s.eventId:e._select_id;if((_.ctrlKey||_.metaKey)&&_.keyCode==67)return d&&(e._buffer_event=r(e.getEvent(d)),t=!0,e.callEvent("onEventCopied",[e.getEvent(d)])),!0;if((_.ctrlKey||_.metaKey)&&_.keyCode==88&&d){t=!1;var l=e._buffer_event=r(e.getEvent(d));e.updateEvent(l.id),e.callEvent("onEventCut",[l])}if((_.ctrlKey||_.metaKey)&&_.keyCode==86&&o()){if(l=(l=e._buffer_event?e.getEvent(e._buffer_event.id):e._buffer_event)||e._buffer_event){var h=e._make_pasted_event(l);t?(h.id=e.uid(),e._do_paste(t,h,l)):e.callEvent("onBeforeEventChanged",[h,_,!1,l])&&(e._do_paste(t,h,l),t=!0)}return!0}}},e._temp_key_scope()}function scheduler_handlers(e){e.$keyboardNavigation.attachSchedulerHandlers=function(){var t,a=e.$keyboardNavigation.dispatcher,n=function(s){if(e.config.key_nav)return a.keyDownHandler(s)},o=function(){a.keepScrollPosition(function(){a.focusGlobalNode()})};e.attachEvent("onDataRender",function(){e.config.key_nav&&a.isEnabled()&&!e.getState().editor_id&&(clearTimeout(t),t=setTimeout(function(){if(e.$destroyed)return!0;a.isEnabled()||a.enable(),r()}))});var r=function(){if(a.isEnabled()){var s=a.getActiveNode();s&&(s.isValid()||(s=s.fallback()),!s||s instanceof e.$keyboardNavigation.MinicalButton||s instanceof e.$keyboardNavigation.MinicalCell||a.keepScrollPosition(function(){s.focus(!0)}))}};function _(s){if(!e.config.key_nav)return!0;var d,l=e.$keyboardNavigation.isChildOf(s.target||s.srcElement,e.$container.querySelector(".dhx_cal_data")),h=e.getActionData(s);e._locate_event(s.target||s.srcElement)?d=new e.$keyboardNavigation.Event(e._locate_event(s.target||s.srcElement)):l&&(d=new e.$keyboardNavigation.TimeSlot,h.date&&l&&(d=d.nextSlot(new e.$keyboardNavigation.TimeSlot(h.date,null,h.section)))),d&&(a.isEnabled()?h.date&&l&&a.delay(function(){a.setActiveNode(d)}):a.activeNode=d)}e.attachEvent("onSchedulerReady",function(){var s=e.$container;e.eventRemove(document,"keydown",n),e.eventRemove(s,"mousedown",_),e.eventRemove(s,"focus",o),e.config.key_nav?(e.event(document,"keydown",n),e.event(s,"mousedown",_),e.event(s,"focus",o),s.setAttribute("tabindex","0")):s.removeAttribute("tabindex")});var i=e.updateEvent;e.updateEvent=function(s){var d=i.apply(this,arguments);if(e.config.key_nav&&a.isEnabled()&&e.getState().select_id==s){var l=new e.$keyboardNavigation.Event(s);e.getState().lightbox_id||function(h){if(e.config.key_nav&&a.isEnabled()){var f=h,m=new e.$keyboardNavigation.Event(f.eventId);if(!m.isValid()){var u=m.start||f.start,p=m.end||f.end,b=m.section||f.section;(m=new e.$keyboardNavigation.TimeSlot(u,p,b)).isValid()||(m=new e.$keyboardNavigation.TimeSlot)}a.setActiveNode(m);var c=a.getActiveNode();c&&c.getNode&&document.activeElement!=c.getNode()&&a.focusNode(a.getActiveNode())}}(l)}return d},e.attachEvent("onEventDeleted",function(s){return e.config.key_nav&&a.isEnabled()&&a.getActiveNode().eventId==s&&a.setActiveNode(new e.$keyboardNavigation.TimeSlot),!0}),e.attachEvent("onClearAll",function(){if(!e.config.key_nav)return!0;a.isEnabled()&&a.getActiveNode()instanceof e.$keyboardNavigation.Event&&a.setActiveNode(new e.$keyboardNavigation.TimeSlot)})}}function minical_handlers(e){e.$keyboardNavigation._minicalendars=[],e.$keyboardNavigation.isMinical=function(t){for(var a=e.$keyboardNavigation._minicalendars,n=0;n<a.length;n++)if(this.isChildOf(t,a[n]))return!0;return!1},e.$keyboardNavigation.isChildOf=function(t,a){for(;t&&t!==a;)t=t.parentNode;return t===a},e.$keyboardNavigation.patchMinicalendar=function(){var t=e.$keyboardNavigation.dispatcher;function a(_){var i=_.target;t.enable(),t.setActiveNode(new e.$keyboardNavigation.MinicalButton(i,0))}function n(_){var i=_.target||_.srcElement,s=e.utils.dom.locateCss(_,"dhx_cal_prev_button",!1),d=e.utils.dom.locateCss(_,"dhx_cal_next_button",!1),l=e.utils.dom.locateCss(_,"dhx_year_body",!1),h=0,f=0;if(l){for(var m,u,p=i;p&&p.tagName.toLowerCase()!="td";)p=p.parentNode;if(p&&(m=(u=p).parentNode),m&&u){for(var b=m.parentNode.querySelectorAll("tr"),c=0;c<b.length;c++)if(b[c]==m){h=c;break}var g=m.querySelectorAll("td");for(c=0;c<g.length;c++)if(g[c]==u){f=c;break}}}var v=_.currentTarget;t.delay(function(){var y;(s||d||l)&&(s?(y=new e.$keyboardNavigation.MinicalButton(v,0),t.setActiveNode(new e.$keyboardNavigation.MinicalButton(v,0))):d?y=new e.$keyboardNavigation.MinicalButton(v,1):l&&(y=new e.$keyboardNavigation.MinicalCell(v,h,f)),y&&(t.enable(),y.isValid()&&(t.activeNode=null,t.setActiveNode(y))))})}if(e.renderCalendar){var o=e.renderCalendar;e.renderCalendar=function(){var _=o.apply(this,arguments),i=e.$keyboardNavigation._minicalendars;e.eventRemove(_,"click",n),e.event(_,"click",n),e.eventRemove(_,"focus",a),e.event(_,"focus",a);for(var s=!1,d=0;d<i.length;d++)if(i[d]==_){s=!0;break}if(s||i.push(_),t.isEnabled()){var l=t.getActiveNode();l&&l.container==_?t.focusNode(l):_.setAttribute("tabindex","0")}else _.setAttribute("tabindex","0");return _}}if(e.destroyCalendar){var r=e.destroyCalendar;e.destroyCalendar=function(_,i){_=_||(e._def_count?e._def_count.firstChild:null);var s=r.apply(this,arguments);if(!_||!_.parentNode)for(var d=e.$keyboardNavigation._minicalendars,l=0;l<d.length;l++)d[l]==_&&(e.eventRemove(d[l],"focus",a),d.splice(l,1),l--);return s}}}}function key_nav(e){function t(a){var n={minicalButton:e.$keyboardNavigation.MinicalButton,minicalDate:e.$keyboardNavigation.MinicalCell,scheduler:e.$keyboardNavigation.SchedulerNode,dataArea:e.$keyboardNavigation.DataArea,timeSlot:e.$keyboardNavigation.TimeSlot,event:e.$keyboardNavigation.Event},o={};for(var r in n)o[r.toLowerCase()]=n[r];return o[a=(a+"").toLowerCase()]||n.scheduler}e.config.key_nav=!0,e.config.key_nav_step=30,e.addShortcut=function(a,n,o){var r=t(o);r&&r.prototype.bind(a,n)},e.getShortcutHandler=function(a,n){var o=t(n);if(o){var r=e.$keyboardNavigation.shortcuts.parse(a);if(r.length)return o.prototype.findHandler(r[0])}},e.removeShortcut=function(a,n){var o=t(n);o&&o.prototype.unbind(a)},e.focus=function(){if(e.config.key_nav){var a=e.$keyboardNavigation.dispatcher;a.enable();var n=a.getActiveNode();!n||n instanceof e.$keyboardNavigation.MinicalButton||n instanceof e.$keyboardNavigation.MinicalCell?a.setDefaultNode():a.focusNode(a.getActiveNode())}},e.$keyboardNavigation={},e._compose=function(){for(var a=Array.prototype.slice.call(arguments,0),n={},o=0;o<a.length;o++){var r=a[o];for(var _ in typeof r=="function"&&(r=new r),r)n[_]=r[_]}return n},keyboard_shortcuts(e),eventhandler(e),trap_modal_focus(e),marker(e),scheduler_node(e),nav_node(e),header_cell(e),event$1(e),time_slot(e),minical_button(e),minical_cell(e),data_area(e),modals(e),core(e),key_nav_legacy(e),function(){scheduler_handlers(e),minical_handlers(e);var a=e.$keyboardNavigation.dispatcher;if(e.$keyboardNavigation.attachSchedulerHandlers(),e.renderCalendar)e.$keyboardNavigation.patchMinicalendar();else var n=e.attachEvent("onSchedulerReady",function(){e.detachEvent(n),e.$keyboardNavigation.patchMinicalendar()});function o(){if(e.config.key_nav){var _=document.activeElement;return!(!_||e.utils.dom.locateCss(_,"dhx_cal_quick_info",!1))&&(e.$keyboardNavigation.isChildOf(_,e.$container)||e.$keyboardNavigation.isMinical(_))}}function r(_){_&&!a.isEnabled()?a.enable():!_&&a.isEnabled()&&a.disable()}setInterval(function(){if(e.$container&&e.$keyboardNavigation.isChildOf(e.$container,document.body)){var _=o();_?r(_):!_&&a.isEnabled()&&setTimeout(function(){e.$destroyed||(e.config.key_nav?r(o()):e.$container.removeAttribute("tabindex"))},100)}},500)}()}function layer(e){e.attachEvent("onTemplatesReady",function(){this.layers.sort(function(a,n){return a.zIndex-n.zIndex}),e._dp_init=function(a){a._methods=["_set_event_text_style","","changeEventId","deleteEvent"],this.attachEvent("onEventAdded",function(n){!this._loading&&this.validId(n)&&this.getEvent(n)&&this.getEvent(n).layer==a.layer&&a.setUpdated(n,!0,"inserted")}),this.attachEvent("onBeforeEventDelete",function(n){if(this.getEvent(n)&&this.getEvent(n).layer==a.layer){if(!this.validId(n))return;var o=a.getState(n);return o=="inserted"||this._new_event?(a.setUpdated(n,!1),!0):o!="deleted"&&(o=="true_deleted"||(a.setUpdated(n,!0,"deleted"),!1))}return!0}),this.attachEvent("onEventChanged",function(n){!this._loading&&this.validId(n)&&this.getEvent(n)&&this.getEvent(n).layer==a.layer&&a.setUpdated(n,!0,"updated")}),a._getRowData=function(n,o){var r=this.obj.getEvent(n),_={};for(var i in r)i.indexOf("_")!==0&&(r[i]&&r[i].getUTCFullYear?_[i]=this.obj._helpers.formatDate(r[i]):_[i]=r[i]);return _},a._clearUpdateFlag=function(){},a.attachEvent("insertCallback",e._update_callback),a.attachEvent("updateCallback",e._update_callback),a.attachEvent("deleteCallback",function(n,o){this.obj.setUserData(o,this.action_param,"true_deleted"),this.obj.deleteEvent(o)})},function(){var a=function(r){if(r===null||typeof r!="object")return r;var _=new r.constructor;for(var i in r)_[i]=a(r[i]);return _};e._dataprocessors=[],e._layers_zindex={};for(var n=0;n<e.layers.length;n++){if(e.config["lightbox_"+e.layers[n].name]={},e.config["lightbox_"+e.layers[n].name].sections=a(e.config.lightbox.sections),e._layers_zindex[e.layers[n].name]=e.config.initial_layer_zindex||5+3*n,e.layers[n].url){var o=e.createDataProcessor({url:e.layers[n].url});o.layer=e.layers[n].name,e._dataprocessors.push(o),e._dataprocessors[n].init(e)}e.layers[n].isDefault&&(e.defaultLayer=e.layers[n].name)}}(),e.showLayer=function(a){this.toggleLayer(a,!0)},e.hideLayer=function(a){this.toggleLayer(a,!1)},e.toggleLayer=function(a,n){var o=this.getLayer(a);o.visible=n!==void 0?!!n:!o.visible,this.setCurrentView(this._date,this._mode)},e.getLayer=function(a){var n,o;typeof a=="string"&&(o=a),typeof a=="object"&&(o=a.layer);for(var r=0;r<e.layers.length;r++)e.layers[r].name==o&&(n=e.layers[r]);return n},e.attachEvent("onBeforeLightbox",function(a){var n=this.getEvent(a);return this.config.lightbox.sections=this.config["lightbox_"+n.layer].sections,e.resetLightbox(),!0}),e.attachEvent("onClick",function(a,n){var o=e.getEvent(a);return!e.getLayer(o.layer).noMenu}),e.attachEvent("onEventCollision",function(a,n){var o=this.getLayer(a);if(!o.checkCollision)return!1;for(var r=0,_=0;_<n.length;_++)n[_].layer==o.name&&n[_].id!=a.id&&r++;return r>=e.config.collision_limit}),e.addEvent=function(a,n,o,r,_){var i=a;arguments.length!=1&&((i=_||{}).start_date=a,i.end_date=n,i.text=o,i.id=r,i.layer=this.defaultLayer),i.id=i.id||e.uid(),i.text=i.text||"",typeof i.start_date=="string"&&(i.start_date=this.templates.api_date(i.start_date)),typeof i.end_date=="string"&&(i.end_date=this.templates.api_date(i.end_date)),i._timed=this.isOneDayEvent(i);var s=!this._events[i.id];this._events[i.id]=i,this.event_updated(i),this._loading||this.callEvent(s?"onEventAdded":"onEventChanged",[i.id,i])},this._evs_layer={};for(var t=0;t<this.layers.length;t++)this._evs_layer[this.layers[t].name]=[];e.addEventNow=function(a,n,o){var r={};typeof a=="object"&&(r=a,a=null);var _=6e4*(this.config.event_duration||this.config.time_step);a||(a=Math.round(e._currentDate().valueOf()/_)*_);var i=new Date(a);if(!n){var s=this.config.first_hour;s>i.getHours()&&(i.setHours(s),a=i.valueOf()),n=a+_}r.start_date=r.start_date||i,r.end_date=r.end_date||new Date(n),r.text=r.text||this.locale.labels.new_event,r.id=this._drag_id=this.uid(),r.layer=this.defaultLayer,this._drag_mode="new-size",this._loading=!0,this.addEvent(r),this.callEvent("onEventCreated",[this._drag_id,o]),this._loading=!1,this._drag_event={},this._on_mouse_up(o)},e._t_render_view_data=function(a){if(this.config.multi_day&&!this._table_view){for(var n=[],o=[],r=0;r<a.length;r++)a[r]._timed?n.push(a[r]):o.push(a[r]);this._table_view=!0,this.render_data(o),this._table_view=!1,this.render_data(n)}else this.render_data(a)},e.render_view_data=function(){if(this._not_render)this._render_wait=!0;else{this._render_wait=!1,this.clear_view(),this._evs_layer={};for(var a=0;a<this.layers.length;a++)this._evs_layer[this.layers[a].name]=[];var n=this.get_visible_events();for(a=0;a<n.length;a++)this._evs_layer[n[a].layer]&&this._evs_layer[n[a].layer].push(n[a]);if(this._mode=="month"){var o=[];for(a=0;a<this.layers.length;a++)this.layers[a].visible&&(o=o.concat(this._evs_layer[this.layers[a].name]));this._t_render_view_data(o)}else for(a=0;a<this.layers.length;a++)if(this.layers[a].visible){var r=this._evs_layer[this.layers[a].name];this._t_render_view_data(r)}}},e._render_v_bar=function(a,n,o,r,_,i,s,d,l){var h=a.id;s.indexOf("<div class=")==-1&&(s=e.templates["event_header_"+a.layer]?e.templates["event_header_"+a.layer](a.start_date,a.end_date,a):s),d.indexOf("<div class=")==-1&&(d=e.templates["event_text_"+a.layer]?e.templates["event_text_"+a.layer](a.start_date,a.end_date,a):d);var f=document.createElement("div"),m="dhx_cal_event",u=e.templates["event_class_"+a.layer]?e.templates["event_class_"+a.layer](a.start_date,a.end_date,a):e.templates.event_class(a.start_date,a.end_date,a);u&&(m=m+" "+u);var p=e._border_box_events(),b=r-2,c=p?b:r-4,g=p?b:r-6,v=p?b:r-14,y=p?b-2:r-8,x=p?_-this.xy.event_header_height:_-30+1,k='<div event_id="'+h+'" '+e.config.event_attribute+'="'+h+'" class="'+m+'" style="position:absolute; top:'+o+"px; left:"+n+"px; width:"+c+"px; height:"+_+"px;"+(i||"")+'">';return k+='<div class="dhx_header" style=" width:'+g+'px;" >&nbsp;</div>',k+='<div class="dhx_title">'+s+"</div>",k+='<div class="dhx_body" style=" width:'+v+"px; height:"+x+'px;">'+d+"</div>",k+='<div class="dhx_footer" style=" width:'+y+"px;"+(l?" margin-top:-1px;":"")+'" ></div></div>',f.innerHTML=k,f.style.zIndex=100,f.firstChild},e.render_event_bar=function(a){var n=this._els.dhx_cal_data[0],o=this._colsS[a._sday],r=this._colsS[a._eday];r==o&&(r=this._colsS[a._eday+1]);var _=this.xy.bar_height,i=this._colsS.heights[a._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+a._sorder*_,s=document.createElement("div"),d=a._timed?"dhx_cal_event_clear":"dhx_cal_event_line",l=e.templates["event_class_"+a.layer]?e.templates["event_class_"+a.layer](a.start_date,a.end_date,a):e.templates.event_class(a.start_date,a.end_date,a);l&&(d=d+" "+l);var h='<div event_id="'+a.id+'" '+this.config.event_attribute+'="'+a.id+'" class="'+d+'" style="position:absolute; top:'+i+"px; left:"+o+"px; width:"+(r-o-15)+"px;"+(a._text_style||"")+'">';a._timed&&(h+=e.templates["event_bar_date_"+a.layer]?e.templates["event_bar_date_"+a.layer](a.start_date,a.end_date,a):e.templates.event_bar_date(a.start_date,a.end_date,a)),h+=e.templates["event_bar_text_"+a.layer]?e.templates["event_bar_text_"+a.layer](a.start_date,a.end_date,a):e.templates.event_bar_text(a.start_date,a.end_date,a)+"</div>)",h+="</div>",s.innerHTML=h,this._rendered.push(s.firstChild),n.appendChild(s.firstChild)},e.render_event=function(a){var n=e.xy.menu_width;if(e.getLayer(a.layer).noMenu&&(n=0),!(a._sday<0)){var o=e.locate_holder(a._sday);if(o){var r=60*a.start_date.getHours()+a.start_date.getMinutes(),_=60*a.end_date.getHours()+a.end_date.getMinutes()||60*e.config.last_hour,i=Math.round((60*r*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)+1,s=Math.max(e.xy.min_event_height,(_-r)*this.config.hour_size_px/60)+1,d=Math.floor((o.clientWidth-n)/a._count),l=a._sorder*d+1;a._inner||(d*=a._count-a._sorder);var h=this._render_v_bar(a.id,n+l,i,d,s,a._text_style,e.templates.event_header(a.start_date,a.end_date,a),e.templates.event_text(a.start_date,a.end_date,a));if(this._rendered.push(h),o.appendChild(h),l=l+parseInt(o.style.left,10)+n,i+=this._dy_shift,h.style.zIndex=this._layers_zindex[a.layer],this._edit_id==a.id){h.style.zIndex=parseInt(h.style.zIndex)+1;var f=h.style.zIndex;d=Math.max(d-4,e.xy.editor_width),(h=document.createElement("div")).setAttribute("event_id",a.id),h.setAttribute(this.config.event_attribute,a.id),this.set_xy(h,d,s-20,l,i+14),h.className="dhx_cal_editor",h.style.zIndex=f;var m=document.createElement("div");this.set_xy(m,d-6,s-26),m.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",m.style.zIndex=f,h.appendChild(m),this._els.dhx_cal_data[0].appendChild(h),this._rendered.push(h),m.innerHTML="<textarea class='dhx_cal_editor'>"+a.text+"</textarea>",this._editor=m.firstChild,this._editor.addEventListener("keypress",function(g){if(g.shiftKey)return!0;var v=g.keyCode;v==e.keys.edit_save&&e.editStop(!0),v==e.keys.edit_cancel&&e.editStop(!1)}),this._editor.addEventListener("selectstart",function(g){return g.cancelBubble=!0,!0}),m.firstChild.focus(),this._els.dhx_cal_data[0].scrollLeft=0,m.firstChild.select()}if(this._select_id==a.id){h.style.zIndex=parseInt(h.style.zIndex)+1;for(var u=this.config["icons_"+(this._edit_id==a.id?"edit":"select")],p="",b=0;b<u.length;b++)p+="<div class='dhx_menu_icon "+u[b]+"' title='"+this.locale.labels[u[b]]+"'></div>";var c=this._render_v_bar(a.id,l-n+1,i,n,20*u.length+26,"","<div class='dhx_menu_head'></div>",p,!0);c.style.left=l-n+1,c.style.zIndex=h.style.zIndex,this._els.dhx_cal_data[0].appendChild(c),this._rendered.push(c)}}}},e.filter_agenda=function(a,n){var o=e.getLayer(n.layer);return o&&o.visible}})}function dhtmlxError$1(e,t,a){return this.catches||(this.catches=[]),this}function extend(){global$1.dhtmlx||(global$1.dhtmlx=function(e){for(var t in e)dhtmlx[t]=e[t];return dhtmlx});let dhtmlx=global$1.dhtmlx;function dtmlXMLLoaderObject(e,t,a,n){return this.xmlDoc="",this.async=a===void 0||a,this.onloadAction=e||null,this.mainObject=t||null,this.waitCall=null,this.rSeed=n||!1,this}function dhtmlDragAndDropObject(){return global$1.dhtmlDragAndDrop?global$1.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,global$1.dhtmlDragAndDrop=this,this)}dhtmlx.extend_api=function(e,t,a){var n=global$1[e];n&&(global$1[e]=function(o){var r;if(o&&typeof o=="object"&&!o.tagName){for(var _ in r=n.apply(this,t._init?t._init(o):arguments),dhtmlx)t[_]&&this[t[_]](dhtmlx[_]);for(var _ in o)t[_]?this[t[_]](o[_]):_.indexOf("on")===0&&this.attachEvent(_,o[_])}else r=n.apply(this,arguments);return t._patch&&t._patch(this),r||this},global$1[e].prototype=n.prototype,a&&dhtmlXHeir(global$1[e].prototype,a))},global$1.dhtmlxAjax={get:function(e,t){var a=new dtmlXMLLoaderObject(!0);return a.async=arguments.length<3,a.waitCall=t,a.loadXML(e),a},post:function(e,t,a){var n=new dtmlXMLLoaderObject(!0);return n.async=arguments.length<4,n.waitCall=a,n.loadXML(e,!0,t),n},getSync:function(e){return this.get(e,null,!0)},postSync:function(e,t){return this.post(e,t,null,!0)}},global$1.dtmlXMLLoaderObject=dtmlXMLLoaderObject,dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(e){var t=!0;return this.check=function(){if(e&&e.onloadAction&&(!e.xmlDoc.readyState||e.xmlDoc.readyState==4)){if(!t)return;t=!1,dtmlXMLLoaderObject.count++,typeof e.onloadAction=="function"&&e.onloadAction(e.mainObject,null,null,null,e),e.waitCall&&(e.waitCall.call(this,e),e.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(e,t){var a;if(this.xmlDoc.responseXML){if((n=this.xmlDoc.responseXML.getElementsByTagName(e)).length===0&&e.indexOf(":")!=-1)var n=this.xmlDoc.responseXML.getElementsByTagName(e.split(":")[1]);a=n[0]}else a=this.xmlDoc.documentElement;return a?(this._retry=!1,a):!this._retry&&_isIE?(this._retry=!0,t=this.xmlDoc,this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(e,t)):(dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]),document.createElement("div"))},dtmlXMLLoaderObject.prototype.loadXMLString=function(e,t){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(e);else{var a=new DOMParser;this.xmlDoc=a.parseFromString(e,"text/xml")}t||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(e,t,a,n){this.rSeed&&(e+=(e.indexOf("?")!=-1?"&":"?")+"a_dhx_rSeed="+new Date().valueOf()),this.filePath=e,!_isIE&&global$1.XMLHttpRequest?this.xmlDoc=new XMLHttpRequest:this.xmlDoc=new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),typeof t=="string"?this.xmlDoc.open(t,e,this.async):this.xmlDoc.open(t?"POST":"GET",e,this.async),n?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):t&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(a),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this._filterXPath=null,this._getAllNamedChilds=null,this._retry=null,this.async=null,this.rSeed=null,this.filePath=null,this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,this.doXPath=null,this.doXPathOpera=null,this.doXSLTransToObject=null,this.doXSLTransToString=null,this.loadXML=null,this.loadXMLString=null,this.doSerialization=null,this.xmlNodeToJSON=null,this.getXMLTopNode=null,this.setXSLParamValue=null,null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(e){for(var t={},a=0;a<e.attributes.length;a++)t[e.attributes[a].name]=e.attributes[a].value;for(t._tagvalue=e.firstChild?e.firstChild.nodeValue:"",a=0;a<e.childNodes.length;a++){var n=e.childNodes[a].tagName;n&&(t[n]||(t[n]=[]),t[n].push(this.xmlNodeToJSON(e.childNodes[a])))}return t},global$1.dhtmlDragAndDropObject=dhtmlDragAndDropObject,dhtmlDragAndDropObject.prototype.removeDraggableItem=function(e){e.onmousedown=null,e.dragStarter=null,e.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(e,t){e.onmousedown=this.preCreateDragCopy,e.dragStarter=t,this.addDragLanding(e,t)},dhtmlDragAndDropObject.prototype.addDragLanding=function(e,t){e.dragLanding=t},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(e){if(!e&&!global$1.event||(e||event).button!=2)return global$1.dhtmlDragAndDrop.waitDrag?(global$1.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=global$1.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=global$1.dhtmlDragAndDrop.tempDOMM,!1):(global$1.dhtmlDragAndDrop.dragNode&&global$1.dhtmlDragAndDrop.stopDrag(e),global$1.dhtmlDragAndDrop.waitDrag=1,global$1.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,global$1.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,global$1.dhtmlDragAndDrop.dragStartNode=this,global$1.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=global$1.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=global$1.dhtmlDragAndDrop.callDrag,global$1.dhtmlDragAndDrop.downtime=new Date().valueOf(),!(!e||!e.preventDefault)&&(e.preventDefault(),!1))},dhtmlDragAndDropObject.prototype.callDrag=function(e){e||(e=global$1.event);var t=global$1.dhtmlDragAndDrop;if(!(new Date().valueOf()-t.downtime<100)){if(!t.dragNode){if(!t.waitDrag)return t.stopDrag(e,!0);if(t.dragNode=t.dragStartObject._createDragNode(t.dragStartNode,e),!t.dragNode)return t.stopDrag();t.dragNode.onselectstart=function(){return!1},t.gldragNode=t.dragNode,document.body.appendChild(t.dragNode),document.body.onmouseup=t.stopDrag,t.waitDrag=0,t.dragNode.pWindow=global$1,t.initFrameRoute()}if(t.dragNode.parentNode!=global$1.document.body&&t.gldragNode){var a=t.gldragNode;t.gldragNode.old&&(a=t.gldragNode.old),a.parentNode.removeChild(a);var n=t.dragNode.pWindow;if(a.pWindow&&a.pWindow.dhtmlDragAndDrop.lastLanding&&a.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(a.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var o=document.createElement("div");o.innerHTML=t.dragNode.outerHTML,t.dragNode=o.childNodes[0]}else t.dragNode=t.dragNode.cloneNode(!0);t.dragNode.pWindow=global$1,t.gldragNode.old=t.dragNode,document.body.appendChild(t.dragNode),n.dhtmlDragAndDrop.dragNode=t.dragNode}var r;t.dragNode.style.left=e.clientX+15+(t.fx?-1*t.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",t.dragNode.style.top=e.clientY+3+(t.fy?-1*t.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",r=e.srcElement?e.srcElement:e.target,t.checkLanding(r,e)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(global$1.name){for(var t=parent.frames[global$1.name].frameElement.offsetParent,a=0,n=0;t;)a+=t.offsetLeft,n+=t.offsetTop,t=t.offsetParent;if(parent.dhtmlDragAndDrop){var o=parent.dhtmlDragAndDrop.calculateFramePosition(1);a+=1*o.split("_")[0],n+=1*o.split("_")[1]}if(e)return a+"_"+n;this.fx=a,this.fy=n}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(e,t){e&&e.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=e,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,t.clientX,t.clientY,t),this.lastLanding_scr=_isIE?t.srcElement:t.target):e&&e.tagName!="BODY"?this.checkLanding(e.parentNode,t):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,t.clientX,t.clientY,t),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(e,t){var a=global$1.dhtmlDragAndDrop;if(!t){a.stopFrameRoute();var n=a.lastLanding;a.lastLanding=null,n&&n.dragLanding._drag(a.dragStartNode,a.dragStartObject,n,_isIE?event.srcElement:e.target)}a.lastLanding=null,a.dragNode&&a.dragNode.parentNode==document.body&&a.dragNode.parentNode.removeChild(a.dragNode),a.dragNode=0,a.gldragNode=0,a.fx=0,a.fy=0,a.dragStartNode=0,a.dragStartObject=0,document.body.onmouseup=a.tempDOMU,document.body.onmousemove=a.tempDOMM,a.tempDOMU=null,a.tempDOMM=null,a.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(e){e&&global$1.dhtmlDragAndDrop.stopDrag(1,1);for(var t=0;t<global$1.frames.length;t++)try{global$1.frames[t]!=e&&global$1.frames[t].dhtmlDragAndDrop&&global$1.frames[t].dhtmlDragAndDrop.stopFrameRoute(global$1)}catch{}try{parent.dhtmlDragAndDrop&&parent!=global$1&&parent!=e&&parent.dhtmlDragAndDrop.stopFrameRoute(global$1)}catch{}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(e,t){e&&(global$1.dhtmlDragAndDrop.preCreateDragCopy(),global$1.dhtmlDragAndDrop.dragStartNode=e.dhtmlDragAndDrop.dragStartNode,global$1.dhtmlDragAndDrop.dragStartObject=e.dhtmlDragAndDrop.dragStartObject,global$1.dhtmlDragAndDrop.dragNode=e.dhtmlDragAndDrop.dragNode,global$1.dhtmlDragAndDrop.gldragNode=e.dhtmlDragAndDrop.dragNode,global$1.document.body.onmouseup=global$1.dhtmlDragAndDrop.stopDrag,global$1.waitDrag=0,!_isIE&&t&&(!_isFF||_FFrv<1.8)&&global$1.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=global$1&&parent!=e&&parent.dhtmlDragAndDrop.initFrameRoute(global$1)}catch{}for(var a=0;a<global$1.frames.length;a++)try{global$1.frames[a]!=e&&global$1.frames[a].dhtmlDragAndDrop&&global$1.frames[a].dhtmlDragAndDrop.initFrameRoute(global$1,!e||t?1:0)}catch{}};var _isFF=!1,_isIE=!1,_isKHTML=!1,_FFrv=!1,_KHTMLrv=!1;function dhtmlXHeir(e,t){for(var a in t)typeof t[a]=="function"&&(e[a]=t[a]);return e}navigator.userAgent.indexOf("Macintosh"),navigator.userAgent.toLowerCase().indexOf("chrome"),navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("Konqueror")!=-1?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):navigator.userAgent.indexOf("Opera")!=-1?parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3)):navigator.appName.indexOf("Microsoft")!=-1?(_isIE=!0,navigator.appVersion.indexOf("MSIE 8.0")==-1&&navigator.appVersion.indexOf("MSIE 9.0")==-1&&navigator.appVersion.indexOf("MSIE 10.0")==-1||document.compatMode=="BackCompat"||(_isIE=8)):navigator.appName=="Netscape"&&navigator.userAgent.indexOf("Trident")!=-1?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(e,t,a,n){if(_isKHTML||!_isIE&&!global$1.XPathResult)return this.doXPathOpera(e,t);if(_isIE)return t||(t=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),t||dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]),a&&t.setProperty("SelectionNamespaces","xmlns:xsl='"+a+"'"),n=="single"?t.selectSingleNode(e):t.selectNodes(e)||new Array(0);var o=t;t||(t=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),t||dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]),t.nodeName.indexOf("document")!=-1?o=t:(o=t,t=t.ownerDocument);var r=XPathResult.ANY_TYPE;n=="single"&&(r=XPathResult.FIRST_ORDERED_NODE_TYPE);var _=[],i=t.evaluate(e,o,function(d){return a},r,null);if(r==XPathResult.FIRST_ORDERED_NODE_TYPE)return i.singleNodeValue;for(var s=i.iterateNext();s;)_[_.length]=s,s=i.iterateNext();return _},global$1.dhtmlxError=new dhtmlxError$1,dtmlXMLLoaderObject.prototype.doXPathOpera=function(e,t){var a=e.replace(/[\/]+/gi,"/").split("/"),n=null,o=1;if(!a.length)return[];if(a[0]==".")n=[t];else{if(a[0]!=="")return[];n=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(a[o].replace(/\[[^\]]*\]/g,"")),o++}for(;o<a.length;o++)n=this._getAllNamedChilds(n,a[o]);return a[o-1].indexOf("[")!=-1&&(n=this._filterXPath(n,a[o-1])),n},dtmlXMLLoaderObject.prototype._filterXPath=function(e,t){for(var a=[],n=(t=t.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),0);n<e.length;n++)e[n].getAttribute(t)&&(a[a.length]=e[n]);return a},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(e,t){var a=[];_isKHTML&&(t=t.toUpperCase());for(var n=0;n<e.length;n++)for(var o=0;o<e[n].childNodes.length;o++)_isKHTML?e[n].childNodes[o].tagName&&e[n].childNodes[o].tagName.toUpperCase()==t&&(a[a.length]=e[n].childNodes[o]):e[n].childNodes[o].tagName==t&&(a[a.length]=e[n].childNodes[o]);return a},global$1.dhtmlxEvent===void 0&&(global$1.dhtmlxEvent=function(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)}),dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(e,t,a){a||(a=this.xslDoc),a.responseXML&&(a=a.responseXML);var n=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+e+"']",a,"http://www.w3.org/1999/XSL/Transform","single");n&&(n.firstChild.nodeValue=t)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(e,t){var a;if(e||(e=this.xslDoc),e.responseXML&&(e=e.responseXML),t||(t=this.xmlDoc),t.responseXML&&(t=t.responseXML),_isIE){a=new ActiveXObject("Msxml2.DOMDocument.3.0");try{t.transformNodeToObject(e,a)}catch{a=t.transformNode(e)}}else this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(e)),a=this.XSLProcessor.transformToDocument(t);return a},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(e,t){var a=this.doXSLTransToObject(e,t);return typeof a=="string"?a:this.doSerialization(a)},dtmlXMLLoaderObject.prototype.doSerialization=function(e){return e||(e=this.xmlDoc),e.responseXML&&(e=e.responseXML),_isIE?e.xml:new XMLSerializer().serializeToString(e)},global$1.dhtmlxEventable=function(obj){obj.attachEvent=function(e,t,a){return this[e="ev_"+e.toLowerCase()]||(this[e]=new this.eventCatcher(a||this)),e+":"+this[e].addEvent(t)},obj.callEvent=function(e,t){return!this[e="ev_"+e.toLowerCase()]||this[e].apply(this,t)},obj.checkEvent=function(e){return!!this["ev_"+e.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var e=!0,t=0;t<dhx_catch.length;t++)if(dhx_catch[t]){var a=dhx_catch[t].apply(obj,arguments);e=e&&a}return e};return z.addEvent=function(ev){return typeof ev!="function"&&(ev=eval(ev)),!!ev&&dhx_catch.push(ev)-1},z.removeEvent=function(e){dhx_catch[e]=null},z},obj.detachEvent=function(e){if(e){var t=e.split(":");this[t[0]].removeEvent(t[1])}},obj.detachAllEvents=function(){for(var e in this)e.indexOf("ev_")===0&&(this.detachEvent(e),this[e]=null)},obj=null}}function legacy(e){extend()}function limit(e){e.config.limit_start=null,e.config.limit_end=null,e.config.limit_view=!1,e.config.check_limits=!0,e.config.mark_now=!0,e.config.display_marked_timespans=!0,e.config.overwrite_marked_timespans=!0,e._temp_limit_scope=function(){var t=null,a="dhx_time_block",n="default",o=function(i,s,d){var l=typeof i=="object"?i:{days:i};return l.type=a,l.css="",s&&(d&&(l.sections=d),l=function(h,f,m){return f instanceof Date&&m instanceof Date?(h.start_date=f,h.end_date=m):(h.days=f,h.zones=m),h}(l,i,s)),l};e.blockTime=function(i,s,d){var l=o(i,s,d);return e.addMarkedTimespan(l)},e.unblockTime=function(i,s,d){var l=o(i,s=s||"fullday",d);return e.deleteMarkedTimespan(l)},e.attachEvent("onBeforeViewChange",function(i,s,d,l){function h(f,m){var u=e.config.limit_start,p=e.config.limit_end,b=e.date.add(f,1,m);return f.valueOf()>p.valueOf()||b<=u.valueOf()}return!e.config.limit_view||!h(l=l||s,d=d||i)||s.valueOf()==l.valueOf()||(setTimeout(function(){if(e.$destroyed)return!0;var f=h(s,d)?e.config.limit_start:s;e.setCurrentView(h(f,d)?null:f,d)},1),!1)}),e.checkInMarkedTimespan=function(i,s,d){s=s||n;for(var l=!0,h=new Date(i.start_date.valueOf()),f=e.date.add(h,1,"day"),m=e._marked_timespans;h<i.end_date;h=e.date.date_part(f),f=e.date.add(h,1,"day")){var u=+e.date.date_part(new Date(h)),p=_(i,m,h.getDay(),u,s);if(p)for(var b=0;b<p.length;b+=2){var c=e._get_zone_minutes(h),g=i.end_date>f||i.end_date.getDate()!=h.getDate()?1440:e._get_zone_minutes(i.end_date),v=p[b],y=p[b+1];if(v<g&&y>c&&!(l=typeof d=="function"&&d(i,c,g,v,y)))break}}return!l};var r=e.checkLimitViolation=function(i){if(!i||!e.config.check_limits)return!0;var s=e,d=s.config,l=[];if(i.rec_type)for(var h=e.getRecDates(i),f=0;f<h.length;f++){var m=e._copy_event(i);e._lame_copy(m,h[f]),l.push(m)}else l=[i];for(var u=!0,p=0;p<l.length;p++){var b=!0;(m=l[p])._timed=e.isOneDayEvent(m),(b=!d.limit_start||!d.limit_end||m.start_date.valueOf()>=d.limit_start.valueOf()&&m.end_date.valueOf()<=d.limit_end.valueOf())&&(b=!e.checkInMarkedTimespan(m,a,function(c,g,v,y,x){var k=!0;return g<=x&&g>=y&&((x==1440||v<=x)&&(k=!1),c._timed&&s._drag_id&&s._drag_mode=="new-size"?(c.start_date.setHours(0),c.start_date.setMinutes(x)):k=!1),(v>=y&&v<=x||g<y&&v>x)&&(c._timed&&s._drag_id&&s._drag_mode=="new-size"?(c.end_date.setHours(0),c.end_date.setMinutes(y)):k=!1),k})),b||(b=s.checkEvent("onLimitViolation")?s.callEvent("onLimitViolation",[m.id,m]):b),u=u&&b}return u||(s._drag_id=null,s._drag_mode=null),u};function _(i,s,d,l,h){var f=e,m=[],u={_props:"map_to",matrix:"y_property"};for(var p in u){var b=u[p];if(f[p])for(var c in f[p]){var g=f[p][c][b];i[g]&&(m=f._add_timespan_zones(m,e._get_blocked_zones(s[c],i[g],d,l,h)))}}return m=f._add_timespan_zones(m,e._get_blocked_zones(s,"global",d,l,h))}e._get_blocked_zones=function(i,s,d,l,h){var f=[];if(i&&i[s])for(var m=i[s],u=this._get_relevant_blocked_zones(d,l,m,h),p=0;p<u.length;p++)f=this._add_timespan_zones(f,u[p].zones);return f},e._get_relevant_blocked_zones=function(i,s,d,l){var h;return e.config.overwrite_marked_timespans?h=d[s]&&d[s][l]?d[s][l]:d[i]&&d[i][l]?d[i][l]:[]:(h=[],d[s]&&d[s][l]&&(h=h.concat(d[s][l])),d[i]&&d[i][l]&&(h=h.concat(d[i][l]))),h},e.attachEvent("onMouseDown",function(i){return i!=a}),e.attachEvent("onBeforeDrag",function(i){return!i||r(e.getEvent(i))}),e.attachEvent("onClick",function(i,s){return r(e.getEvent(i))}),e.attachEvent("onBeforeLightbox",function(i){var s=e.getEvent(i);return t=[s.start_date,s.end_date],r(s)}),e.attachEvent("onEventSave",function(i,s,d){if(!s.start_date||!s.end_date){var l=e.getEvent(i);s.start_date=new Date(l.start_date),s.end_date=new Date(l.end_date)}if(s.rec_type){var h=e._lame_clone(s);return e._roll_back_dates(h),r(h)}return r(s)}),e.attachEvent("onEventAdded",function(i){if(!i)return!0;var s=e.getEvent(i);return!r(s)&&e.config.limit_start&&e.config.limit_end&&(s.start_date<e.config.limit_start&&(s.start_date=new Date(e.config.limit_start)),s.start_date.valueOf()>=e.config.limit_end.valueOf()&&(s.start_date=this.date.add(e.config.limit_end,-1,"day")),s.end_date<e.config.limit_start&&(s.end_date=new Date(e.config.limit_start)),s.end_date.valueOf()>=e.config.limit_end.valueOf()&&(s.end_date=this.date.add(e.config.limit_end,-1,"day")),s.start_date.valueOf()>=s.end_date.valueOf()&&(s.end_date=this.date.add(s.start_date,this.config.event_duration||this.config.time_step,"minute")),s._timed=this.isOneDayEvent(s)),!0}),e.attachEvent("onEventChanged",function(i){if(!i)return!0;var s=e.getEvent(i);if(!r(s)){if(!t)return!1;s.start_date=t[0],s.end_date=t[1],s._timed=this.isOneDayEvent(s)}return!0}),e.attachEvent("onBeforeEventChanged",function(i,s,d){return r(i)}),e.attachEvent("onBeforeEventCreated",function(i){var s=e.getActionData(i).date,d={_timed:!0,start_date:s,end_date:e.date.add(s,e.config.time_step,"minute")};return r(d)}),e.attachEvent("onViewChange",function(){e._mark_now()}),e.attachEvent("onAfterSchedulerResize",function(){return window.setTimeout(function(){if(e.$destroyed)return!0;e._mark_now()},1),!0}),e.attachEvent("onTemplatesReady",function(){e._mark_now_timer=window.setInterval(function(){e._is_initialized()&&e._mark_now()},6e4)}),e._mark_now=function(i){var s="dhx_now_time";this._els[s]||(this._els[s]=[]);var d=e._currentDate(),l=this.config;if(e._remove_mark_now(),!i&&l.mark_now&&d<this._max_date&&d>this._min_date&&d.getHours()>=l.first_hour&&d.getHours()<l.last_hour){var h=this.locate_holder_day(d);this._els[s]=e._append_mark_now(h,d)}},e._append_mark_now=function(i,s){var d="dhx_now_time",l=e._get_zone_minutes(s),h={zones:[l,l+1],css:d,type:d};if(!this._table_view){if(this._props&&this._props[this._mode]){var f,m,u=this._props[this._mode],p=u.size||u.options.length;u.days>1?(u.size&&u.options.length&&(i=(u.position+i)/u.options.length*u.size),f=i,m=i+p):m=(f=0)+p;for(var b=[],c=f;c<m;c++){var g=c;h.days=g;var v=e._render_marked_timespan(h,null,g)[0];b.push(v)}return b}return h.days=i,e._render_marked_timespan(h,null,i)}if(this._mode=="month")return h.days=+e.date.date_part(s),e._render_marked_timespan(h,null,null)},e._remove_mark_now=function(){for(var i="dhx_now_time",s=this._els[i],d=0;d<s.length;d++){var l=s[d],h=l.parentNode;h&&h.removeChild(l)}this._els[i]=[]},e._marked_timespans={global:{}},e._get_zone_minutes=function(i){return 60*i.getHours()+i.getMinutes()},e._prepare_timespan_options=function(i){var s=[],d=[];if(i.days=="fullweek"&&(i.days=[0,1,2,3,4,5,6]),i.days instanceof Array){for(var l=i.days.slice(),h=0;h<l.length;h++){var f=e._lame_clone(i);f.days=l[h],s.push.apply(s,e._prepare_timespan_options(f))}return s}if(!i||!(i.start_date&&i.end_date&&i.end_date>i.start_date||i.days!==void 0&&i.zones)&&!i.type)return s;i.zones=="fullday"&&(i.zones=[0,1440]),i.zones&&i.invert_zones&&(i.zones=e.invertZones(i.zones)),i.id=e.uid(),i.css=i.css||"",i.type=i.type||n;var m=i.sections;if(m){for(var u in m)if(m.hasOwnProperty(u)){var p=m[u];for(p instanceof Array||(p=[p]),h=0;h<p.length;h++)(k=e._lame_copy({},i)).sections={},k.sections[u]=p[h],d.push(k)}}else d.push(i);for(var b=0;b<d.length;b++){var c=d[b],g=c.start_date,v=c.end_date;if(g&&v)for(var y=e.date.date_part(new Date(g)),x=e.date.add(y,1,"day");y<v;){var k;delete(k=e._lame_copy({},c)).start_date,delete k.end_date,k.days=y.valueOf();var w=g>y?e._get_zone_minutes(g):0,D=v>x||v.getDate()!=y.getDate()?1440:e._get_zone_minutes(v);k.zones=[w,D],s.push(k),y=x,x=e.date.add(x,1,"day")}else c.days instanceof Date&&(c.days=e.date.date_part(c.days).valueOf()),c.zones=i.zones.slice(),s.push(c)}return s},e._get_dates_by_index=function(i,s,d){var l=[];s=e.date.date_part(new Date(s||e._min_date)),d=new Date(d||e._max_date);for(var h=s.getDay(),f=i-h>=0?i-h:7-s.getDay()+i,m=e.date.add(s,f,"day");m<d;m=e.date.add(m,1,"week"))l.push(m);return l},e._get_css_classes_by_config=function(i){var s=[];return i.type==a&&(s.push(a),i.css&&s.push(a+"_reset")),s.push("dhx_marked_timespan",i.css),s.join(" ")},e._get_block_by_config=function(i){var s=document.createElement("div");return i.html&&(typeof i.html=="string"?s.innerHTML=i.html:s.appendChild(i.html)),s},e._render_marked_timespan=function(i,s,d){var l=[],h=e.config,f=this._min_date,m=this._max_date,u=!1;if(!h.display_marked_timespans)return l;if(!d&&d!==0){if(i.days<7)d=i.days;else{var p=new Date(i.days);if(u=+p,!(+m>+p&&+f<=+p))return l;d=p.getDay()}var b=f.getDay();b>d?d=7-(b-d):d-=b}var c=i.zones,g=e._get_css_classes_by_config(i);if(e._table_view&&e._mode=="month"){var v=[],y=[];if(s)v.push(s),y.push(d);else{y=u?[u]:e._get_dates_by_index(d);for(var x=0;x<y.length;x++)v.push(this._scales[y[x]])}for(x=0;x<v.length;x++){s=v[x],d=y[x];var k=this.locate_holder_day(d,!1)%this._cols.length;if(!this._ignores[k]){var w=e._get_block_by_config(i);w.className=g,w.style.top="0px",w.style.height="100%";for(var D=0;D<c.length;D+=2){var E=c[x];if((M=c[x+1])<=E)return[];(T=w.cloneNode(!0)).style.left="0px",T.style.width="100%",s.appendChild(T),l.push(T)}}}}else{var S=d;if(this._ignores[this.locate_holder_day(d,!1)])return l;if(this._props&&this._props[this._mode]&&i.sections&&i.sections[this._mode]){var N=this._props[this._mode];S=N.order[i.sections[this._mode]];var A=N.order[i.sections[this._mode]];N.days>1?S=S*(N.size||N.options.length)+A:(S=A,N.size&&S>N.position+N.size&&(S=0))}for(s=s||e.locate_holder(S),x=0;x<c.length;x+=2){var M,T;if(E=Math.max(c[x],60*h.first_hour),(M=Math.min(c[x+1],60*h.last_hour))<=E){if(x+2<c.length)continue;return[]}(T=e._get_block_by_config(i)).className=g;var C=24*this.config.hour_size_px+1,O=36e5;T.style.top=Math.round((60*E*1e3-this.config.first_hour*O)*this.config.hour_size_px/O)%C+"px",T.style.height=Math.max(Math.round(60*(M-E)*1e3*this.config.hour_size_px/O)%C,1)+"px",s.appendChild(T),l.push(T)}}return l},e._mark_timespans=function(){var i=this._els.dhx_cal_data[0],s=[];if(e._table_view&&e._mode=="month")for(var d in this._scales){var l=new Date(+d);s.push.apply(s,e._on_scale_add_marker(this._scales[d],l))}else{l=new Date(e._min_date);for(var h=0,f=i.childNodes.length;h<f;h++){var m=i.childNodes[h];m.firstChild&&e._getClassName(m.firstChild).indexOf("dhx_scale_hour")>-1||(s.push.apply(s,e._on_scale_add_marker(m,l)),l=e.date.add(l,1,"day"))}}return s},e.markTimespan=function(i){var s=!1;this._els.dhx_cal_data||(e.get_elements(),s=!0);var d=e._marked_timespans_ids,l=e._marked_timespans_types,h=e._marked_timespans;e.deleteMarkedTimespan(),e.addMarkedTimespan(i);var f=e._mark_timespans();return s&&(e._els=[]),e._marked_timespans_ids=d,e._marked_timespans_types=l,e._marked_timespans=h,f},e.unmarkTimespan=function(i){if(i)for(var s=0;s<i.length;s++){var d=i[s];d.parentNode&&d.parentNode.removeChild(d)}},e._addMarkerTimespanConfig=function(i){var s="global",d=e._marked_timespans,l=i.id,h=e._marked_timespans_ids;h[l]||(h[l]=[]);var f=i.days,m=i.sections,u=i.type;if(i.id=l,m){for(var p in m)if(m.hasOwnProperty(p)){d[p]||(d[p]={});var b=m[p],c=d[p];c[b]||(c[b]={}),c[b][f]||(c[b][f]={}),c[b][f][u]||(c[b][f][u]=[],e._marked_timespans_types||(e._marked_timespans_types={}),e._marked_timespans_types[u]||(e._marked_timespans_types[u]=!0));var g=c[b][f][u];i._array=g,g.push(i),h[l].push(i)}}else d[s][f]||(d[s][f]={}),d[s][f][u]||(d[s][f][u]=[]),e._marked_timespans_types||(e._marked_timespans_types={}),e._marked_timespans_types[u]||(e._marked_timespans_types[u]=!0),g=d[s][f][u],i._array=g,g.push(i),h[l].push(i)},e._marked_timespans_ids={},e.addMarkedTimespan=function(i){var s=e._prepare_timespan_options(i);if(s.length){for(var d=s[0].id,l=0;l<s.length;l++)e._addMarkerTimespanConfig(s[l]);return d}},e._add_timespan_zones=function(i,s){var d=i.slice();if(s=s.slice(),!d.length)return s;for(var l=0;l<d.length;l+=2)for(var h=d[l],f=d[l+1],m=l+2==d.length,u=0;u<s.length;u+=2){var p=s[u],b=s[u+1];if(b>f&&p<=f||p<h&&b>=h)d[l]=Math.min(h,p),d[l+1]=Math.max(f,b),l-=2;else{if(!m)continue;var c=h>p?0:2;d.splice(l+c,0,p,b)}s.splice(u--,2);break}return d},e._subtract_timespan_zones=function(i,s){for(var d=i.slice(),l=0;l<d.length;l+=2)for(var h=d[l],f=d[l+1],m=0;m<s.length;m+=2){var u=s[m],p=s[m+1];if(p>h&&u<f){var b=!1;h>=u&&f<=p&&d.splice(l,2),h<u&&(d.splice(l,2,h,u),b=!0),f>p&&d.splice(b?l+2:l,b?0:2,p,f),l-=2;break}}return d},e.invertZones=function(i){return e._subtract_timespan_zones([0,1440],i.slice())},e._delete_marked_timespan_by_id=function(i){var s=e._marked_timespans_ids[i];if(s){for(var d=0;d<s.length;d++)for(var l=s[d],h=l._array,f=0;f<h.length;f++)if(h[f]==l){h.splice(f,1);break}}},e._delete_marked_timespan_by_config=function(i){var s,d=e._marked_timespans,l=i.sections,h=i.days,f=i.type||n;if(l){for(var m in l)if(l.hasOwnProperty(m)&&d[m]){var u=l[m];d[m][u]&&(s=d[m][u])}}else s=d.global;if(s){if(h!==void 0)s[h]&&s[h][f]&&(e._addMarkerTimespanConfig(i),e._delete_marked_timespans_list(s[h][f],i));else for(var p in s)if(s[p][f]){var b=e._lame_clone(i);i.days=p,e._addMarkerTimespanConfig(b),e._delete_marked_timespans_list(s[p][f],i)}}},e._delete_marked_timespans_list=function(i,s){for(var d=0;d<i.length;d++){var l=i[d],h=e._subtract_timespan_zones(l.zones,s.zones);if(h.length)l.zones=h;else{i.splice(d,1),d--;for(var f=e._marked_timespans_ids[l.id],m=0;m<f.length;m++)if(f[m]==l){f.splice(m,1);break}}}},e.deleteMarkedTimespan=function(i){if(arguments.length||(e._marked_timespans={global:{}},e._marked_timespans_ids={},e._marked_timespans_types={}),typeof i!="object")e._delete_marked_timespan_by_id(i);else{i.start_date&&i.end_date||(i.days!==void 0||i.type||(i.days="fullweek"),i.zones||(i.zones="fullday"));var s=[];if(i.type)s.push(i.type);else for(var d in e._marked_timespans_types)s.push(d);for(var l=e._prepare_timespan_options(i),h=0;h<l.length;h++)for(var f=l[h],m=0;m<s.length;m++){var u=e._lame_clone(f);u.type=s[m],e._delete_marked_timespan_by_config(u)}}},e._get_types_to_render=function(i,s){var d=i?e._lame_copy({},i):{};for(var l in s||{})s.hasOwnProperty(l)&&(d[l]=s[l]);return d},e._get_configs_to_render=function(i){var s=[];for(var d in i)i.hasOwnProperty(d)&&s.push.apply(s,i[d]);return s},e._on_scale_add_marker=function(i,s){if(!e._table_view||e._mode=="month"){var d=s.getDay(),l=s.valueOf(),h=this._mode,f=e._marked_timespans,m=[],u=[];if(this._props&&this._props[h]){var p=this._props[h],b=p.options,c=b[e._get_unit_index(p,s)];if(p.days>1){var g=Math.round((s-e._min_date)/864e5),v=p.size||b.length;s=e.date.add(e._min_date,Math.floor(g/v),"day"),s=e.date.date_part(s)}else s=e.date.date_part(new Date(this._date));if(d=s.getDay(),l=s.valueOf(),f[h]&&f[h][c.key]){var y=f[h][c.key],x=e._get_types_to_render(y[d],y[l]);m.push.apply(m,e._get_configs_to_render(x))}}var k=f.global;if(e.config.overwrite_marked_timespans){var w=k[l]||k[d];m.push.apply(m,e._get_configs_to_render(w))}else k[l]&&m.push.apply(m,e._get_configs_to_render(k[l])),k[d]&&m.push.apply(m,e._get_configs_to_render(k[d]));for(var D=0;D<m.length;D++)u.push.apply(u,e._render_marked_timespan(m[D],i,s));return u}},e.attachEvent("onScaleAdd",function(){e._on_scale_add_marker.apply(e,arguments)}),e.dblclick_dhx_marked_timespan=function(i,s){e.callEvent("onScaleDblClick",[e.getActionData(i).date,s,i]),e.config.dblclick_create&&e.addEventNow(e.getActionData(i).date,null,i)}},e._temp_limit_scope()}function map_view(e){e.ext||(e.ext={}),e.ext.mapView={geocoder:null,map:null,points:null,markers:null,infoWindow:null,createMarker:function(t){return new google.maps.Marker(t)}},e.xy.map_date_width=188,e.xy.map_icon_width=25,e.xy.map_description_width=400,e.config.map_resolve_event_location=!0,e.config.map_resolve_user_location=!0,e.config.map_initial_position=new google.maps.LatLng(48.724,8.215),e.config.map_error_position=new google.maps.LatLng(15,15),e.config.map_infowindow_max_width=300,e.config.map_type=google.maps.MapTypeId.ROADMAP,e.config.map_zoom_after_resolve=15,e.locale.labels.marker_geo_success="It seems you are here.",e.locale.labels.marker_geo_fail="Sorry, could not get your current position using geolocation.",e.templates.marker_date=e.date.date_to_str("%Y-%m-%d %H:%i"),e.templates.marker_text=function(t,a,n){return"<div><b>"+n.text+"</b><br/><br/>"+(n.event_location||"")+"<br/><br/>"+e.templates.marker_date(t)+" - "+e.templates.marker_date(a)+"</div>"},e.dblclick_dhx_map_area=function(){!this.config.readonly&&this.config.dblclick_create&&this.addEventNow({start_date:e._date,end_date:e.date.add(e._date,e.config.time_step,"minute")})},e.templates.map_time=function(t,a,n){return e.config.rtl&&!n._timed?e.templates.day_date(a)+" &ndash; "+e.templates.day_date(t):n._timed?this.day_date(n.start_date,n.end_date,n)+" "+this.event_date(t):e.templates.day_date(t)+" &ndash; "+e.templates.day_date(a)},e.templates.map_text=function(t,a,n){return n.text},e.date.map_start=function(t){return t},e.date.add_map=function(t,a,n){return new Date(t.valueOf())},e.templates.map_date=function(t,a,n){return""},e._latLngUpdate=!1,e.attachEvent("onSchedulerReady",function(){e._isMapPositionSet=!1;const t=document.createElement("div");t.className="dhx_map",t.id="dhx_gmap",t.style.display="none",e._obj.appendChild(t),e._els.dhx_gmap=[],e._els.dhx_gmap.push(t),i("dhx_gmap");const a={zoom:e.config.map_initial_zoom||10,center:e.config.map_initial_position,mapTypeId:e.config.map_type||google.maps.MapTypeId.ROADMAP},n=new google.maps.Map(document.getElementById("dhx_gmap"),a);n.disableDefaultUI=!1,n.disableDoubleClickZoom=!e.config.readonly,google.maps.event.addListener(n,"dblclick",function(f){const m=e.ext.mapView.geocoder;if(!e.config.readonly&&e.config.dblclick_create){var u=f.latLng;m.geocode({latLng:u},function(p,b){b==google.maps.GeocoderStatus.OK&&(u=p[0].geometry.location,e.addEventNow({lat:u.lat(),lng:u.lng(),event_location:p[0].formatted_address,start_date:e._date,end_date:e.date.add(e._date,e.config.time_step,"minute")}))})}});var o={content:""};e.config.map_infowindow_max_width&&(o.maxWidth=e.config.map_infowindow_max_width),e.map={_points:[],_markers:[],_infowindow:new google.maps.InfoWindow(o),_infowindows_content:[],_initialization_count:-1,_obj:n},e.ext.mapView.geocoder=new google.maps.Geocoder,e.ext.mapView.map=n,e.ext.mapView.points=e.map._points,e.ext.mapView.markers=e.map._markers,e.ext.mapView.infoWindow=e.map._infowindow,e.config.map_resolve_user_location&&navigator.geolocation&&(e._isMapPositionSet||navigator.geolocation.getCurrentPosition(function(f){var m=new google.maps.LatLng(f.coords.latitude,f.coords.longitude);n.setCenter(m),n.setZoom(e.config.map_zoom_after_resolve||10),e.map._infowindow.setContent(e.locale.labels.marker_geo_success),e.map._infowindow.position=n.getCenter(),e.map._infowindow.open(n),e._isMapPositionSet=!0},function(){e.map._infowindow.setContent(e.locale.labels.marker_geo_fail),e.map._infowindow.setPosition(n.getCenter()),e.map._infowindow.open(n),e._isMapPositionSet=!0})),google.maps.event.addListener(n,"resize",function(f){t.style.zIndex="5",n.setZoom(n.getZoom())}),google.maps.event.addListener(n,"tilesloaded",function(f){t.style.zIndex="5"}),t.style.display="none";const r=e.render_data;function _(){var f=e.get_visible_events();f.sort(function(w,D){return w.start_date.valueOf()==D.start_date.valueOf()?w.id>D.id?1:-1:w.start_date>D.start_date?1:-1});for(var m="<div "+(v=e._waiAria.mapAttrString())+" class='dhx_map_area'>",u=0;u<f.length;u++){var p=f[u],b=p.id==e._selected_event_id?"dhx_map_line highlight":"dhx_map_line",c=p.color?"--dhx-scheduler-event-background:"+p.color+";":"",g=p.textColor?"--dhx-scheduler-event-color:"+p.textColor+";":"",v=e._waiAria.mapRowAttrString(p),y=e._waiAria.mapDetailsBtnString();m+="<div "+v+" class='"+b+"' event_id='"+p.id+"' "+e.config.event_attribute+"='"+p.id+"' style='"+c+g+(p._text_style||"")+" width: "+(e.xy.map_date_width+e.xy.map_description_width+2)+"px;'><div class='dhx_map_event_time' style='width: "+e.xy.map_date_width+"px;' >"+e.templates.map_time(p.start_date,p.end_date,p)+"</div>",m+=`<div ${y} class='dhx_event_icon icon_details'><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
			<path d="M15.4444 16.4H4.55556V7.6H15.4444V16.4ZM13.1111 2V3.6H6.88889V2H5.33333V3.6H4.55556C3.69222 3.6 3 4.312 3 5.2V16.4C3 16.8243 3.16389 17.2313 3.45561 17.5314C3.74733 17.8314 4.143 18 4.55556 18H15.4444C15.857 18 16.2527 17.8314 16.5444 17.5314C16.8361 17.2313 17 16.8243 17 16.4V5.2C17 4.312 16.3 3.6 15.4444 3.6H14.6667V2H13.1111ZM13.8889 10.8H10V14.8H13.8889V10.8Z" fill="#A1A4A6"/>
			</svg></div>`,m+="<div class='line_description' style='width:"+(e.xy.map_description_width-e.xy.map_icon_width)+"px;'>"+e.templates.map_text(p.start_date,p.end_date,p)+"</div></div>"}m+="<div class='dhx_v_border' style="+(e.config.rtl?"'right: ":"'left: ")+(e.xy.map_date_width-1)+"px;'></div><div class='dhx_v_border_description'></div></div>",e._els.dhx_cal_data[0].scrollTop=0,e._els.dhx_cal_data[0].innerHTML=m;var x=e._els.dhx_cal_data[0].firstChild.childNodes,k=e._getNavDateElement();for(k&&(k.innerHTML=e.templates[e._mode+"_date"](e._min_date,e._max_date,e._mode)),e._rendered=[],u=0;u<x.length-2;u++)e._rendered[u]=x[u]}function i(f){var m=document.getElementById(f);const u=e.$container.querySelector(".dhx_cal_navline").offsetHeight;var p=e._y-u;p<0&&(p=0);var b=e._x-e.xy.map_date_width-e.xy.map_description_width-1;b<0&&(b=0),m.style.height=p+"px",m.style.width=b+"px",m.style.position="absolute",m.style.top=u+"px",e.config.rtl?m.style.marginRight=e.xy.map_date_width+e.xy.map_description_width+1+"px":m.style.marginLeft=e.xy.map_date_width+e.xy.map_description_width+1+"px",m.style.marginTop=e.xy.nav_height+2+"px"}e.render_data=function(f,m){if(this._mode!="map")return r.apply(this,arguments);_();for(var u=e.get_visible_events(),p=0;p<u.length;p++)e.map._markers[u[p].id]||d(u[p],!1,!1)},e.map_view=function(f){e.map._initialization_count++;var m,u=e._els.dhx_gmap[0];if(e._min_date=e.config.map_start||e._currentDate(),e._max_date=e.config.map_end||e.date.add(e._currentDate(),1,"year"),e._table_view=!0,function(c){if(c){var g=e.locale.labels;e._els.dhx_cal_header[0].innerHTML="<div class='dhx_map_head' style='width: "+(e.xy.map_date_width+e.xy.map_description_width+2)+"px;' ><div class='headline_date' style='width: "+e.xy.map_date_width+"px;'>"+g.date+"</div><div class='headline_description' style='width: "+e.xy.map_description_width+"px;'>"+g.description+"</div></div>",e._table_view=!0,e.set_sizes()}}(f),f){(function(){e._selected_event_id=null,e.map._infowindow.close();var c=e.map._markers;for(var g in c)c.hasOwnProperty(g)&&(c[g].setMap(null),delete e.map._markers[g],e.map._infowindows_content[g]&&delete e.map._infowindows_content[g])})(),_(),u.style.display="block",i("dhx_gmap"),m=e.map._obj.getCenter();for(var p=e.get_visible_events(),b=0;b<p.length;b++)e.map._markers[p[b].id]||d(p[b])}else u.style.display="none";google.maps.event.trigger(e.map._obj,"resize"),e.map._initialization_count===0&&m&&e.map._obj.setCenter(m),e._selected_event_id&&s(e._selected_event_id)};var s=function(f){e.map._obj.setCenter(e.map._points[f]),e.callEvent("onClick",[f])},d=function(f,m,u){var p=e.config.map_error_position;f.lat&&f.lng&&(p=new google.maps.LatLng(f.lat,f.lng));var b=e.templates.marker_text(f.start_date,f.end_date,f);e._new_event||(e.map._infowindows_content[f.id]=b,e.map._markers[f.id]&&e.map._markers[f.id].setMap(null),e.map._markers[f.id]=e.ext.mapView.createMarker({position:p,map:e.map._obj}),google.maps.event.addListener(e.map._markers[f.id],"click",function(){e.map._infowindow.setContent(e.map._infowindows_content[f.id]),e.map._infowindow.open(e.map._obj,e.map._markers[f.id]),e._selected_event_id=f.id,e.render_data()}),e.map._points[f.id]=p,m&&e.map._obj.setCenter(e.map._points[f.id]),u&&e.callEvent("onClick",[f.id]))};e.attachEvent("onClick",function(f,m){if(this._mode=="map"){e._selected_event_id=f;for(var u=0;u<e._rendered.length;u++)e._rendered[u].className="dhx_map_line",e._rendered[u].getAttribute(e.config.event_attribute)==f&&(e._rendered[u].className+=" highlight");e.map._points[f]&&e.map._markers[f]&&(e.map._obj.setCenter(e.map._points[f]),google.maps.event.trigger(e.map._markers[f],"click"))}return!0});var l=function(f){const m=e.ext.mapView.geocoder;f.event_location&&m?m.geocode({address:f.event_location,language:e.uid().toString()},function(u,p){var b={};p!=google.maps.GeocoderStatus.OK?(b=e.callEvent("onLocationError",[f.id]))&&b!==!0||(b=e.config.map_error_position):b=u[0].geometry.location,f.lat=b.lat(),f.lng=b.lng(),e._selected_event_id=f.id,e._latLngUpdate=!0,e.callEvent("onEventChanged",[f.id,f]),d(f,!0,!0)}):d(f,!0,!0)},h=function(f){const m=e.ext.mapView.geocoder;f.event_location&&m&&m.geocode({address:f.event_location,language:e.uid().toString()},function(u,p){var b={};p!=google.maps.GeocoderStatus.OK?(b=e.callEvent("onLocationError",[f.id]))&&b!==!0||(b=e.config.map_error_position):b=u[0].geometry.location,f.lat=b.lat(),f.lng=b.lng(),e._latLngUpdate=!0,e.callEvent("onEventChanged",[f.id,f])})};e.attachEvent("onEventChanged",function(f,m){return this._latLngUpdate?this._latLngUpdate=!1:(m=e.getEvent(f)).start_date<e._min_date&&m.end_date>e._min_date||m.start_date<e._max_date&&m.end_date>e._max_date||m.start_date.valueOf()>=e._min_date&&m.end_date.valueOf()<=e._max_date?(e.map._markers[f]&&e.map._markers[f].setMap(null),l(m)):(e._selected_event_id=null,e.map._infowindow.close(),e.map._markers[f]&&e.map._markers[f].setMap(null)),!0}),e.attachEvent("onEventIdChange",function(f,m){var u=e.getEvent(m);return(u.start_date<e._min_date&&u.end_date>e._min_date||u.start_date<e._max_date&&u.end_date>e._max_date||u.start_date.valueOf()>=e._min_date&&u.end_date.valueOf()<=e._max_date)&&(e.map._markers[f]&&(e.map._markers[f].setMap(null),delete e.map._markers[f]),e.map._infowindows_content[f]&&delete e.map._infowindows_content[f],l(u)),!0}),e.attachEvent("onEventAdded",function(f,m){return e._dataprocessor||(m.start_date<e._min_date&&m.end_date>e._min_date||m.start_date<e._max_date&&m.end_date>e._max_date||m.start_date.valueOf()>=e._min_date&&m.end_date.valueOf()<=e._max_date)&&(e.map._markers[f]&&e.map._markers[f].setMap(null),l(m)),!0}),e.attachEvent("onBeforeEventDelete",function(f,m){return e.map._markers[f]&&e.map._markers[f].setMap(null),e._selected_event_id=null,e.map._infowindow.close(),!0}),e._event_resolve_delay=1500,e.attachEvent("onEventLoading",function(f){return e.config.map_resolve_event_location&&f.event_location&&!f.lat&&!f.lng&&(e._event_resolve_delay+=1500,function(m,u,p,b){setTimeout(function(){if(e.$destroyed)return!0;var c=m.apply(u,p);return m=u=p=null,c},b||1)}(h,this,[f],e._event_resolve_delay)),!0}),e.attachEvent("onEventCancel",function(f,m){return m&&(e.map._markers[f]&&e.map._markers[f].setMap(null),e.map._infowindow.close()),!0})})}function minical(e){const t=e._createDomEventScope();e.config.minicalendar={mark_events:!0},e._synced_minicalendars=[],e.renderCalendar=function(a,n,o){var r=null,_=a.date||e._currentDate();if(typeof _=="string"&&(_=this.templates.api_date(_)),n)r=this._render_calendar(n.parentNode,_,a,n),e.unmarkCalendar(r);else{var i=a.container,s=a.position;if(typeof i=="string"&&(i=document.getElementById(i)),typeof s=="string"&&(s=document.getElementById(s)),s&&s.left===void 0&&s.right===void 0){var d=e.$domHelpers.getOffset(s);s={top:d.top+s.offsetHeight,left:d.left}}i||(i=e._get_def_cont(s)),(r=this._render_calendar(i,_,a)).$_eventAttached||(r.$_eventAttached=!0,t.attach(r,"click",(function(g){var v=g.target||g.srcElement,y=e.$domHelpers;if(y.closest(v,".dhx_month_head")&&!y.closest(v,".dhx_after")&&!y.closest(v,".dhx_before")){var x=y.closest(v,"[data-cell-date]").getAttribute("data-cell-date"),k=e.templates.parse_date(x);e.unmarkCalendar(this),e.markCalendar(this,k,"dhx_calendar_click"),this._last_date=k,this.conf.handler&&this.conf.handler.call(e,k,this)}}).bind(r)))}if(e.config.minicalendar.mark_events)for(var l=e.date.month_start(_),h=e.date.add(l,1,"month"),f=this.getEvents(l,h),m=this["filter_"+this._mode],u={},p=0;p<f.length;p++){var b=f[p];if(!m||m(b.id,b)){var c=b.start_date;for(c.valueOf()<l.valueOf()&&(c=l),c=e.date.date_part(new Date(c.valueOf()));c<b.end_date&&(u[+c]||(u[+c]=!0,this.markCalendar(r,c,"dhx_year_event")),!((c=this.date.add(c,1,"day")).valueOf()>=h.valueOf())););}}return this._markCalendarCurrentDate(r),r.conf=a,a.sync&&!o&&this._synced_minicalendars.push(r),r.conf._on_xle_handler||(r.conf._on_xle_handler=e.attachEvent("onXLE",function(){e.updateCalendar(r,r.conf.date)})),this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&r.setAttribute("role","application"),r},e._get_def_cont=function(a){return this._def_count||(this._def_count=document.createElement("div"),this._def_count.className="dhx_minical_popup",e.event(this._def_count,"click",function(n){n.cancelBubble=!0}),document.body.appendChild(this._def_count)),a.left&&(this._def_count.style.left=a.left+"px"),a.right&&(this._def_count.style.right=a.right+"px"),a.top&&(this._def_count.style.top=a.top+"px"),a.bottom&&(this._def_count.style.bottom=a.bottom+"px"),this._def_count._created=new Date,this._def_count},e._locateCalendar=function(a,n){if(typeof n=="string"&&(n=e.templates.api_date(n)),+n>+a._max_date||+n<+a._min_date)return null;for(var o=a.querySelector(".dhx_year_body").childNodes[0],r=0,_=new Date(a._min_date);+this.date.add(_,1,"week")<=+n;)_=this.date.add(_,1,"week"),r++;var i=e.config.start_on_monday,s=(n.getDay()||(i?7:0))-(i?1:0);const d=o.querySelector(`.dhx_cal_month_row:nth-child(${r+1}) .dhx_cal_month_cell:nth-child(${s+1})`);return d?d.firstChild:null},e.markCalendar=function(a,n,o){var r=this._locateCalendar(a,n);r&&(r.className+=" "+o)},e.unmarkCalendar=function(a,n,o){if(o=o||"dhx_calendar_click",n=n||a._last_date){var r=this._locateCalendar(a,n);r&&(r.className=(r.className||"").replace(RegExp(o,"g")))}},e._week_template=function(a){for(var n=a||250,o=0,r=document.createElement("div"),_=this.date.week_start(e._currentDate()),i=0;i<7;i++)this._cols[i]=Math.floor(n/(7-i)),this._render_x_header(i,o,_,r),_=this.date.add(_,1,"day"),n-=this._cols[i],o+=this._cols[i];return r.lastChild.className+=" dhx_scale_bar_last",r},e.updateCalendar=function(a,n){a.conf.date=n,this.renderCalendar(a.conf,a,!0)},e._mini_cal_arrows=["&nbsp;","&nbsp;"],e._render_calendar=function(a,n,o,r){var _=e.templates,i=this._cols;this._cols=[];var s=this._mode;this._mode="calendar";var d=this._colsS;this._colsS={height:0};var l=new Date(this._min_date),h=new Date(this._max_date),f=new Date(e._date),m=_.month_day,u=this._ignores_detected;this._ignores_detected=0,_.month_day=_.calendar_date,n=this.date.month_start(n);var p,b=this._week_template(a.offsetWidth-1-this.config.minicalendar.padding);r?p=r:(p=document.createElement("div")).className="dhx_cal_container dhx_mini_calendar",p.setAttribute("date",this._helpers.formatDate(n)),p.innerHTML="<div class='dhx_year_month'></div><div class='dhx_year_grid"+(e.config.rtl?" dhx_grid_rtl'>":"'>")+"<div class='dhx_year_week'>"+(b?b.innerHTML:"")+"</div><div class='dhx_year_body'></div></div>";var c=p.querySelector(".dhx_year_month"),g=p.querySelector(".dhx_year_week"),v=p.querySelector(".dhx_year_body");if(c.innerHTML=this.templates.calendar_month(n),o.navigation)for(var y=function($,j){var P=e.date.add($._date,j,"month");e.updateCalendar($,P),e._date.getMonth()==$._date.getMonth()&&e._date.getFullYear()==$._date.getFullYear()&&e._markCalendarCurrentDate($)},x=["dhx_cal_prev_button","dhx_cal_next_button"],k=["left:1px;top:4px;position:absolute;","left:auto; right:1px;top:4px;position:absolute;"],w=[-1,1],D=function($){return function(){if(o.sync)for(var j=e._synced_minicalendars,P=0;P<j.length;P++)y(j[P],$);else e.config.rtl&&($=-$),y(p,$)}},E=[e.locale.labels.prev,e.locale.labels.next],S=0;S<2;S++){var N=document.createElement("div");N.className=x[S],e._waiAria.headerButtonsAttributes(N,E[S]),N.style.cssText=k[S],N.innerHTML=this._mini_cal_arrows[S],c.appendChild(N),t.attach(N,"click",D(w[S]))}p._date=new Date(n),p.week_start=(n.getDay()-(this.config.start_on_monday?1:0)+7)%7;var A=p._min_date=this.date.week_start(n);p._max_date=this.date.add(p._min_date,6,"week"),this._reset_month_scale(v,n,A,6),r||a.appendChild(p),g.style.height=g.childNodes[0].offsetHeight-1+"px";var M=e.uid();e._waiAria.minicalHeader(c,M),e._waiAria.minicalGrid(p.querySelector(".dhx_year_grid"),M),e._waiAria.minicalRow(g);for(var T=g.querySelectorAll(".dhx_scale_bar"),C=0;C<T.length;C++)e._waiAria.minicalHeadCell(T[C]);var O=v.querySelectorAll(".dhx_cal_month_cell"),L=new Date(A);for(C=0;C<O.length;C++)e._waiAria.minicalDayCell(O[C],new Date(L)),L=e.date.add(L,1,"day");return e._waiAria.minicalHeader(c,M),this._cols=i,this._mode=s,this._colsS=d,this._min_date=l,this._max_date=h,e._date=f,_.month_day=m,this._ignores_detected=u,p},e.destroyCalendar=function(a,n){!a&&this._def_count&&this._def_count.firstChild&&(n||new Date().valueOf()-this._def_count._created.valueOf()>500)&&(a=this._def_count.firstChild),a&&(t.detachAll(),a.innerHTML="",a.parentNode&&a.parentNode.removeChild(a),this._def_count&&(this._def_count.style.top="-1000px"),a.conf&&a.conf._on_xle_handler&&e.detachEvent(a.conf._on_xle_handler))},e.isCalendarVisible=function(){return!!(this._def_count&&parseInt(this._def_count.style.top,10)>0)&&this._def_count},e.attachEvent("onTemplatesReady",function(){e.event(document.body,"click",function(){e.destroyCalendar()})},{once:!0}),e.form_blocks.calendar_time={render:function(a){var n="<span class='dhx_minical_input_wrapper'><input class='dhx_readonly dhx_minical_input' type='text' readonly='true'></span>",o=e.config,r=this.date.date_part(e._currentDate()),_=1440,i=0;o.limit_time_select&&(i=60*o.first_hour,_=60*o.last_hour+1),r.setHours(i/60),a._time_values=[],n+=" <select class='dhx_lightbox_time_select'>";for(var s=i;s<_;s+=1*this.config.time_step)n+="<option value='"+s+"'>"+this.templates.time_picker(r)+"</option>",a._time_values.push(s),r=this.date.add(r,this.config.time_step,"minute");return"<div class='dhx_section_time dhx_lightbox_minical'>"+(n+="</select>")+"<span class='dhx_lightbox_minical_spacer'> &nbsp;&ndash;&nbsp; </span>"+n+"</div>"},set_value:function(a,n,o,r){var _,i,s=a.getElementsByTagName("input"),d=a.getElementsByTagName("select"),l=function(c,g,v){e.event(c,"click",function(){e.destroyCalendar(null,!0),e.renderCalendar({position:c,date:new Date(this._date),navigation:!0,handler:function(y){c.value=e.templates.calendar_time(y),c._date=new Date(y),e.destroyCalendar(),e.config.event_duration&&e.config.auto_end_date&&v===0&&u()}})})};if(e.config.full_day){if(!a._full_day){var h="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+e.locale.labels.full_day+"&nbsp;</label></input>";e.config.wide_form||(h=a.previousSibling.innerHTML+h),a.previousSibling.innerHTML=h,a._full_day=!0}var f=a.previousSibling.getElementsByTagName("input")[0],m=e.date.time_part(o.start_date)===0&&e.date.time_part(o.end_date)===0;f.checked=m,d[0].disabled=f.checked,d[1].disabled=f.checked,f.$_eventAttached||(f.$_eventAttached=!0,e.event(f,"click",function(){if(f.checked===!0){var c={};e.form_blocks.calendar_time.get_value(a,c),_=e.date.date_part(c.start_date),(+(i=e.date.date_part(c.end_date))==+_||+i>=+_&&(o.end_date.getHours()!==0||o.end_date.getMinutes()!==0))&&(i=e.date.add(i,1,"day"))}var g=_||o.start_date,v=i||o.end_date;p(s[0],g),p(s[1],v),d[0].value=60*g.getHours()+g.getMinutes(),d[1].value=60*v.getHours()+v.getMinutes(),d[0].disabled=f.checked,d[1].disabled=f.checked}))}if(e.config.event_duration&&e.config.auto_end_date){var u=function(){e.config.auto_end_date&&e.config.event_duration&&(_=e.date.add(s[0]._date,d[0].value,"minute"),i=new Date(_.getTime()+60*e.config.event_duration*1e3),s[1].value=e.templates.calendar_time(i),s[1]._date=e.date.date_part(new Date(i)),d[1].value=60*i.getHours()+i.getMinutes())};d[0].$_eventAttached||d[0].addEventListener("change",u)}function p(c,g,v){l(c,g,v),c.value=e.templates.calendar_time(g),c._date=e.date.date_part(new Date(g))}function b(c){for(var g=r._time_values,v=60*c.getHours()+c.getMinutes(),y=v,x=!1,k=0;k<g.length;k++){var w=g[k];if(w===v){x=!0;break}w<v&&(y=w)}return x||y?x?v:y:-1}p(s[0],o.start_date,0),p(s[1],o.end_date,1),l=function(){},d[0].value=b(o.start_date),d[1].value=b(o.end_date)},get_value:function(a,n){var o=a.getElementsByTagName("input"),r=a.getElementsByTagName("select");return n.start_date=e.date.add(o[0]._date,r[0].value,"minute"),n.end_date=e.date.add(o[1]._date,r[1].value,"minute"),n.end_date<=n.start_date&&(n.end_date=e.date.add(n.start_date,e.config.time_step,"minute")),{start_date:new Date(n.start_date),end_date:new Date(n.end_date)}},focus:function(a){}},e.linkCalendar=function(a,n){var o=function(){var r=e._date,_=new Date(r.valueOf());return n&&(_=n(_)),_.setDate(1),e.updateCalendar(a,_),!0};e.attachEvent("onViewChange",o),e.attachEvent("onXLE",o),e.attachEvent("onEventAdded",o),e.attachEvent("onEventChanged",o),e.attachEvent("onEventDeleted",o),o()},e._markCalendarCurrentDate=function(a){var n=e.getState(),o=n.min_date,r=n.max_date,_=n.mode,i=e.date.month_start(new Date(a._date)),s=e.date.add(i,1,"month");if(!({month:!0,year:!0,agenda:!0,grid:!0}[_]||o.valueOf()<=i.valueOf()&&r.valueOf()>=s.valueOf()))for(var d=o;d.valueOf()<r.valueOf();)i.valueOf()<=d.valueOf()&&s>d&&e.markCalendar(a,d,"dhx_calendar_click"),d=e.date.add(d,1,"day")},e.attachEvent("onEventCancel",function(){e.destroyCalendar(null,!0)}),e.attachEvent("onDestroy",function(){e.destroyCalendar()})}function monthheight(e){e.attachEvent("onTemplatesReady",function(){e.xy.scroll_width=0;var t=e.render_view_data;e.render_view_data=function(){var n=this._els.dhx_cal_data[0];n.firstChild._h_fix=!0,t.apply(e,arguments);var o=parseInt(n.style.height);n.style.height="1px",n.style.height=n.scrollHeight+"px",this._obj.style.height=this._obj.clientHeight+n.scrollHeight-o+"px"};var a=e._reset_month_scale;e._reset_month_scale=function(n,o,r,_){var i={clientHeight:100};a.apply(e,[i,o,r,_]),n.innerHTML=i.innerHTML}})}function multisection(e){e.config.multisection=!0,e.config.multisection_shift_all=!0,e.config.section_delimiter=",",e.attachEvent("onSchedulerReady",function(){extend$1(e);var t=e._update_unit_section;e._update_unit_section=function(i){return e._update_sections(i,t)};var a=e._update_timeline_section;e._update_timeline_section=function(i){return e._update_sections(i,a)},e.isMultisectionEvent=function(i){return!(!i||!this._get_multisection_view())&&this._get_event_sections(i).length>1},e._get_event_sections=function(i){var s=i[this._get_section_property()]||"";return this._parse_event_sections(s)},e._parse_event_sections=function(i){return i instanceof Array?i:i.toString().split(e.config.section_delimiter)},e._clear_copied_events(),e._split_events=function(i){var s=[],d=this._get_multisection_view(),l=this._get_section_property();if(d)for(var h=0;h<i.length;h++){var f=this._get_event_sections(i[h]);if(f.length>1){for(var m=0;m<f.length;m++)if(d.order[f[m]]!==void 0){var u=e._copy_event(i[h]);u[l]=f[m],s.push(u)}}else s.push(i[h])}else s=i;return s},e._get_multisection_view=function(){return!!this.config.multisection&&e._get_section_view()};var n=e.get_visible_events;e.get_visible_events=function(i){this._clear_copied_events();var s=n.apply(this,arguments);if(this._get_multisection_view()){s=this._split_events(s);for(var d=0;d<s.length;d++)this.is_visible_events(s[d])||(s.splice(d,1),d--);this._register_copies_array(s)}return s},e._rendered_events={};var o=e.render_view_data;e.render_view_data=function(i,s){return this._get_multisection_view()&&i&&(i=this._split_events(i),this._restore_render_flags(i)),o.apply(this,[i,s])},e._update_sections=function(i,s){var d=i.view,l=i.event,h=i.pos;if(e.isMultisectionEvent(l)){if(e._drag_event._orig_section||(e._drag_event._orig_section=h.section),e._drag_event._orig_section!=h.section){var f=d.order[h.section]-d.order[e._drag_event._orig_section];if(f){var m=this._get_event_sections(l),u=[],p=!0;if(e.config.multisection_shift_all)for(var b=0;b<m.length;b++){if((c=e._shift_sections(d,m[b],f))===null){u=m,p=!1;break}u[b]=c}else for(b=0;b<m.length;b++){if(m[b]==h.section){u=m,p=!1;break}if(m[b]==e._drag_event._orig_section){var c;if((c=e._shift_sections(d,m[b],f))===null){u=m,p=!1;break}u[b]=c}else u[b]=m[b]}p&&(e._drag_event._orig_section=h.section),l[e._get_section_property()]=u.join(e.config.section_delimiter)}}}else s.apply(e,[i])},e._shift_sections=function(i,s,d){for(var l=null,h=i.y_unit||i.options,f=0;f<h.length;f++)if(h[f].key==s){l=f;break}var m=h[l+d];return m?m.key:null};var r=e._get_blocked_zones;e._get_blocked_zones=function(i,s,d,l,h){if(s&&this.config.multisection){s=this._parse_event_sections(s);for(var f=[],m=0;m<s.length;m++)f=f.concat(r.apply(this,[i,s[m],d,l,h]));return f}return r.apply(this,arguments)};var _=e._check_sections_collision;e._check_sections_collision=function(i,s){if(this.config.multisection&&this._get_section_view()){i=this._split_events([i]),s=this._split_events([s]);for(var d=!1,l=0,h=i.length;l<h&&!d;l++)for(var f=0,m=s.length;f<m;f++)if(_.apply(this,[i[l],s[f]])){d=!0;break}return d}return _.apply(this,arguments)}})}function multiselect(e){e.form_blocks.multiselect={render:function(t){var a="dhx_multi_select_control dhx_multi_select_"+t.name;t.vertical&&(a+=" dhx_multi_select_control_vertical");for(var n="<div class='"+a+"' style='overflow: auto; max-height: "+t.height+"px; position: relative;' >",o=0;o<t.options.length;o++)n+="<label><input type='checkbox' value='"+t.options[o].key+"'/>"+t.options[o].label+"</label>";return n+="</div>"},set_value:function(t,a,n,o){for(var r=t.getElementsByTagName("input"),_=0;_<r.length;_++)r[_].checked=!1;function i(f){for(var m=t.getElementsByTagName("input"),u=0;u<m.length;u++)m[u].checked=!!f[m[u].value]}var s={};if(n[o.map_to]){var d=(n[o.map_to]+"").split(o.delimiter||e.config.section_delimiter||",");for(_=0;_<d.length;_++)s[d[_]]=!0;i(s)}else{if(e._new_event||!o.script_url)return;var l=document.createElement("div");l.className="dhx_loading",l.style.cssText="position: absolute; top: 40%; left: 40%;",t.appendChild(l);var h=[o.script_url,o.script_url.indexOf("?")==-1?"?":"&","dhx_crosslink_"+o.map_to+"="+n.id+"&uid="+e.uid()].join("");e.ajax.get(h,function(f){var m=function(u,p){try{for(var b=JSON.parse(u.xmlDoc.responseText),c={},g=0;g<b.length;g++){var v=b[g];c[v.value||v.key||v.id]=!0}return c}catch{return null}}(f);m||(m=function(u,p){for(var b=e.ajax.xpath("//data/item",u.xmlDoc),c={},g=0;g<b.length;g++)c[b[g].getAttribute(p.map_to)]=!0;return c}(f,o)),i(m),t.removeChild(l)})}},get_value:function(t,a,n){for(var o=[],r=t.getElementsByTagName("input"),_=0;_<r.length;_++)r[_].checked&&o.push(r[_].value);return o.join(n.delimiter||e.config.section_delimiter||",")},focus:function(t){}}}function multisource(e){var t=e._load;e._load=function(a,n){if(typeof(a=a||this._load_url)=="object")for(var o=function(_){var i=function(){};return i.prototype=_,i}(this._loaded),r=0;r<a.length;r++)this._loaded=new o,t.call(this,a[r],n);else t.apply(this,arguments)}}function mvc(e){var t,a={use_id:!1};function n(_){var i={};for(var s in _)s.indexOf("_")!==0&&(i[s]=_[s]);return a.use_id||delete i.id,i}function o(_){_._not_render=!1,_._render_wait&&_.render_view_data(),_._loading=!1,_.callEvent("onXLE",[])}function r(_){return a.use_id?_.id:_.cid}e.backbone=function(_,i){i&&(a=i),_.bind("change",function(l,h){var f=r(l),m=e._events[f]=l.toJSON();m.id=f,e._init_event(m),clearTimeout(t),t=setTimeout(function(){if(e.$destroyed)return!0;e.updateView()},1)}),_.bind("remove",function(l,h){var f=r(l);e._events[f]&&e.deleteEvent(f)});var s=[];function d(){if(e.$destroyed)return!0;s.length&&(e.parse(s,"json"),s=[])}_.bind("add",function(l,h){var f=r(l);if(!e._events[f]){var m=l.toJSON();m.id=f,e._init_event(m),s.push(m),s.length==1&&setTimeout(d,1)}}),_.bind("request",function(l){var h;l instanceof Backbone.Collection&&((h=e)._loading=!0,h._not_render=!0,h.callEvent("onXLS",[]))}),_.bind("sync",function(l){l instanceof Backbone.Collection&&o(e)}),_.bind("error",function(l){l instanceof Backbone.Collection&&o(e)}),e.attachEvent("onEventCreated",function(l){var h=new _.model(e.getEvent(l));return e._events[l]=h.toJSON(),e._events[l].id=l,!0}),e.attachEvent("onEventAdded",function(l){if(!_.get(l)){var h=n(e.getEvent(l)),f=new _.model(h),m=r(f);m!=l&&this.changeEventId(l,m),_.add(f),_.trigger("scheduler:add",f)}return!0}),e.attachEvent("onEventChanged",function(l){var h=_.get(l),f=n(e.getEvent(l));return h.set(f),_.trigger("scheduler:change",h),!0}),e.attachEvent("onEventDeleted",function(l){var h=_.get(l);return h&&(_.trigger("scheduler:remove",h),_.remove(l)),!0})}}function outerdrag(e){e.attachEvent("onTemplatesReady",function(){var t,a=new dhtmlDragAndDropObject,n=a.stopDrag;function o(r,_,i,s){if(!e.checkEvent("onBeforeExternalDragIn")||e.callEvent("onBeforeExternalDragIn",[r,_,i,s,t])){var d=e.attachEvent("onEventCreated",function(u){e.callEvent("onExternalDragIn",[u,r,t])||(this._drag_mode=this._drag_id=null,this.deleteEvent(u))}),l=e.getActionData(t),h={start_date:new Date(l.date)};if(e.matrix&&e.matrix[e._mode]){var f=e.matrix[e._mode];h[f.y_property]=l.section;var m=e._locate_cell_timeline(t);h.start_date=f._trace_x[m.x],h.end_date=e.date.add(h.start_date,f.x_step,f.x_unit)}e._props&&e._props[e._mode]&&(h[e._props[e._mode].map_to]=l.section),e.addEventNow(h),e.detachEvent(d)}}a.stopDrag=function(r){return t=r,n.apply(this,arguments)},a.addDragLanding(e._els.dhx_cal_data[0],{_drag:function(r,_,i,s){o(r,_,i,s)},_dragIn:function(r,_){return r},_dragOut:function(r){return this}}),dhtmlx.DragControl&&dhtmlx.DragControl.addDrop(e._els.dhx_cal_data[0],{onDrop:function(r,_,i,s){var d=dhtmlx.DragControl.getMaster(r);t=s,o(r,d,_,s.target||s.srcElement)},onDragIn:function(r,_,i){return _}},!0)})}function pdf(e){var t,a,n=new RegExp("<[^>]*>","g"),o=new RegExp("<br[^>]*>","g");function r(x){return x.replace(o,`
`).replace(n,"")}function _(x,k){x=parseFloat(x),k=parseFloat(k),isNaN(k)||(x-=k);var w=s(x);return x=x-w.width+w.cols*t,isNaN(x)?"auto":100*x/t}function i(x,k,w){x=parseFloat(x),k=parseFloat(k),!isNaN(k)&&w&&(x-=k);var D=s(x);return x=x-D.width+D.cols*t,isNaN(x)?"auto":100*x/(t-(isNaN(k)?0:k))}function s(x){for(var k=0,w=e._els.dhx_cal_header[0].childNodes,D=w[1]?w[1].childNodes:w[0].childNodes,E=0;E<D.length;E++){var S=D[E].style?D[E]:D[E].parentNode,N=parseFloat(S.style.width);if(!(x>N))break;x-=N+1,k+=N+1}return{width:k,cols:E}}function d(x){return x=parseFloat(x),isNaN(x)?"auto":100*x/a}function l(x,k){return(window.getComputedStyle?window.getComputedStyle(x,null)[k]:x.currentStyle?x.currentStyle[k]:null)||""}function h(x,k){for(var w=parseInt(x.style.left,10),D=0;D<e._cols.length;D++)if((w-=e._cols[D])<0)return D;return k}function f(x,k){for(var w=parseInt(x.style.top,10),D=0;D<e._colsS.heights.length;D++)if(e._colsS.heights[D]>w)return D;return k}function m(x){return x?"</"+x+">":""}function u(x,k,w,D){var E="<"+x+" profile='"+k+"'";return w&&(E+=" header='"+w+"'"),D&&(E+=" footer='"+D+"'"),E+=">"}function p(){var x="",k=e._mode;if(e.matrix&&e.matrix[e._mode]&&(k=e.matrix[e._mode].render=="cell"?"matrix":"timeline"),x+="<scale mode='"+k+"' today='"+e._els.dhx_cal_date[0].innerHTML+"'>",e._mode=="week_agenda")for(var w=e._els.dhx_cal_data[0].getElementsByTagName("DIV"),D=0;D<w.length;D++)w[D].className=="dhx_wa_scale_bar"&&(x+="<column>"+r(w[D].innerHTML)+"</column>");else if(e._mode=="agenda"||e._mode=="map")x+="<column>"+r((w=e._els.dhx_cal_header[0].childNodes[0].childNodes)[0].innerHTML)+"</column><column>"+r(w[1].innerHTML)+"</column>";else if(e._mode=="year")for(w=e._els.dhx_cal_data[0].childNodes,D=0;D<w.length;D++)x+="<month label='"+r(w[D].querySelector(".dhx_year_month").innerHTML)+"'>",x+=c(w[D].querySelector(".dhx_year_week").childNodes),x+=b(w[D].querySelector(".dhx_year_body")),x+="</month>";else{x+="<x>",x+=c(w=e._els.dhx_cal_header[0].childNodes),x+="</x>";var E=e._els.dhx_cal_data[0];if(e.matrix&&e.matrix[e._mode]){for(x+="<y>",D=0;D<E.firstChild.rows.length;D++)x+="<row><![CDATA["+r(E.firstChild.rows[D].cells[0].innerHTML)+"]]></row>";x+="</y>",a=E.firstChild.rows[0].cells[0].offsetHeight}else if(E.firstChild.tagName=="TABLE")x+=b(E);else{for(E=E.childNodes[E.childNodes.length-1];E.className.indexOf("dhx_scale_holder")==-1;)E=E.previousSibling;for(E=E.childNodes,x+="<y>",D=0;D<E.length;D++)x+=`
<row><![CDATA[`+r(E[D].innerHTML)+"]]></row>";x+="</y>",a=E[0].offsetHeight}}return x+="</scale>"}function b(x){for(var k="",w=x.querySelectorAll("tr"),D=0;D<w.length;D++){for(var E=[],S=w[D].querySelectorAll("td"),N=0;N<S.length;N++)E.push(S[N].querySelector(".dhx_month_head").innerHTML);k+=`
<row height='`+S[0].offsetHeight+"'><![CDATA["+r(E.join("|"))+"]]></row>",a=S[0].offsetHeight}return k}function c(x){var k,w="";e.matrix&&e.matrix[e._mode]&&(e.matrix[e._mode].second_scale&&(k=x[1].childNodes),x=x[0].childNodes);for(var D=0;D<x.length;D++)w+=`
<column><![CDATA[`+r(x[D].innerHTML)+"]]></column>";if(t=x[0].offsetWidth,k){var E=0,S=x[0].offsetWidth,N=1;for(D=0;D<k.length;D++)w+=`
<column second_scale='`+N+"'><![CDATA["+r(k[D].innerHTML)+"]]></column>",(E+=k[D].offsetWidth)>=S&&(S+=x[N]?x[N].offsetWidth:0,N++),t=k[0].offsetWidth}return w}function g(x){var k="",w=e._rendered,D=e.matrix&&e.matrix[e._mode];if(e._mode=="agenda"||e._mode=="map")for(var E=0;E<w.length;E++)k+="<event><head><![CDATA["+r(w[E].childNodes[0].innerHTML)+"]]></head><body><![CDATA["+r(w[E].childNodes[2].innerHTML)+"]]></body></event>";else if(e._mode=="week_agenda")for(E=0;E<w.length;E++)k+="<event day='"+w[E].parentNode.getAttribute("day")+"'><body>"+r(w[E].innerHTML)+"</body></event>";else if(e._mode=="year")for(w=e.get_visible_events(),E=0;E<w.length;E++){var S=w[E].start_date;for(S.valueOf()<e._min_date.valueOf()&&(S=e._min_date);S<w[E].end_date;){var N=S.getMonth()+12*(S.getFullYear()-e._min_date.getFullYear())-e.week_starts._month,A=e.week_starts[N]+S.getDate()-1,M=x?l(e._get_year_cell(S),"color"):"",T=x?l(e._get_year_cell(S),"backgroundColor"):"";if(k+="<event day='"+A%7+"' week='"+Math.floor(A/7)+"' month='"+N+"' backgroundColor='"+T+"' color='"+M+"'></event>",(S=e.date.add(S,1,"day")).valueOf()>=e._max_date.valueOf())break}}else if(D&&D.render=="cell")for(w=e._els.dhx_cal_data[0].getElementsByTagName("TD"),E=0;E<w.length;E++)M=x?l(w[E],"color"):"",k+=`
<event><body backgroundColor='`+(T=x?l(w[E],"backgroundColor"):"")+"' color='"+M+"'><![CDATA["+r(w[E].innerHTML)+"]]></body></event>";else for(E=0;E<w.length;E++){var C,O;if(e.matrix&&e.matrix[e._mode])C=_(w[E].style.left),O=_(w[E].offsetWidth)-1;else{var L=e.config.use_select_menu_space?0:26;C=i(w[E].style.left,L,!0),O=i(w[E].style.width,L)-1}if(!isNaN(1*O)){var $=d(w[E].style.top),j=d(w[E].style.height),P=w[E].className.split(" ")[0].replace("dhx_cal_","");if(P!=="dhx_tooltip_line"){var I=e.getEvent(w[E].getAttribute(e.config.event_attribute));if(I){A=I._sday;var Y=I._sweek,J=I._length||0;if(e._mode=="month")j=parseInt(w[E].offsetHeight,10),$=parseInt(w[E].style.top,10)-e.xy.month_head_height,A=h(w[E],A),Y=f(w[E],Y);else if(e.matrix&&e.matrix[e._mode]){A=0,Y=w[E].parentNode.parentNode.parentNode.rowIndex;var Q=a;a=w[E].parentNode.offsetHeight,$=d(w[E].style.top),$-=.2*$,a=Q}else{if(w[E].parentNode==e._els.dhx_cal_data[0])continue;var R=e._els.dhx_cal_data[0].childNodes[0],V=parseFloat(R.className.indexOf("dhx_scale_holder")!=-1?R.style.left:0);C+=_(w[E].parentNode.style.left,V)}k+=`
<event week='`+Y+"' day='"+A+"' type='"+P+"' x='"+C+"' y='"+$+"' width='"+O+"' height='"+j+"' len='"+J+"'>",P=="event"?(k+="<header><![CDATA["+r(w[E].childNodes[1].innerHTML)+"]]></header>",M=x?l(w[E].childNodes[2],"color"):"",k+="<body backgroundColor='"+(T=x?l(w[E].childNodes[2],"backgroundColor"):"")+"' color='"+M+"'><![CDATA["+r(w[E].childNodes[2].innerHTML)+"]]></body>"):(M=x?l(w[E],"color"):"",k+="<body backgroundColor='"+(T=x?l(w[E],"backgroundColor"):"")+"' color='"+M+"'><![CDATA["+r(w[E].innerHTML)+"]]></body>"),k+="</event>"}}}}return k}function v(x,k,w,D,E,S){var N=!1;D=="fullcolor"&&(N=!0,D="color"),D=D||"color";var A,M="";if(x){var T=e._date,C=e._mode;k=e.date[w+"_start"](k),k=e.date["get_"+w+"_end"]?e.date["get_"+w+"_end"](k):e.date.add(k,1,w),M=u("pages",D,E,S);for(var O=new Date(x);+O<+k;O=this.date.add(O,1,w))this.setCurrentView(O,w),M+=((A="page")?"<"+A+">":"")+p().replace("","-")+g(N)+m("page");M+=m("pages"),this.setCurrentView(T,C)}else M=u("data",D,E,S)+p().replace("","-")+g(N)+m("data");return M}function y(x,k,w,D,E,S,N){(function(A,M){var T=e.uid(),C=document.createElement("div");C.style.display="none",document.body.appendChild(C),C.innerHTML='<form id="'+T+'" method="post" target="_blank" action="'+M+'" accept-charset="utf-8" enctype="application/x-www-form-urlencoded"><input type="hidden" name="mycoolxmlbody"/> </form>',document.getElementById(T).firstChild.value=encodeURIComponent(A),document.getElementById(T).submit(),C.parentNode.removeChild(C)})(typeof E=="object"?function(A){for(var M="<data>",T=0;T<A.length;T++)M+=A[T].source.getPDFData(A[T].start,A[T].end,A[T].view,A[T].mode,A[T].header,A[T].footer);return M+="</data>",M}(E):v.apply(this,[x,k,w,E,S,N]),D)}e.getPDFData=v,e.toPDF=function(x,k,w,D){return y.apply(this,[null,null,null,x,k,w,D])},e.toPDFRange=function(x,k,w,D,E,S,N){return typeof x=="string"&&(x=e.templates.api_date(x),k=e.templates.api_date(k)),y.apply(this,arguments)}}function quick_info(e){e.config.icons_select=["icon_form","icon_delete"],e.config.details_on_create=!0,e.config.show_quick_info=!0,e.xy.menu_width=0,e.attachEvent("onClick",function(t){if(e.config.show_quick_info)return e.showQuickInfo(t),!0}),function(){for(var t=["onEmptyClick","onViewChange","onLightbox","onBeforeEventDelete","onBeforeDrag"],a=function(){return e.hideQuickInfo(!0),!0},n=0;n<t.length;n++)e.attachEvent(t[n],a)}(),e.templates.quick_info_title=function(t,a,n){return n.text.substr(0,50)},e.templates.quick_info_content=function(t,a,n){return n.details||""},e.templates.quick_info_date=function(t,a,n){return e.isOneDayEvent(n)&&e.config.rtl?e.templates.day_date(t,a,n)+" "+e.templates.event_header(a,t,n):e.isOneDayEvent(n)?e.templates.day_date(t,a,n)+" "+e.templates.event_header(t,a,n):e.config.rtl?e.templates.week_date(a,t,n):e.templates.week_date(t,a,n)},e.showQuickInfo=function(t){if(t!=this._quick_info_box_id&&(this.hideQuickInfo(!0),this.callEvent("onBeforeQuickInfo",[t])!==!1)){var a=this._get_event_counter_part(t);a&&(this._quick_info_box=this._init_quick_info(a),this._fill_quick_data(t),this._show_quick_info(a),this.callEvent("onQuickInfo",[t]))}},function(){function t(a){a=a||"";var n,o=parseFloat(a),r=a.match(/m?s/);switch(r&&(r=r[0]),r){case"s":n=1e3*o;break;case"ms":n=o;break;default:n=0}return n}e.hideQuickInfo=function(a){var n=this._quick_info_box,o=this._quick_info_box_id;if(this._quick_info_box_id=0,n&&n.parentNode){var r=n.offsetWidth;if(e.config.quick_info_detached)return this.callEvent("onAfterQuickInfo",[o]),n.parentNode.removeChild(n);if(n.style.right=="auto"?n.style.left=-r+"px":n.style.right=-r+"px",a)n.parentNode.removeChild(n);else{var _;window.getComputedStyle?_=window.getComputedStyle(n,null):n.currentStyle&&(_=n.currentStyle);var i=t(_["transition-delay"])+t(_["transition-duration"]);setTimeout(function(){n.parentNode&&n.parentNode.removeChild(n)},i)}this.callEvent("onAfterQuickInfo",[o])}}}(),e.event(window,"keydown",function(t){t.keyCode==27&&e.hideQuickInfo()}),e._show_quick_info=function(t){var a=e._quick_info_box;e._obj.appendChild(a);var n=a.offsetWidth,o=a.offsetHeight;if(e.config.quick_info_detached){var r=t.left-t.dx*(n-t.width);e.getView()&&e.getView()._x_scroll&&(e.config.rtl?r+=e.getView()._x_scroll:r-=e.getView()._x_scroll),r+n>window.innerWidth&&(r=window.innerWidth-n),r=Math.max(0,r),a.style.left=r+"px",a.style.top=t.top-(t.dy?o:-t.height)+"px"}else{const _=e.$container.querySelector(".dhx_cal_data").offsetTop;a.style.top=_+20+"px",t.dx==1?(a.style.right="auto",a.style.left=-n+"px",setTimeout(function(){a.style.left="-10px"},1)):(a.style.left="auto",a.style.right=-n+"px",setTimeout(function(){a.style.right="-10px"},1)),a.className=a.className.replace(" dhx_qi_left","").replace(" dhx_qi_right","")+" dhx_qi_"+(t.dx==1?"left":"right")}},e.attachEvent("onTemplatesReady",function(){if(e.hideQuickInfo(),this._quick_info_box){var t=this._quick_info_box;t.parentNode&&t.parentNode.removeChild(t),this._quick_info_box=null}}),e._quick_info_onscroll_handler=function(t){e.hideQuickInfo()},e._init_quick_info=function(){if(!this._quick_info_box){var t=this._quick_info_box=document.createElement("div");this._waiAria.quickInfoAttr(t),t.className="dhx_cal_quick_info",e.$testmode&&(t.className+=" dhx_no_animate"),e.config.rtl&&(t.className+=" dhx_quick_info_rtl");var a=`
		<div class="dhx_cal_qi_tcontrols">
			<a class="dhx_cal_qi_close_btn scheduler_icon close"></a>
		</div>
		<div class="dhx_cal_qi_title" ${this._waiAria.quickInfoHeaderAttrString()}>
				
				<div class="dhx_cal_qi_tcontent"></div>
				<div class="dhx_cal_qi_tdate"></div>
			</div>
			<div class="dhx_cal_qi_content"></div>`;a+='<div class="dhx_cal_qi_controls">';for(var n=e.config.icons_select,o=0;o<n.length;o++)a+=`<div ${this._waiAria.quickInfoButtonAttrString(this.locale.labels[n[o]])} class="dhx_qi_big_icon ${n[o]}" title="${e.locale.labels[n[o]]}">
				<div class='dhx_menu_icon ${n[o]}'></div><div>${e.locale.labels[n[o]]}</div></div>`;a+="</div>",t.innerHTML=a,e.event(t,"click",function(r){e._qi_button_click(r.target||r.srcElement)}),e.config.quick_info_detached&&(e._detachDomEvent(e._els.dhx_cal_data[0],"scroll",e._quick_info_onscroll_handler),e.event(e._els.dhx_cal_data[0],"scroll",e._quick_info_onscroll_handler))}return this._quick_info_box},e._qi_button_click=function(t){var a=e._quick_info_box;if(t&&t!=a)if(t.closest(".dhx_cal_qi_close_btn"))e.hideQuickInfo();else{var n=e._getClassName(t);if(n.indexOf("_icon")!=-1){var o=e._quick_info_box_id;e._click.buttons[n.split(" ")[1].replace("icon_","")](o)}else e._qi_button_click(t.parentNode)}},e._get_event_counter_part=function(t){for(var a=e.getRenderedEvent(t),n=0,o=0,r=a;r&&r!=e._obj;)n+=r.offsetLeft,o+=r.offsetTop-r.scrollTop,r=r.offsetParent;return r?{left:n,top:o,dx:n+a.offsetWidth/2>e._x/2?1:0,dy:o+a.offsetHeight/2>e._y/2?1:0,width:a.offsetWidth,height:a.offsetHeight}:0},e._fill_quick_data=function(t){var a=e.getEvent(t),n=e._quick_info_box;e._quick_info_box_id=t;var o={content:e.templates.quick_info_title(a.start_date,a.end_date,a),date:e.templates.quick_info_date(a.start_date,a.end_date,a)};n.querySelector(".dhx_cal_qi_tcontent").innerHTML=`<span>${o.content}</span>`,n.querySelector(".dhx_cal_qi_tdate").innerHTML=o.date,e._waiAria.quickInfoHeader(n,[o.content,o.date].join(" "));var r=n.querySelector(".dhx_cal_qi_content");const _=e.templates.quick_info_content(a.start_date,a.end_date,a);_?(r.classList.remove("dhx_hidden"),r.innerHTML=_):r.classList.add("dhx_hidden")}}function readonly(e){e.attachEvent("onTemplatesReady",function(){var t;e.form_blocks.recurring&&(t=e.form_blocks.recurring.set_value);var a=e.config.buttons_left.slice(),n=e.config.buttons_right.slice();function o(i,s,d,l){for(var h=s.getElementsByTagName(i),f=d.getElementsByTagName(i),m=f.length-1;m>=0;m--)if(d=f[m],l){var u=document.createElement("span");u.className="dhx_text_disabled",u.innerHTML=l(h[m]),d.parentNode.insertBefore(u,d),d.parentNode.removeChild(d)}else d.disabled=!0,s.checked&&(d.checked=!0)}e.attachEvent("onBeforeLightbox",function(i){this.config.readonly_form||this.getEvent(i).readonly?this.config.readonly_active=!0:(this.config.readonly_active=!1,e.config.buttons_left=a.slice(),e.config.buttons_right=n.slice(),e.form_blocks.recurring&&(e.form_blocks.recurring.set_value=t));var s=this.config.lightbox.sections;if(this.config.readonly_active){for(var d=0;d<s.length;d++)s[d].type=="recurring"&&this.config.readonly_active&&e.form_blocks.recurring&&(e.form_blocks.recurring.set_value=function(c,g,v){var y=e.$domHelpers.closest(c,".dhx_wrap_section"),x="none";y.querySelector(".dhx_cal_lsection").display=x,y.querySelector(".dhx_form_repeat").display=x,y.style.display=x,e.setLightboxSize()});var l=["dhx_delete_btn","dhx_save_btn"],h=[e.config.buttons_left,e.config.buttons_right];for(d=0;d<l.length;d++)for(var f=l[d],m=0;m<h.length;m++){for(var u=h[m],p=-1,b=0;b<u.length;b++)if(u[b]==f){p=b;break}p!=-1&&u.splice(p,1)}}return this.resetLightbox(),!0});var r=e._fill_lightbox;e._fill_lightbox=function(){var i=this.getLightbox();this.config.readonly_active&&(i.style.visibility="hidden",i.style.display="block");var s=r.apply(this,arguments);if(this.config.readonly_active&&(i.style.visibility="",i.style.display="none"),this.config.readonly_active){var d=this.getLightbox(),l=this._lightbox_r=d.cloneNode(!0);l.id=e.uid(),l.className+=" dhx_cal_light_readonly",o("textarea",d,l,function(h){return h.value}),o("input",d,l,!1),o("select",d,l,function(h){return h.options.length?h.options[Math.max(h.selectedIndex||0,0)].text:""}),d.parentNode.insertBefore(l,d),this.showCover(l),e._lightbox&&e._lightbox.parentNode.removeChild(e._lightbox),this._lightbox=l,e.config.drag_lightbox&&e.event(l.firstChild,"mousedown",e._ready_to_dnd),e._init_lightbox_events(),this.setLightboxSize()}return s};var _=e.hide_lightbox;e.hide_lightbox=function(){return this._lightbox_r&&(this._lightbox_r.parentNode.removeChild(this._lightbox_r),this._lightbox_r=this._lightbox=null),_.apply(this,arguments)}})}function recurring(e){function t(){var r=e.formSection("recurring");if(r||(r=a("recurring")),!r)throw new Error(["Can't locate the Recurring form section.","Make sure that you have the recurring control on the lightbox configuration https://docs.dhtmlx.com/scheduler/recurring_events.html#recurringlightbox ",'and that the recurring control has name "recurring":',"","scheduler.config.lightbox.sections = [",'	{name:"recurring", ... }',"];"].join(`
`));return r}function a(r){for(var _=0;_<e.config.lightbox.sections.length;_++){var i=e.config.lightbox.sections[_];if(i.type===r)return e.formSection(i.name)}return null}function n(r){return new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),0)}var o;e.config.occurrence_timestamp_in_utc=!1,e.config.recurring_workdays=[1,2,3,4,5],e.form_blocks.recurring={_get_node:function(r){if(typeof r=="string"){let _=e._lightbox.querySelector(`#${r}`);_||(_=document.getElementById(r)),r=_}return r.style.display=="none"&&(r.style.display=""),r},_outer_html:function(r){return r.outerHTML||(_=r,(s=document.createElement("div")).appendChild(_.cloneNode(!0)),i=s.innerHTML,s=null,i);var _,i,s},render:function(r){if(r.form){var _=e.form_blocks.recurring,i=_._get_node(r.form),s=_._outer_html(i);return i.style.display="none",s}var d=e.locale.labels;return'<div class="dhx_form_repeat"> <form> <div class="dhx_repeat_left"> <div><label><input class="dhx_repeat_radio" type="radio" name="repeat" value="day" />'+d.repeat_radio_day+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="repeat" value="week"/>'+d.repeat_radio_week+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="repeat" value="month" checked />'+d.repeat_radio_month+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="repeat" value="year" />'+d.repeat_radio_year+'</label></div> </div> <div class="dhx_repeat_divider"></div> <div class="dhx_repeat_center"> <div style="display:none;" id="dhx_repeat_day"> <div><label><input class="dhx_repeat_radio" type="radio" name="day_type" value="d"/>'+d.repeat_radio_day_type+'</label><label><input class="dhx_repeat_text" type="text" name="day_count" value="1" />'+d.repeat_text_day_count+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="day_type" checked value="w"/>'+d.repeat_radio_day_type2+'</label></div> </div> <div style="display:none;" id="dhx_repeat_week"><div><label>'+d.repeat_week+'<input class="dhx_repeat_text" type="text" name="week_count" value="1" /></label><span>'+d.repeat_text_week_count+'</span></div>  <table class="dhx_repeat_days"> <tr> <td><div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="1" />'+d.day_for_recurring[1]+'</label></div> <div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="4" />'+d.day_for_recurring[4]+'</label></div></td> <td><div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="2" />'+d.day_for_recurring[2]+'</label></div> <div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="5" />'+d.day_for_recurring[5]+'</label></div></td> <td><div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="3" />'+d.day_for_recurring[3]+'</label></div> <div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="6" />'+d.day_for_recurring[6]+'</label></div></td> <td><div><label><input class="dhx_repeat_checkbox" type="checkbox" name="week_day" value="0" />'+d.day_for_recurring[0]+'</label></div> </td> </tr> </table> </div> <div id="dhx_repeat_month"> <div><label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" value="d"/>'+d.repeat_radio_month_type+'</label><label><input class="dhx_repeat_text" type="text" name="month_day" value="1" />'+d.repeat_text_month_day+'</label><label><input class="dhx_repeat_text" type="text" name="month_count" value="1" />'+d.repeat_text_month_count+'</label></div> <div><label class = "dhx_repeat_month_label"><input class="dhx_repeat_radio" type="radio" name="month_type" checked value="w"/>'+d.repeat_radio_month_start+'</label><input class="dhx_repeat_text" type="text" name="month_week2" value="1" /><label><select name="month_day2">	<option value="1" selected >'+e.locale.date.day_full[1]+'<option value="2">'+e.locale.date.day_full[2]+'<option value="3">'+e.locale.date.day_full[3]+'<option value="4">'+e.locale.date.day_full[4]+'<option value="5">'+e.locale.date.day_full[5]+'<option value="6">'+e.locale.date.day_full[6]+'<option value="0">'+e.locale.date.day_full[0]+"</select>"+d.repeat_text_month_count2_before+'</label><label><input class="dhx_repeat_text" type="text" name="month_count2" value="1" />'+d.repeat_text_month_count2_after+'</label></div> </div> <div style="display:none;" id="dhx_repeat_year"> <div><label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" value="d"/>'+d.repeat_radio_day_type+'</label><label><input class="dhx_repeat_text" type="text" name="year_day" value="1" />'+d.repeat_text_year_day+'</label><label><select name="year_month"><option value="0" selected >'+d.month_for_recurring[0]+'<option value="1">'+d.month_for_recurring[1]+'<option value="2">'+d.month_for_recurring[2]+'<option value="3">'+d.month_for_recurring[3]+'<option value="4">'+d.month_for_recurring[4]+'<option value="5">'+d.month_for_recurring[5]+'<option value="6">'+d.month_for_recurring[6]+'<option value="7">'+d.month_for_recurring[7]+'<option value="8">'+d.month_for_recurring[8]+'<option value="9">'+d.month_for_recurring[9]+'<option value="10">'+d.month_for_recurring[10]+'<option value="11">'+d.month_for_recurring[11]+"</select>"+d.select_year_month+'</label></div> <div><label class = "dhx_repeat_year_label"><input class="dhx_repeat_radio" type="radio" name="year_type" checked value="w"/>'+d.repeat_year_label+'</label><input class="dhx_repeat_text" type="text" name="year_week2" value="1" /><select name="year_day2"><option value="1" selected >'+e.locale.date.day_full[1]+'<option value="2">'+e.locale.date.day_full[2]+'<option value="3">'+e.locale.date.day_full[3]+'<option value="4">'+e.locale.date.day_full[4]+'<option value="5">'+e.locale.date.day_full[5]+'<option value="6">'+e.locale.date.day_full[6]+'<option value="7">'+e.locale.date.day_full[0]+"</select>"+d.select_year_day2+'<select name="year_month2"><option value="0" selected >'+d.month_for_recurring[0]+'<option value="1">'+d.month_for_recurring[1]+'<option value="2">'+d.month_for_recurring[2]+'<option value="3">'+d.month_for_recurring[3]+'<option value="4">'+d.month_for_recurring[4]+'<option value="5">'+d.month_for_recurring[5]+'<option value="6">'+d.month_for_recurring[6]+'<option value="7">'+d.month_for_recurring[7]+'<option value="8">'+d.month_for_recurring[8]+'<option value="9">'+d.month_for_recurring[9]+'<option value="10">'+d.month_for_recurring[10]+'<option value="11">'+d.month_for_recurring[11]+'</select></div> </div> </div> <div class="dhx_repeat_divider"></div> <div class="dhx_repeat_right"> <div><label><input class="dhx_repeat_radio" type="radio" name="end" checked/>'+d.repeat_radio_end+'</label></div> <div><label><input class="dhx_repeat_radio" type="radio" name="end" />'+d.repeat_radio_end2+'</label><input class="dhx_repeat_text" type="text" name="occurences_count" value="1" />'+d.repeat_text_occurences_count+'</div> <div><label><input class="dhx_repeat_radio" type="radio" name="end" />'+d.repeat_radio_end3+'</label><input class="dhx_repeat_date" type="text" name="date_of_end" value="'+e.config.repeat_date_of_end+'" /></div> </div> </form> </div> </div>'},_ds:{},_get_form_node:function(r,_,i){var s=r[_];if(!s)return null;if(s.nodeName)return s;if(s.length){for(var d=0;d<s.length;d++)if(s[d].value==i)return s[d]}},_get_node_value:function(r,_,i){var s=r[_];if(!s)return"";if(s.length){if(i){for(var d=[],l=0;l<s.length;l++)s[l].checked&&d.push(s[l].value);return d}for(l=0;l<s.length;l++)if(s[l].checked)return s[l].value}return s.value?i?[s.value]:s.value:void 0},_get_node_numeric_value:function(r,_){return 1*e.form_blocks.recurring._get_node_value(r,_)||0},_set_node_value:function(r,_,i){var s=r[_];if(s){if(s.name==_)s.value=i;else if(s.length)for(var d=typeof i=="object",l=0;l<s.length;l++)(d||s[l].value==i)&&(s[l].checked=d?!!i[s[l].value]:!!i)}},_init_set_value:function(r,_,i){var s=e.form_blocks.recurring,d=s._get_node_value,l=s._set_node_value;e.form_blocks.recurring._ds={start:i.start_date,end:i._end_date};var h=e.date.str_to_date(e.config.repeat_date,!1,!0),f=e.date.date_to_str(e.config.repeat_date),m=r.getElementsByTagName("FORM")[0],u={};function p(D){for(var E=0;E<D.length;E++){var S=D[E];if(S.name)if(u[S.name])if(u[S.name].nodeType){var N=u[S.name];u[S.name]=[N,S]}else u[S.name].push(S);else u[S.name]=S}}if(p(m.getElementsByTagName("INPUT")),p(m.getElementsByTagName("SELECT")),!e.config.repeat_date_of_end){var b=e.date.date_to_str(e.config.repeat_date);e.config.repeat_date_of_end=b(e.date.add(e._currentDate(),30,"day"))}l(u,"date_of_end",e.config.repeat_date_of_end);var c=function(D){return e._lightbox.querySelector(`#${D}`)||{style:{}}};function g(){c("dhx_repeat_day").style.display="none",c("dhx_repeat_week").style.display="none",c("dhx_repeat_month").style.display="none",c("dhx_repeat_year").style.display="none",c("dhx_repeat_"+this.value).style.display="",e.setLightboxSize()}function v(D,E){var S=D.end;if(S.length)if(S[0].value&&S[0].value!="on")for(var N=0;N<S.length;N++)S[N].value==E&&(S[N].checked=!0);else{var A=0;switch(E){case"no":A=0;break;case"date_of_end":A=2;break;default:A=1}S[A].checked=!0}else S.value=E}e.form_blocks.recurring._get_repeat_code=function(D){var E=[d(u,"repeat")];for(y[E[0]](E,D);E.length<5;)E.push("");var S="",N=function(A){var M=A.end;if(M.length){for(var T=0;T<M.length;T++)if(M[T].checked)return M[T].value&&M[T].value!="on"?M[T].value:T?T==2?"date_of_end":"occurences_count":"no"}else if(M.value)return M.value;return"no"}(u);return N=="no"?(D.end=new Date(9999,1,1),S="no"):N=="date_of_end"?D.end=function(A){var M=h(A);return e.config.include_end_by&&(M=e.date.add(M,1,"day")),M}(d(u,"date_of_end")):(e.transpose_type(E.join("_")),S=Math.max(1,d(u,"occurences_count")),D.end=e.date["add_"+E.join("_")](new Date(D.start),S+0,{start_date:D.start})||D.start),E.join("_")+"#"+S};var y={month:function(D,E){var S=e.form_blocks.recurring._get_node_value,N=e.form_blocks.recurring._get_node_numeric_value;S(u,"month_type")=="d"?(D.push(Math.max(1,N(u,"month_count"))),E.start.setDate(S(u,"month_day"))):(D.push(Math.max(1,N(u,"month_count2"))),D.push(S(u,"month_day2")),D.push(Math.max(1,N(u,"month_week2"))),e.config.repeat_precise||E.start.setDate(1)),E._start=!0},week:function(D,E){var S=e.form_blocks.recurring._get_node_value,N=e.form_blocks.recurring._get_node_numeric_value;D.push(Math.max(1,N(u,"week_count"))),D.push(""),D.push("");for(var A=[],M=S(u,"week_day",!0),T=E.start.getDay(),C=!1,O=0;O<M.length;O++)A.push(M[O]),C=C||M[O]==T;A.length||(A.push(T),C=!0),A.sort(),e.config.repeat_precise?C||(e.transpose_day_week(E.start,A,1,7),E._start=!0):(E.start=e.date.week_start(E.start),E._start=!0),D.push(A.join(","))},day:function(D){var E=e.form_blocks.recurring._get_node_value,S=e.form_blocks.recurring._get_node_numeric_value;E(u,"day_type")=="d"?D.push(Math.max(1,S(u,"day_count"))):(D.push("week"),D.push(1),D.push(""),D.push(""),D.push(e.config.recurring_workdays.join(",")),D.splice(0,1))},year:function(D,E){var S=e.form_blocks.recurring._get_node_value;S(u,"year_type")=="d"?(D.push("1"),E.start.setMonth(0),E.start.setDate(S(u,"year_day")),E.start.setMonth(S(u,"year_month"))):(D.push("1"),D.push(S(u,"year_day2")),D.push(S(u,"year_week2")),E.start.setDate(1),E.start.setMonth(S(u,"year_month2"))),E._start=!0}},x={week:function(D,E){var S=e.form_blocks.recurring._set_node_value;S(u,"week_count",D[1]);for(var N=D[4].split(","),A={},M=0;M<N.length;M++)A[N[M]]=!0;S(u,"week_day",A)},month:function(D,E){var S=e.form_blocks.recurring._set_node_value;D[2]===""?(S(u,"month_type","d"),S(u,"month_count",D[1]),S(u,"month_day",E.start.getDate())):(S(u,"month_type","w"),S(u,"month_count2",D[1]),S(u,"month_week2",D[3]),S(u,"month_day2",D[2]))},day:function(D,E){var S=e.form_blocks.recurring._set_node_value;S(u,"day_type","d"),S(u,"day_count",D[1])},year:function(D,E){var S=e.form_blocks.recurring._set_node_value;D[2]===""?(S(u,"year_type","d"),S(u,"year_day",E.start.getDate()),S(u,"year_month",E.start.getMonth())):(S(u,"year_type","w"),S(u,"year_week2",D[3]),S(u,"year_day2",D[2]),S(u,"year_month2",E.start.getMonth()))}};e.form_blocks.recurring._set_repeat_code=function(D,E){var S=e.form_blocks.recurring._set_node_value,N=D.split("#");switch(D=N[0].split("_"),x[D[0]](D,E),N[1]){case"no":v(u,"no");break;case"":v(u,"date_of_end");var A=E.end;e.config.include_end_by&&(A=e.date.add(A,-1,"day")),S(u,"date_of_end",f(A));break;default:v(u,"occurences_count"),S(u,"occurences_count",N[1])}S(u,"repeat",D[0]);var M=e.form_blocks.recurring._get_form_node(u,"repeat",D[0]);M.nodeName=="SELECT"?(M.dispatchEvent(new Event("change")),M.dispatchEvent(new MouseEvent("click"))):M.dispatchEvent(new MouseEvent("click"))};for(var k=0;k<m.elements.length;k++){var w=m.elements[k];w.name==="repeat"&&(w.nodeName!="SELECT"||w.$_eventAttached?w.$_eventAttached||(w.$_eventAttached=!0,w.addEventListener("click",g)):(w.$_eventAttached=!0,w.addEventListener("change",g)))}e._lightbox._rec_init_done=!0},set_value:function(r,_,i){var s=e.form_blocks.recurring;e._lightbox._rec_init_done||s._init_set_value(r,_,i),r.open=!i.rec_type,r.blocked=this._is_modified_occurence(i);var d=s._ds;d.start=i.start_date,d.end=i._end_date,s._toggle_block(),_&&s._set_repeat_code(_,d)},get_value:function(r,_){if(r.open){var i=e.form_blocks.recurring._ds,s={};(function(){var d=e.formSection("time");if(d||(d=a("time")),d||(d=a("calendar_time")),!d)throw new Error(["Can't calculate the recurring rule, the Recurring form block can't find the Time control. Make sure you have the time control in 'scheduler.config.lightbox.sections' config.","You can use either the default time control https://docs.dhtmlx.com/scheduler/time.html, or the datepicker https://docs.dhtmlx.com/scheduler/minicalendar.html, or a custom control. ",'In the latter case, make sure the control is named "time":',"","scheduler.config.lightbox.sections = [",'{name:"time", height:72, type:"YOU CONTROL", map_to:"auto" }];'].join(`
`));return d})().getValue(s),i.start=s.start_date,_.rec_type=e.form_blocks.recurring._get_repeat_code(i),i._start?(_.start_date=new Date(i.start),_._start_date=new Date(i.start),i._start=!1):_._start_date=null,_._end_date=i.end,_.rec_pattern=_.rec_type.split("#")[0]}else _.rec_type=_.rec_pattern="",_._end_date=_.end_date;return _.rec_type},_get_button:function(){return t().header.firstChild.firstChild},_get_form:function(){return t().node},open:function(){var r=e.form_blocks.recurring;r._get_form().open||r._toggle_block()},close:function(){var r=e.form_blocks.recurring;r._get_form().open&&r._toggle_block()},_toggle_block:function(){var r=e.form_blocks.recurring,_=r._get_form(),i=r._get_button();_.open||_.blocked?(_.style.height="0px",i&&(i.style.backgroundPosition="-5px 20px",i.nextSibling.innerHTML=e.locale.labels.button_recurring)):(_.style.height="auto",i&&(i.style.backgroundPosition="-5px 0px",i.nextSibling.innerHTML=e.locale.labels.button_recurring_open)),_.open=!_.open,e.setLightboxSize()},focus:function(r){},button_click:function(r,_,i){e.form_blocks.recurring._get_form().blocked||e.form_blocks.recurring._toggle_block()}},e._rec_markers={},e._rec_markers_pull={},e._add_rec_marker=function(r,_){r._pid_time=_,this._rec_markers[r.id]=r,this._rec_markers_pull[r.event_pid]||(this._rec_markers_pull[r.event_pid]={}),this._rec_markers_pull[r.event_pid][_]=r},e._get_rec_marker=function(r,_){var i=this._rec_markers_pull[_];return i?i[r]:null},e._get_rec_markers=function(r){return this._rec_markers_pull[r]||[]},e._rec_temp=[],o=e.addEvent,e.addEvent=function(r,_,i,s,d){var l=o.apply(this,arguments);if(l&&e.getEvent(l)){var h=e.getEvent(l);h.start_date&&(h.start_date=n(h.start_date)),h.end_date&&(h.end_date=n(h.end_date)),this._is_modified_occurence(h)&&e._add_rec_marker(h,1e3*h.event_length),h.rec_type&&(h.rec_pattern=h.rec_type.split("#")[0])}return l},e.attachEvent("onEventIdChange",function(r,_){if(!this._ignore_call){this._ignore_call=!0,e._rec_markers[r]&&(e._rec_markers[_]=e._rec_markers[r],delete e._rec_markers[r]),e._rec_markers_pull[r]&&(e._rec_markers_pull[_]=e._rec_markers_pull[r],delete e._rec_markers_pull[r]);for(var i=0;i<this._rec_temp.length;i++)(s=this._rec_temp[i]).event_pid==r&&(s.event_pid=_,this.changeEventId(s.id,_+"#"+s.id.split("#")[1]));for(var i in this._rec_markers){var s;(s=this._rec_markers[i]).event_pid==r&&(s.event_pid=_,s._pid_changed=!0)}var d=e._rec_markers[_];d&&d._pid_changed&&(delete d._pid_changed,setTimeout(function(){if(e.$destroyed)return!0;e.callEvent("onEventChanged",[_,e.getEvent(_)])},1)),delete this._ignore_call}}),e.attachEvent("onConfirmedBeforeEventDelete",function(r){var _=this.getEvent(r);if(this._is_virtual_event(r)||this._is_modified_occurence(_)&&_.rec_type&&_.rec_type!="none"){r=r.split("#");var i=this.uid(),s=r[1]?r[1]:Math.round(_._pid_time/1e3),d=this._copy_event(_);d.id=i,d.event_pid=_.event_pid||r[0];var l=s;d.event_length=l,d.rec_type=d.rec_pattern="none",this.addEvent(d),this._add_rec_marker(d,1e3*l)}else{_.rec_type&&this._lightbox_id&&this._roll_back_dates(_);var h=this._get_rec_markers(r);for(var f in h)h.hasOwnProperty(f)&&(r=h[f].id,this.getEvent(r)&&this.deleteEvent(r,!0))}return!0}),e.attachEvent("onEventDeleted",function(r,_){!this._is_virtual_event(r)&&this._is_modified_occurence(_)&&(e._events[r]||(_.rec_type=_.rec_pattern="none",this.setEvent(r,_)))}),e.attachEvent("onEventChanged",function(r,_){if(this._loading)return!0;var i=this.getEvent(r);if(this._is_virtual_event(r)){r=r.split("#");var s=this.uid();this._not_render=!0;var d=this._copy_event(_);d.id=s,d.event_pid=r[0];var l=r[1];d.event_length=l,d.rec_type=d.rec_pattern="",this._add_rec_marker(d,1e3*l),this.addEvent(d),this._not_render=!1}else{i.start_date&&(i.start_date=n(i.start_date)),i.end_date&&(i.end_date=n(i.end_date)),i.rec_type&&this._lightbox_id&&this._roll_back_dates(i);var h=this._get_rec_markers(r);for(var f in h)h.hasOwnProperty(f)&&(delete this._rec_markers[h[f].id],this.deleteEvent(h[f].id,!0));delete this._rec_markers_pull[r];for(var m=!1,u=0;u<this._rendered.length;u++)this._rendered[u].getAttribute(this.config.event_attribute)==r&&(m=!0);m||(this._select_id=null)}return!0}),e.attachEvent("onEventAdded",function(r){if(!this._loading){var _=this.getEvent(r);_.rec_type&&!_.event_length&&this._roll_back_dates(_)}return!0}),e.attachEvent("onEventSave",function(r,_,i){return this.getEvent(r).rec_type||!_.rec_type||this._is_virtual_event(r)||(this._select_id=null),!0}),e.attachEvent("onEventCreated",function(r){var _=this.getEvent(r);return _.rec_type||(_.rec_type=_.rec_pattern=_.event_length=_.event_pid=""),!0}),e.attachEvent("onEventCancel",function(r){var _=this.getEvent(r);_.rec_type&&(this._roll_back_dates(_),this.render_view_data())}),e._roll_back_dates=function(r){r.start_date&&(r.start_date=n(r.start_date)),r.end_date&&(r.end_date=n(r.end_date)),r.event_length=Math.round((r.end_date.valueOf()-r.start_date.valueOf())/1e3),r.end_date=r._end_date,r._start_date&&(r.start_date.setMonth(0),r.start_date.setDate(r._start_date.getDate()),r.start_date.setMonth(r._start_date.getMonth()),r.start_date.setFullYear(r._start_date.getFullYear()))},e._is_virtual_event=function(r){return r.toString().indexOf("#")!=-1},e._is_modified_occurence=function(r){return r.event_pid&&r.event_pid!="0"},e.showLightbox_rec=e.showLightbox,e.showLightbox=function(r){var _=this.locale,i=e.config.lightbox_recurring,s=this.getEvent(r),d=s.event_pid,l=this._is_virtual_event(r);l&&(d=r.split("#")[0]);var h=function(m){var u=e.getEvent(m);return u._end_date=u.end_date,u.end_date=new Date(u.start_date.valueOf()+1e3*u.event_length),e.showLightbox_rec(m)};if((d||1*d==0)&&s.rec_type)return h(r);if(!d||d==="0"||!_.labels.confirm_recurring||i=="instance"||i=="series"&&!l)return this.showLightbox_rec(r);if(i=="ask"){var f=this;e.modalbox({text:_.labels.confirm_recurring,title:_.labels.title_confirm_recurring,width:"500px",position:"middle",buttons:[_.labels.button_edit_series,_.labels.button_edit_occurrence,_.labels.icon_cancel],callback:function(m){switch(+m){case 0:return h(d);case 1:return f.showLightbox_rec(r);case 2:return}}})}else h(d)},e.get_visible_events_rec=e.get_visible_events,e.get_visible_events=function(r){for(var _=0;_<this._rec_temp.length;_++)delete this._events[this._rec_temp[_].id];this._rec_temp=[];var i=this.get_visible_events_rec(r),s=[];for(_=0;_<i.length;_++)i[_].rec_type?i[_].rec_pattern!="none"&&this.repeat_date(i[_],s):s.push(i[_]);return s},function(){var r=e.isOneDayEvent;e.isOneDayEvent=function(i){return!!i.rec_type||r.call(this,i)};var _=e.updateEvent;e.updateEvent=function(i){var s=e.getEvent(i);s&&s.rec_type&&(s.rec_pattern=(s.rec_type||"").split("#")[0]),s&&s.rec_type&&!this._is_virtual_event(i)?e.update_view():_.call(this,i)}}(),e.transponse_size={day:1,week:7,month:1,year:12},e.date.day_week=function(r,_,i){r.setDate(1);var s=e.date.month_start(new Date(r)),d=1*_+(i=7*(i-1))-r.getDay()+1;r.setDate(d<=i?d+7:d);var l=e.date.month_start(new Date(r));return s.valueOf()===l.valueOf()},e.transpose_day_week=function(r,_,i,s,d){for(var l=(r.getDay()||(e.config.start_on_monday?7:0))-i,h=0;h<_.length;h++)if(_[h]>l)return r.setDate(r.getDate()+1*_[h]-l-(s?i:d));this.transpose_day_week(r,_,i+s,null,i)},e.transpose_type=function(r){var _="transpose_"+r;if(!this.date[_]){var i=r.split("_"),s="add_"+r,d=this.transponse_size[i[0]]*i[1];if(i[0]=="day"||i[0]=="week"){var l=null;if(i[4]&&(l=i[4].split(","),e.config.start_on_monday)){for(var h=0;h<l.length;h++)l[h]=1*l[h]||7;l.sort()}this.date[_]=function(f,m){var u=Math.floor((m.valueOf()-f.valueOf())/(864e5*d));return u>0&&f.setDate(f.getDate()+u*d),l&&e.transpose_day_week(f,l,1,d),f},this.date[s]=function(f,m){var u=new Date(f.valueOf());if(l)for(var p=0;p<m;p++)e.transpose_day_week(u,l,0,d);else u.setDate(u.getDate()+m*d);return u}}else i[0]!="month"&&i[0]!="year"||(this.date[_]=function(f,m,u){var p=Math.ceil((12*m.getFullYear()+1*m.getMonth()+1-(12*f.getFullYear()+1*f.getMonth()+1))/d-1);return p>=0&&(f.setDate(1),f.setMonth(f.getMonth()+p*d)),e.date[s](f,0,u)},this.date[s]=function(f,m,u,p){if(p?p++:p=1,p>12)return null;var b=new Date(f.valueOf());b.setDate(1),b.setMonth(b.getMonth()+m*d);var c=b.getMonth(),g=b.getFullYear();b.setDate(u.start_date.getDate()),i[3]&&e.date.day_week(b,i[2],i[3]);var v=e.config.recurring_overflow_instances;return b.getMonth()!=c&&v!="none"&&(b=v==="lastDay"?new Date(g,c+1,0,b.getHours(),b.getMinutes(),b.getSeconds(),b.getMilliseconds()):e.date[s](new Date(g,c+1,0),m||1,u,p)),b})}},e.repeat_date=function(r,_,i,s,d,l){s=s||this._min_date,d=d||this._max_date;var h=l||-1,f=new Date(r.start_date.valueOf()),m=f.getHours(),u=0;for(!r.rec_pattern&&r.rec_type&&(r.rec_pattern=r.rec_type.split("#")[0]),this.transpose_type(r.rec_pattern),f=e.date["transpose_"+r.rec_pattern](f,s,r);f&&(f<r.start_date||e._fix_daylight_saving_date(f,s,r,f,new Date(f.valueOf()+1e3*r.event_length)).valueOf()<=s.valueOf()||f.valueOf()+1e3*r.event_length<=s.valueOf());)f=this.date["add_"+r.rec_pattern](f,1,r);for(;f&&f<d&&f<r.end_date&&(h<0||u<h);){f.setHours(m);var p=e.config.occurrence_timestamp_in_utc?Date.UTC(f.getFullYear(),f.getMonth(),f.getDate(),f.getHours(),f.getMinutes(),f.getSeconds()):f.valueOf(),b=this._get_rec_marker(p,r.id);if(b)i&&(b.rec_type!="none"&&u++,_.push(b));else{var c=new Date(f.valueOf()+1e3*r.event_length),g=this._copy_event(r);if(g.text=r.text,g.start_date=f,g.event_pid=r.id,g.id=r.id+"#"+Math.round(p/1e3),g.end_date=c,g.end_date=e._fix_daylight_saving_date(g.start_date,g.end_date,r,f,g.end_date),g._timed=this.isOneDayEvent(g),!g._timed&&!this._table_view&&!this.config.multi_day)return;_.push(g),i||(this._events[g.id]=g,this._rec_temp.push(g)),u++}f=this.date["add_"+r.rec_pattern](f,1,r)}},e._fix_daylight_saving_date=function(r,_,i,s,d){var l=r.getTimezoneOffset()-_.getTimezoneOffset();return l?l>0?new Date(s.valueOf()+1e3*i.event_length-60*l*1e3):new Date(_.valueOf()-60*l*1e3):new Date(d.valueOf())},e.getRecDates=function(r,_){var i=typeof r=="object"?r:e.getEvent(r),s=[];if(_=_||100,!i.rec_type)return[{start_date:i.start_date,end_date:i.end_date}];if(i.rec_type=="none")return[];e.repeat_date(i,s,!0,i.start_date,i.end_date,_);for(var d=[],l=0;l<s.length;l++)s[l].rec_type!="none"&&d.push({start_date:s[l].start_date,end_date:s[l].end_date});return d},e.getEvents=function(r,_){var i=[];for(var s in this._events){var d=this._events[s];if(d&&d.start_date<_&&d.end_date>r)if(d.rec_pattern){if(d.rec_pattern=="none")continue;var l=[];this.repeat_date(d,l,!0,r,_);for(var h=0;h<l.length;h++)!l[h].rec_pattern&&l[h].start_date<_&&l[h].end_date>r&&!this._rec_markers[l[h].id]&&i.push(l[h])}else this._is_virtual_event(d.id)||i.push(d)}return i},e.config.repeat_date="%m.%d.%Y",e.config.lightbox.sections=[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"recurring",type:"recurring",map_to:"rec_type",button:"recurring"},{name:"time",height:72,type:"time",map_to:"auto"}],e._copy_dummy=function(r){var _=new Date(this.start_date),i=new Date(this.end_date);this.start_date=_,this.end_date=i,this.event_length=this.event_pid=this.rec_pattern=this.rec_type=null},e.config.include_end_by=!1,e.config.lightbox_recurring="ask",e.attachEvent("onClearAll",function(){e._rec_markers={},e._rec_markers_pull={},e._rec_temp=[]})}function serialize(e){const t=getSerializator(e);e.data_attributes=function(){var a=[],n=e._helpers.formatDate,o=t();for(var r in o){var _=o[r];for(var i in _)i.substr(0,1)!="_"&&a.push([i,i=="start_date"||i=="end_date"?n:null]);break}return a},e.toXML=function(a){var n=[],o=this.data_attributes(),r=t();for(var _ in r){var i=r[_];n.push("<event>");for(var s=0;s<o.length;s++)n.push("<"+o[s][0]+"><![CDATA["+(o[s][1]?o[s][1](i[o[s][0]]):i[o[s][0]])+"]]></"+o[s][0]+">");n.push("</event>")}return(a||"")+"<data>"+n.join(`
`)+"</data>"},e._serialize_json_value=function(a){return a===null||typeof a=="boolean"?a=""+a:(a||a===0||(a=""),a='"'+a.toString().replace(/\n/g,"").replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'),a},e.toJSON=function(){return JSON.stringify(this.serialize())},e.toICal=function(a){var n=e.date.date_to_str("%Y%m%dT%H%i%s"),o=e.date.date_to_str("%Y%m%d"),r=[],_=t();for(var i in _){var s=_[i];r.push("BEGIN:VEVENT"),s._timed&&(s.start_date.getHours()||s.start_date.getMinutes())?r.push("DTSTART:"+n(s.start_date)):r.push("DTSTART:"+o(s.start_date)),s._timed&&(s.end_date.getHours()||s.end_date.getMinutes())?r.push("DTEND:"+n(s.end_date)):r.push("DTEND:"+o(s.end_date)),r.push("SUMMARY:"+s.text),r.push("END:VEVENT")}return`BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//dhtmlXScheduler//NONSGML v2.2//EN
DESCRIPTION:`+(a||"")+`
`+r.join(`
`)+`
END:VCALENDAR`}}function autoscroll(e){let t=null,a=null;function n(_){t&&clearInterval(t);const i=e.matrix[e._mode];if(!i)return;e._schedulerOuter=e.$container.querySelector(".dhx_timeline_data_wrapper"),i.scrollable||(e._schedulerOuter=e.$container.querySelector(".dhx_cal_data"));const s={pageX:_.touches?_.touches[0].pageX:_.pageX,pageY:_.touches?_.touches[0].pageY:_.pageY};t=setInterval(function(){(function(d){if(!e.getState().drag_id)return clearInterval(t),void(a=null);const l=e.matrix[e._mode];if(!l)return;const h=e._schedulerOuter,f=function(y,x){const k=e.matrix[e._mode],w={},D={};let E=x;for(w.x=y.touches?y.touches[0].pageX:y.pageX,w.y=y.touches?y.touches[0].pageY:y.pageY,D.left=E.offsetLeft+k.dx,D.top=E.offsetTop;E;)D.left+=E.offsetLeft,D.top+=E.offsetTop,E=E.offsetParent;return{x:w.x-D.left,y:w.y-D.top}}(d,h),m=h.offsetWidth-l.dx,u=h.offsetHeight,p=f.x,b=f.y;let c=l.autoscroll||{};c===!0&&(c={}),e._merge(c,{range_x:200,range_y:100,speed_x:20,speed_y:10});let g=o(p,m,a?a.x:0,c.range_x);l.scrollable||(g=0);let v=o(b,u,a?a.y:0,c.range_y);!v&&!g||a||(a={x:p,y:b},g=0,v=0),g*=c.speed_x,v*=c.speed_y,g&&v&&(Math.abs(g/5)>Math.abs(v)?v=0:Math.abs(v/5)>Math.abs(g)&&(g=0)),g||v?(a.started=!0,function(y,x){const k=e._schedulerOuter;x&&(k.scrollTop+=x),y&&(k.scrollLeft+=y)}(g,v)):clearInterval(t)})(s)},10)}function o(_,i,s,d){return _<d&&(!a||a.started||_<s)?-1:i-_<d&&(!a||a.started||_>s)?1:0}var r=e.attachEvent("onSchedulerReady",function(){e.matrix&&(e.event(document.body,"mousemove",n),e.detachEvent(r))})}dhtmlxError$1.prototype.catchError=function(e,t){this.catches[e]=t},dhtmlxError$1.prototype.throwError=function(e,t,a){return this.catches[e]?this.catches[e](e,t,a):this.catches.ALL?this.catches.ALL(e,t,a):(global.alert("Error type: "+arguments[0]+`
Description: `+arguments[1]),null)};const scrollHelperFactory=function(){var e,t={minMax:"[0;max]",maxMin:"[max;0]",nMaxMin:"[-max;0]"};function a(){var r=t.minMax,_=function(){var i=document.createElement("div");i.style.cssText="direction: rtl;overflow: auto;width:100px;height: 100px;position:absolute;top: -100500px;left: -100500px;";var s=document.createElement("div");return s.style.cssText="width: 100500px;height: 1px;",i.appendChild(s),i}();return document.body.appendChild(_),_.scrollLeft>0?r=t.minMax:(_.scrollLeft=-50,r=_.scrollLeft===-50?t.nMaxMin:t.maxMin),document.body.removeChild(_),r}function n(r,_){var i=o();return i===t.nMaxMin?r?-r:0:i===t.minMax?_-r:r}function o(){return e||(e=a()),e}return{modes:t,getMode:o,normalizeValue:n,getScrollValue:function(r){var _=getComputedStyle(r).direction;if(_&&_!=="ltr"){var i=r.scrollWidth-r.offsetWidth;return n(r.scrollLeft,i)}return r.scrollLeft},setScrollValue:function(r,_){var i=getComputedStyle(r).direction;if(i&&i!=="ltr"){var s=n(_,r.scrollWidth-r.offsetWidth);r.scrollLeft=s}else r.scrollLeft=_}}};function smartRender(e){e._timeline_smart_render={_prepared_events_cache:null,_rendered_events_cache:[],_rendered_header_cache:[],_rendered_labels_cache:[],_rows_to_delete:[],_rows_to_add:[],_cols_to_delete:[],_cols_to_add:[],getViewPort:function(t,a,n,o){var r=e.$container.querySelector(".dhx_cal_data"),_=r.getBoundingClientRect(),i=e.$container.querySelector(".dhx_timeline_scrollable_data");i&&n===void 0&&(n=t.getScrollValue(i)),o===void 0&&(o=i?i.scrollTop:r.scrollTop);var s={};for(var d in _)s[d]=_[d];return s.scrollLeft=n||0,s.scrollTop=o||0,a&&(_.height=a),s},isInXViewPort:function(t,a){var n=a.scrollLeft,o=a.width+a.scrollLeft;return t.left<o+100&&t.right>n-100},isInYViewPort:function(t,a){var n=a.scrollTop,o=a.height+a.scrollTop;return t.top<o+80&&t.bottom>n-80},getVisibleHeader:function(t,a){var n="";for(var o in this._rendered_header_cache=[],t._h_cols){var r=t._h_cols[o];this.isInXViewPort({left:r.left,right:r.left+e._cols[o]},a)&&(n+=r.div.outerHTML,this._rendered_header_cache.push(r.div.getAttribute("data-col-id")))}return n},updateHeader:function(t,a,n){this._cols_to_delete=[],this._cols_to_add=[];for(var o=e.$container.querySelectorAll(".dhx_cal_header > div"),r=o[o.length-1].querySelectorAll(".dhx_scale_bar"),_=[],i=0;i<r.length;i++)_.push(r[i].getAttribute("data-col-id"));if(this.getVisibleHeader(t,a)){for(var s=this._rendered_header_cache.slice(),d=[],l=(i=0,_.length);i<l;i++){var h=s.indexOf(_[i]);h>-1?s.splice(h,1):d.push(_[i])}d.length&&(this._cols_to_delete=d.slice(),this._deleteHeaderCells(d,t,n)),s.length&&(this._cols_to_add=s.slice(),this._addHeaderCells(s,t,n))}},_deleteHeaderCells:function(t,a,n){for(var o=0;o<t.length;o++){var r=n.querySelector('[data-col-id="'+t[o]+'"]');r&&n.removeChild(r)}},_addHeaderCells:function(t,a,n){for(var o="",r=0;r<t.length;r++)o+=a._h_cols[t[r]].div.outerHTML;const _=document.createElement("template");_.innerHTML=o,n.appendChild(_.content)},getVisibleLabels:function(t,a){if(t._label_rows.length){var n="";this._rendered_labels_cache=[];for(var o=0;o<t._label_rows.length;o++)this.isInYViewPort({top:t._label_rows[o].top,bottom:t._label_rows[o].top+t._section_height[t.y_unit[o].key]},a)&&(n+=t._label_rows[o].div,this._rendered_labels_cache.push(o));return n}},updateLabels:function(t,a,n){this._rows_to_delete=[],this._rows_to_add=[];let o=[];if(e.$container.querySelectorAll(".dhx_timeline_label_row").forEach(l=>{o.push(Number(l.getAttribute("data-row-index")))}),o.length||(this.getVisibleLabels(t,a),o=this._rendered_labels_cache.slice()),this.getVisibleLabels(t,a)){for(var r=this._rendered_labels_cache.slice(),_=[],i=0,s=o.length;i<s;i++){var d=r.indexOf(o[i]);d>-1?r.splice(d,1):_.push(o[i])}_.length&&(this._rows_to_delete=_.slice(),this._deleteLabelCells(_,t,n)),r.length&&(this._rows_to_add=r.slice(),this._addLabelCells(r,t,n))}},_deleteLabelCells:function(t,a,n){for(var o=0;o<t.length;o++){var r=n.querySelector('[data-row-index="'+t[o]+'"]');r&&n.removeChild(r)}},_addLabelCells:function(t,a,n){for(var o="",r=0;r<t.length;r++)o+=a._label_rows[t[r]].div;const _=document.createElement("template");_.innerHTML=o,n.appendChild(_.content)},clearPreparedEventsCache:function(){this.cachePreparedEvents(null)},cachePreparedEvents:function(t){this._prepared_events_cache=t,this._prepared_events_coordinate_cache=t},getPreparedEvents:function(t){var a;return this._prepared_events_cache?a=this._prepared_events_cache:((a=e._prepare_timeline_events(t)).$coordinates={},this.cachePreparedEvents(a)),a},updateEvents:function(t,a){var n=this.getPreparedEvents(t),o=this._rendered_events_cache.slice();if(this._rendered_events_cache=[],!e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col"))return;const r=[];for(var _=0;_<this._rendered_labels_cache.length;_++){var i=this._rendered_labels_cache[_],s=[];const p=t.y_unit[i].key;var d=o[i]?o[i].slice():[];e._timeline_calculate_event_positions.call(t,n[i]);for(var l=e._timeline_smart_render.getVisibleEventsForRow(t,a,n,i),h=0,f=l.length;h<f;h++){var m=d.indexOf(l[h].id);m>-1?d.splice(m,1):s.push(l[h])}var u=t._divBySectionId[p];if(!u)continue;d.length&&this._deleteEvents(d,t,u);const b={DOMParent:u,buffer:document.createElement("template")};r.push(b),s.length&&this._addEvents(s,t,b.buffer,i)}r.forEach(function(p){p.DOMParent.appendChild(p.buffer.content)}),e._populate_timeline_rendered(e.$container),t._matrix=n},_deleteEvents:function(t,a,n){for(var o=0;o<t.length;o++){var r=n.querySelector("["+e.config.event_attribute+'="'+t[o]+'"]');r&&(r.classList.contains("dhx_in_move")||n.removeChild(r))}},_addEvents:function(t,a,n,o){var r=e._timeline_update_events_html.call(a,t);n.innerHTML=r},getVisibleEventsForRow:function(t,a,n,o){var r=[];if(t.render=="cell")r=n;else{var _=n[o];if(_)for(var i=0,s=_.length;i<s;i++){var d,l,h=_[i],f=o+"_"+h.id;n.$coordinates&&n.$coordinates[f]?(d=n.$coordinates[f].xStart,l=n.$coordinates[f].xEnd):(d=e._timeline_getX(h,!1,t),l=e._timeline_getX(h,!0,t),n.$coordinates&&(n.$coordinates[f]={xStart:d,xEnd:l})),e._timeline_smart_render.isInXViewPort({left:d,right:l},a)&&(r.push(h),this._rendered_events_cache[o]||(this._rendered_events_cache[o]=[]),this._rendered_events_cache[o].push(h.id))}}return r},getVisibleRowCellsHTML:function(t,a,n,o,r){for(var _,i="",s=this._rendered_header_cache,d=0;d<s.length;d++){var l=s[d];_=t._h_cols[l].left-t.dx,e._ignores[l]?t.render=="cell"?i+=e._timeline_get_html_for_cell_ignores(n):i+=e._timeline_get_html_for_bar_ignores():t.render=="cell"?i+=e._timeline_get_html_for_cell(l,r,t,o[r][l],n,_):i+=e._timeline_get_html_for_bar(l,r,t,o[r],_)}return i},getVisibleTimelineRowsHTML:function(t,a,n,o){var r="",_=e._timeline_get_cur_row_stats(t,o);_=e._timeline_get_fit_events_stats(t,o,_);var i=t._label_rows[o],s=e.templates[t.name+"_row_class"],d={view:t,section:i.section,template:s};return t.render=="cell"?(r+=e._timeline_get_html_for_cell_data_row(o,_,i.top,i.section.key,d),r+=this.getVisibleRowCellsHTML(t,a,_,n,o),r+="</div>"):(r+=e._timeline_get_html_for_bar_matrix_line(o,_,i.top,i.section.key,d),r+=e._timeline_get_html_for_bar_data_row(_,d),r+=this.getVisibleRowCellsHTML(t,a,_,n,o),r+="</div></div>"),r},updateGridRows:function(t,a){this._rows_to_delete.length&&this._deleteGridRows(this._rows_to_delete,t),this._rows_to_add.length&&this._addGridRows(this._rows_to_add,t,a)},_deleteGridRows:function(t,a){if(e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col")){for(var n=0;n<t.length;n++){const o=a.y_unit[t[n]]?a.y_unit[t[n]].key:null;a._divBySectionId[o]&&(a._divBySectionId[o].remove(),delete a._divBySectionId[o])}this._rows_to_delete=[]}},_addGridRows:function(t,a,n){if(!(s=e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col")))return;for(var o=this.getPreparedEvents(a),r="",_=0;_<t.length;_++)r+=this.getVisibleTimelineRowsHTML(a,n,o,t[_]);const i=document.createElement("template");i.innerHTML=r,s.appendChild(i.content);var s=e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col");a._divBySectionId={};for(let l=0,h=s.children.length;l<h;l++){var d=s.children[l];d.hasAttribute("data-section-id")&&(a._divBySectionId[d.getAttribute("data-section-id")]=d)}for(_=0;_<t.length;_++){const l=a.y_unit[t[_]]?a.y_unit[t[_]].key:null;e._timeline_finalize_section_add(a,a.y_unit[t[_]].key,a._divBySectionId[l])}e._mark_now&&e._mark_now(),this._rows_to_add=[]},updateGridCols:function(t,a){for(var n=this._rendered_header_cache,o={},r=0;r<n.length;r++)o[n[r]]=!0;e.$container.querySelectorAll(".dhx_timeline_data_row").forEach((function(_){const i=_.querySelectorAll("[data-col-id]"),s=Array.prototype.reduce.call(i,function(f,m){return f[m.dataset.colId]=m,f},{});var d=[],l=[];for(var h in s)o[h]||d.push(s[h]);for(var h in o)s[h]||l.push(h);d.forEach(function(f){f.remove()}),l.length&&this._addGridCols(_,l,t,a)}).bind(this))},_addGridCols:function(t,a,n,o){if(e.$container.querySelector(".dhx_cal_data .dhx_timeline_data_col"))for(var r=this.getPreparedEvents(n),_=0;_<this._rendered_labels_cache.length;_++){var i=this._rendered_labels_cache[_],s="",d=e._timeline_get_cur_row_stats(n,i);d=e._timeline_get_fit_events_stats(n,i,d);var l=t;if(l){for(var h=0;h<a.length;h++)if(!l.querySelector('[data-col-id="'+a[h]+'"]')){var f=this.getVisibleGridCell(n,o,d,r,i,a[h]);f&&(s+=f)}const m=document.createElement("template");m.innerHTML=s,l.appendChild(m.content)}}},getVisibleGridCell:function(t,a,n,o,r,_){if(t._h_cols[_]){var i="",s=t._h_cols[_].left-t.dx;return t.render=="cell"?e._ignores[_]||(i+=e._timeline_get_html_for_cell(_,r,t,o[r][_],n,s)):e._ignores[_]||(i+=e._timeline_get_html_for_bar(_,r,t,o[r],s)),i}}},e.attachEvent("onClearAll",function(){e._timeline_smart_render._prepared_events_cache=null,e._timeline_smart_render._rendered_events_cache=[]})}function timeline(e){function t(){var a=document.createElement("p");a.style.width="100%",a.style.height="200px";var n=document.createElement("div");n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style.visibility="hidden",n.style.width="200px",n.style.height="150px",n.style.overflow="hidden",n.appendChild(a),document.body.appendChild(n);var o=a.offsetWidth;n.style.overflow="scroll";var r=a.offsetWidth;return o==r&&(r=n.clientWidth),document.body.removeChild(n),o-r}e.ext.timeline={renderCells:function(a,n,o){if(!a||!a.length)return;const r=[];for(let _=0;_<a.length;_++){const i=a[_];let s="";i.$width&&(s="width:"+i.$width+"px;");let d=o;i.css&&(d+=" "+i.css),_===0&&(d+=" "+o+"_first"),_===a.length-1&&(d+=" "+o+"_last");const l=n(i)||"";r.push(`<div class='${d}' style='${s}'><div class='dhx_timeline_label_content_wrapper'>${l}</div></div>`)}return r.join("")},renderHeading:function(){return this.renderCells(this.columns,function(a){return a.label},"dhx_timeline_label_column dhx_timeline_label_column_header")},renderColumns:function(a){return this.renderCells(this.columns,function(n){return n.template&&n.template.call(self,a)||""},"dhx_timeline_label_column")},scrollTo:function(a){if(a){var n;n=a.date?a.date:a.left?a.left:a;var o,r=-1;if(a.section?r=this.getSectionTop(a.section):a.top&&(r=a.top),o=typeof n=="number"?n:this.posFromDate(n),e.config.rtl){var _=+e.$container.querySelector(".dhx_timeline_label_wrapper").style.height.replace("px",""),i=this._section_height[this.y_unit.length]+this._label_rows[this._label_rows.length-1].top;this.scrollHelper.getMode()==this.scrollHelper.modes.minMax&&(i>_||this.render=="tree")&&(o-=t())}var s=e.$container.querySelector(".dhx_timeline_data_wrapper");this.scrollable||(s=e.$container.querySelector(".dhx_cal_data")),this.scrollable&&this.scrollHelper.setScrollValue(s,o),r>0&&(s.scrollTop=r)}},getScrollPosition:function(){return{left:this._x_scroll||0,top:this._y_scroll||0}},posFromDate:function(a){return e._timeline_getX({start_date:a},!1,this)-1},dateFromPos:function(a){return e._timeline_drag_date(this,a)},sectionFromPos:function(a){var n={y:a};return e._resolve_timeline_section(this,n),n.section},resolvePosition:function(a){var n={date:null,section:null};return a.left&&(n.date=this.dateFromPos(a.left)),a.top&&(n.section=this.sectionFromPos(a.top)),n},getSectionHeight:function(a){return this._section_height[a]},getSectionTop:function(a){return this._rowStats[a].top},getEventTop:function(a){var n=this.getEventHeight(a),o=a._sorder||0,r=1+o*(n-3)+(o?2*o:0);return e.config.cascade_event_display&&(r=1+o*e.config.cascade_event_margin+(o?2*o:0)),r},getEventHeight:function(a){var n=this,o=a[n.y_property],r=n.event_dy;return n.event_dy=="full"&&(r=n.section_autoheight?n.getSectionHeight(o)-6:n.dy-3),n.resize_events&&(r=Math.max(Math.floor(r/(a._count||1)),n.event_min_dy)),r}},e._temp_matrix_scope=function(){function a(c,g){if(g=g||[],c.children)for(var v=0;v<c.children.length;v++)g.push(c.children[v].key),a(c.children[v],g);return g}function n(c,g){var v=g.order[c];return v===void 0&&(v="$_"+c),v}function o(c,g){if(g[c.key]=c,c.children)for(var v=0;v<c.children.length;v++)o(c.children[v],g)}function r(c,g){for(var v,y=[],x=0;x<g.y_unit.length;x++)y[x]=[];y[v]||(y[v]=[]);var k=function(L){for(var $={},j=L.y_unit_original||L.y_unit,P=0;P<j.length;P++)o(j[P],$);return $}(g),w=g.render=="tree";function D(L,$,j,P){L[$]||(L[$]=[]);for(var I=j;I<=P;I++)L[$][I]||(L[$][I]=[]),L[$][I].push(S)}w&&(y.$tree={});var E=g.y_property;for(x=0;x<c.length;x++){var S=c[x],N=S[E];v=n(N,g);var A=e._get_date_index(g,S.start_date),M=e._get_date_index(g,S.end_date);S.end_date.valueOf()==g._trace_x[M].valueOf()&&(M-=1),y[v]||(y[v]=[]),D(y,v,A,M);var T=k[N];if(w&&T&&T.$parent)for(var C={};T.$parent;){if(C[T.key])throw new Error("Invalid sections tree. Section `{key:'"+T.key+"', label:'"+T.label+"'}` has the same key as one of its parents. Make sure all sections have unique keys");C[T.key]=!0;var O=k[T.$parent];D(y.$tree,O.key,A,M),T=O}}return y}e.matrix={},e._merge=function(c,g){for(var v in g)c[v]===void 0&&(c[v]=g[v])},e.createTimelineView=function(c){e._merge(c,{scrollHelper:scrollHelperFactory(),column_width:100,autoscroll:{range_x:200,range_y:100,speed_x:20,speed_y:10},_is_new_view:!0,_section_autowidth:!0,_x_scroll:0,_y_scroll:0,_h_cols:{},_label_rows:[],section_autoheight:!0,name:"matrix",x:"time",y:"time",x_step:1,x_unit:"hour",y_unit:"day",y_step:1,x_start:0,x_size:24,y_start:0,y_size:7,render:"cell",dx:200,dy:50,event_dy:e.xy.bar_height,event_min_dy:e.xy.bar_height,resize_events:!0,fit_events:!0,fit_events_offset:0,show_unassigned:!1,second_scale:!1,round_position:!1,_logic:function(v,y,x){var k={};return e.checkEvent("onBeforeSectionRender")&&(k=e.callEvent("onBeforeSectionRender",[v,y,x])),k}}),c._original_x_start=c.x_start,c.x_unit!="day"&&(c.first_hour=c.last_hour=0),c._start_correction=c.first_hour?60*c.first_hour*60*1e3:0,c._end_correction=c.last_hour?60*(24-c.last_hour)*60*1e3:0,e.checkEvent("onTimelineCreated")&&e.callEvent("onTimelineCreated",[c]),makeEventable(c),e.attachEvent("onDestroy",function(){c.detachAllEvents()});var g=e.render_data;e.render_data=function(v,y){if(this._mode!=c.name)return g.apply(this,arguments);if(y&&!c.show_unassigned&&c.render!="cell")for(var x=0;x<v.length;x++)this.clear_event(v[x]),this.render_timeline_event.call(this.matrix[this._mode],v[x],!0);else e._renderMatrix.call(c,!0,!0)},e.matrix[c.name]=c,e.templates[c.name+"_cell_value"]=function(v){return v?v.length:""},e.templates[c.name+"_cell_class"]=function(v){return""},e.templates[c.name+"_scalex_class"]=function(v){return""},e.templates[c.name+"_second_scalex_class"]=function(v){return""},e.templates[c.name+"_row_class"]=function(v,y){return y.folder_events_available&&v.children?"folder":""},e.templates[c.name+"_scaley_class"]=function(v,y,x){return""},c.attachEvent("onBeforeRender",function(){return c.columns&&c.columns.length&&function(v,y){var x=y.dx,k=0,w=[];v.forEach(function(N){N.width?(k+=N.width,N.$width=N.width):w.push(N)});var D=!1,E=x-k;(E<0||w.length===0)&&(D=!0);var S=w.length;w.forEach(function(N){N.$width=Math.max(Math.floor(E/S),20),E-=N.$width,k+=N.$width,S--}),D&&(y.dx=k)}(c.columns,c),!0}),c.renderColumns=c.renderColumns||e.ext.timeline.renderColumns.bind(c),c.renderHeading=c.renderHeading||e.ext.timeline.renderHeading.bind(c),c.renderCells=c.renderCells||e.ext.timeline.renderCells.bind(c),e.templates[c.name+"_scale_label"]=function(v,y,x){return c.columns&&c.columns.length?c.renderColumns(x):y},e.templates[c.name+"_scale_header"]=function(v){return c.columns?v.renderHeading(v):e.locale.labels[c.name+"_scale_header"]||""},e.templates[c.name+"_tooltip"]=function(v,y,x){return x.text},e.templates[c.name+"_date"]=function(v,y){return v.getDay()==y.getDay()&&y-v<864e5||+v==+e.date.date_part(new Date(y))||+e.date.add(v,1,"day")==+y&&y.getHours()===0&&y.getMinutes()===0?e.templates.day_date(v):v.getDay()!=y.getDay()&&y-v<864e5?e.templates.day_date(v)+" &ndash; "+e.templates.day_date(y):e.templates.week_date(v,y)},e.templates[c.name+"_scale_date"]=e.date.date_to_str(c.x_date||e.config.hour_date),e.templates[c.name+"_second_scale_date"]=e.date.date_to_str(c.second_scale&&c.second_scale.x_date?c.second_scale.x_date:e.config.hour_date),e.date["add_"+c.name+"_private"]=function(v,y){var x=y,k=c.x_unit;if(c.x_unit=="minute"||c.x_unit=="hour"){var w=x;c.x_unit=="hour"&&(w*=60),w%1440||(x=w/1440,k="day")}return e.date.add(v,x,k)},e.date["add_"+c.name]=function(v,y,x){var k=e.date["add_"+c.name+"_private"](v,(c.x_length||c.x_size)*c.x_step*y);if(c.x_unit=="minute"||c.x_unit=="hour"){var w=c.x_length||c.x_size,D=c.x_unit=="hour"?60*c.x_step:c.x_step;if(D*w%1440)if(+e.date.date_part(new Date(v))==+e.date.date_part(new Date(k)))c.x_start+=y*w;else{var E=1440/(w*D)-1,S=Math.round(E*w);c.x_start=y>0?c.x_start-S:S+c.x_start}}return k},e.date[c.name+"_start"]=function(v){var y=(e.date[c.x_unit+"_start"]||e.date.day_start).call(e.date,v),x=y.getTimezoneOffset(),k=(y=e.date.add(y,c.x_step*c.x_start,c.x_unit)).getTimezoneOffset();return x!=k&&y.setTime(y.getTime()+6e4*(k-x)),y},c._smartRenderingEnabled=function(){var v=null;(this.scrollable||this.smart_rendering)&&(v=e._timeline_smart_render.getViewPort(this.scrollHelper,this._sch_height));var y=!!v;return!!(this.scrollable?this.smart_rendering!==!1&&y:this.smart_rendering&&y)},c.scrollTo=c.scrollTo||e.ext.timeline.scrollTo.bind(c),c.getScrollPosition=c.getScrollPosition||e.ext.timeline.getScrollPosition.bind(c),c.posFromDate=c.posFromDate||e.ext.timeline.posFromDate.bind(c),c.dateFromPos=c.dateFromPos||e.ext.timeline.dateFromPos.bind(c),c.sectionFromPos=c.sectionFromPos||e.ext.timeline.sectionFromPos.bind(c),c.resolvePosition=c.resolvePosition||e.ext.timeline.resolvePosition.bind(c),c.getSectionHeight=c.getSectionHeight||e.ext.timeline.getSectionHeight.bind(c),c.getSectionTop=c.getSectionTop||e.ext.timeline.getSectionTop.bind(c),c.getEventTop=c.getEventTop||e.ext.timeline.getEventTop.bind(c),c.getEventHeight=c.getEventHeight||e.ext.timeline.getEventHeight.bind(c),c.selectEvents=e.bind(function(v){var y=v.section,x=v.date,k=v.selectNested;return x?function(w,D,E,S){var N=e._timeline_smart_render.getPreparedEvents(S),A=[],M=[],T=S.order[w],C=S.y_unit[T];if(!C)return[];var O=e._get_date_index(S,D);return N.$matrix?(A=N.$matrix[T][O]||[],E&&N.$matrix.$tree&&N.$matrix.$tree[C.key]&&(M=N.$matrix.$tree[C.key][O]||[]),A.concat(M)):N[T]||[]}(y,x,k,this):y?function(w,D,E){var S=e._timeline_smart_render.getPreparedEvents(E),N=E.order[w],A=E.y_unit[N];if(!A)return[];var M=[w];D&&a(A,M);for(var T=[],C=0;C<M.length;C++)if((N=E.order[M[C]])!==void 0&&S[N])T=T.concat(S[N]);else if(S.undefined)for(var O=0;O<S.undefined.length;O++){var L=S.undefined[O];L[E.y_property]==M[C]&&T.push(L)}return T}(y,k,this):void 0},c),c.setRange=e.bind(function(v,y){var x=e.date[this.name+"_start"](new Date(v)),k=function(w,D,E){for(var S=0,N=e.date[E.name+"_start"](new Date(w)),A=E.x_step,M=E.x_unit;N<D;)S++,N=e.date.add(N,A,M);return S}(v,y,this);this.x_size=k,e.setCurrentView(x,this.name)},c),e.callEvent("onOptionsLoad",[c]),e[c.name+"_view"]=function(v){v?e._set_timeline_dates(c):e._renderMatrix.apply(c,arguments)},e["mouse_"+c.name]=function(v){var y=this._drag_event;if(this._drag_id&&(y=this.getEvent(this._drag_id)),c.scrollable&&!v.converted){if(v.converted=1,v.x+=-c.dx+c._x_scroll,e.config.rtl){var x=+e.$container.querySelector(".dhx_timeline_label_wrapper").style.height.replace("px",""),k=c._section_height[c.y_unit.length]+c._label_rows[c._label_rows.length-1].top;v.x+=e.xy.scale_width,c.scrollHelper.getMode()==c.scrollHelper.modes.minMax&&(k>x||c.render=="tree")&&(v.x+=t())}v.y+=c._y_scroll}else e.config.rtl?v.x-=c.dx-e.xy.scale_width:v.x-=c.dx;var w=e._timeline_drag_date(c,v.x);if(v.x=0,v.force_redraw=!0,v.custom=!0,this._drag_mode=="move"&&this._drag_id&&this._drag_event){y=this.getEvent(this._drag_id);var D=this._drag_event;if(v._ignores=this._ignores_detected||c._start_correction||c._end_correction,D._move_delta===void 0&&(D._move_delta=(y.start_date-w)/6e4,this.config.preserve_length&&v._ignores&&(D._move_delta=this._get_real_event_length(y.start_date,w,c),D._event_length=this._get_real_event_length(y.start_date,y.end_date,c))),this.config.preserve_length&&v._ignores){var E=this._get_fictional_event_length(w,D._move_delta,c,!0);w=new Date(w-E)}else w=e.date.add(w,D._move_delta,"minute")}if(this._drag_mode=="resize"&&y&&(this.config.timeline_swap_resize&&this._drag_id&&(this._drag_from_start&&+w>+y.end_date?this._drag_from_start=!1:!this._drag_from_start&&+w<+y.start_date&&(this._drag_from_start=!0)),v.resize_from_start=this._drag_from_start,!this.config.timeline_swap_resize&&this._drag_id&&this._drag_from_start&&+w>=+e.date.add(y.end_date,-e.config.time_step,"minute")&&(w=e.date.add(y.end_date,-e.config.time_step,"minute"))),c.round_position)switch(this._drag_mode){case"move":this.config.preserve_length||(w=e._timeline_get_rounded_date.call(c,w,!1),c.x_unit=="day"&&(v.custom=!1));break;case"resize":this._drag_event&&(this._drag_event._resize_from_start!==null&&this._drag_event._resize_from_start!==void 0||(this._drag_event._resize_from_start=v.resize_from_start),v.resize_from_start=this._drag_event._resize_from_start,w=e._timeline_get_rounded_date.call(c,w,!this._drag_event._resize_from_start))}this._resolve_timeline_section(c,v),v.section&&this._update_timeline_section({pos:v,event:this.getEvent(this._drag_id),view:c}),v.y=Math.round((this._correct_shift(w,1)-this._min_date)/(6e4*this.config.time_step)),v.shift=this.config.time_step,c.round_position&&this._drag_mode=="new-size"&&w<=this._drag_start&&(v.shift=e.date.add(this._drag_start,c.x_step,c.x_unit)-this._drag_start);var S=this._is_pos_changed(this._drag_pos,v);return this._drag_pos&&S&&(this._drag_event._dhx_changed=!0),S||this._drag_pos.has_moved||(v.force_redraw=!1),v}},e._prepare_timeline_events=function(c){var g=[];if(c.render=="cell")g=e._timeline_trace_events.call(c);else{for(var v=e.get_visible_events(),y=c.order,x=0;x<v.length;x++){var k=v[x],w=k[c.y_property],D=c.order[w];if(c.show_unassigned&&!w){for(var E in y)if(y.hasOwnProperty(E)){g[D=y[E]]||(g[D]=[]);var S=e._lame_copy({},k);S[c.y_property]=E,g[D].push(S);break}}else g[D]||(g[D]=[]),g[D].push(k)}g.$matrix=e._timeline_trace_events.call(c)}return g},e._populate_timeline_rendered=function(c){e._rendered=[];const g=c.querySelector(".dhx_timeline_data_col"),v=Array.prototype.slice.call(g.children);e._timeline_smart_render&&e._timeline_smart_render._rendered_events_cache&&(e._timeline_smart_render._rendered_events_cache=[]),v.forEach(function(y){const x=Number(y.getAttribute("data-section-index"));Array.prototype.slice.call(y.children).forEach(function(k){const w=k.getAttribute(e.config.event_attribute);if(w&&(e._rendered.push(k),e._timeline_smart_render&&e._timeline_smart_render._rendered_events_cache)){const D=e._timeline_smart_render._rendered_events_cache;D[x]||(D[x]=[]),D[x].push(w)}})})},e.render_timeline_event=function(c,g){var v=c[this.y_property];if(!v)return"";var y=c._sorder,x=e._timeline_getX(c,!1,this),k=e._timeline_getX(c,!0,this),w=e._get_timeline_event_height?e._get_timeline_event_height(c,this):this.getEventHeight(c),D=w-2;c._inner||this.event_dy!="full"||(D=(D+1)*(c._count-y)-2);var E=e._get_timeline_event_y?e._get_timeline_event_y(c._sorder,w):this.getEventTop(c),S=w+E+2;(!this._events_height[v]||this._events_height[v]<S)&&(this._events_height[v]=S);var N=e.templates.event_class(c.start_date,c.end_date,c);N="dhx_cal_event_line "+(N||""),e.getState().select_id==c.id&&(N+=" dhx_cal_event_selected"),c._no_drag_move&&(N+=" no_drag_move");var A=c.color?"--dhx-scheduler-event-background:"+c.color+";":"",M=c.textColor?"--dhx-scheduler-event-color:"+c.textColor+";":"",T=e.templates.event_bar_text(c.start_date,c.end_date,c);const C=Math.max(0,k-x);C<70&&(N+=" dhx_cal_event--small"),C<40&&(N+=" dhx_cal_event--xsmall");var O="<div "+e._waiAria.eventBarAttrString(c)+" event_id='"+c.id+"' "+e.config.event_attribute+"='"+c.id+"' class='"+N+"' style='"+A+M+"position:absolute; top:"+E+"px; height: "+D+"px; "+(e.config.rtl?"right:":"left:")+x+"px; width:"+C+"px;"+(c._text_style||"")+"'>";if(e.config.drag_resize&&!e.config.readonly){var L="dhx_event_resize",$=D+1,j="<div class='"+L+" "+L+"_start' style='height: "+$+"px;'></div>",P="<div class='"+L+" "+L+"_end' style='height: "+$+"px;'></div>";O+=(c._no_resize_start?"":j)+(c._no_resize_end?"":P)}if(O+=T+"</div>",!g)return O;var I=document.createElement("div");I.innerHTML=O;var Y=this._scales[v];Y&&(e._rendered.push(I.firstChild),Y.appendChild(I.firstChild))};var _=function(c){return String(c).replace(/'/g,"&apos;").replace(/"/g,"&quot;")};function i(c){return c.height&&!isNaN(Number(c.height))}function s(c){return e._helpers.formatDate(c)}function d(c,g){var v=c.querySelector(".dhx_timeline_data_wrapper");return g.scrollable||(v=e.$container.querySelector(".dhx_cal_data")),v}function l(){return e.$container.querySelector(".dhx_cal_data .dhx_timeline_label_col")}e._timeline_trace_events=function(){return r(e.get_visible_events(),this)},e._timeline_getX=function(c,g,v){var y=0,x=v._step,k=v.round_position,w=0,D=g?c.end_date:c.start_date;D.valueOf()>e._max_date.valueOf()&&(D=e._max_date);var E=D-e._min_date_timeline;if(E>0){var S=e._get_date_index(v,D);e._ignores[S]&&(k=!0);for(var N=0;N<S;N++)y+=e._cols[N];var A=e._timeline_get_rounded_date.apply(v,[D,!1]);k?+D>+A&&g&&(w=e._cols[S]):(E=D-A,v.first_hour||v.last_hour?((E-=v._start_correction)<0&&(E=0),(w=Math.round(E/x))>e._cols[S]&&(w=e._cols[S])):w=Math.round(E/x))}return y+=g&&(E===0||k)?w-1:w},e._timeline_get_rounded_date=function(c,g){var v=e._get_date_index(this,c),y=this._trace_x[v];return g&&+c!=+this._trace_x[v]&&(y=this._trace_x[v+1]?this._trace_x[v+1]:e.date.add(this._trace_x[v],this.x_step,this.x_unit)),new Date(y)},e._timeline_skip_ignored=function(c){if(e._ignores_detected)for(var g,v,y,x,k=0;k<c.length;k++){for(x=c[k],y=!1,g=e._get_date_index(this,x.start_date),v=e._get_date_index(this,x.end_date);g<v;){if(!e._ignores[g]){y=!0;break}g++}y||g!=v||e._ignores[v]||+x.end_date>+this._trace_x[v]&&(y=!0),y||(c.splice(k,1),k--)}},e._timeline_calculate_event_positions=function(c){if(c&&this.render!="cell"){e._timeline_skip_ignored.call(this,c),c.sort(this.sort||function($,j){return $.start_date.valueOf()==j.start_date.valueOf()?$.id>j.id?1:-1:$.start_date>j.start_date?1:-1});for(var g=[],v=c.length,y=-1,x=null,k=0;k<v;k++){var w=c[k];w._inner=!1;for(var D=this.round_position?e._timeline_get_rounded_date.apply(this,[w.start_date,!1]):w.start_date;g.length&&g[g.length-1].end_date.valueOf()<=D.valueOf();)g.splice(g.length-1,1);for(var E=!1,S=0;S<g.length;S++){var N=g[S];if(N.end_date.valueOf()<=D.valueOf()){E=!0,w._sorder=N._sorder,g.splice(S,1),w._inner=!0;break}}if(g.length&&(g[g.length-1]._inner=!0),!E)if(g.length)if(g.length<=g[g.length-1]._sorder){if(g[g.length-1]._sorder)for(var A=0;A<g.length;A++){for(var M=!1,T=0;T<g.length;T++)if(g[T]._sorder==A){M=!0;break}if(!M){w._sorder=A;break}}else w._sorder=0;w._inner=!0}else{for(var C=g[0]._sorder,O=1;O<g.length;O++)g[O]._sorder>C&&(C=g[O]._sorder);w._sorder=C+1,y<w._sorder&&(y=w._sorder,x=w),w._inner=!1}else w._sorder=0;g.push(w),g.length>(g.max_count||0)?(g.max_count=g.length,w._count=g.length):w._count=w._count?w._count:1}for(var L=0;L<c.length;L++)c[L]._count=g.max_count,e._register_copy&&e._register_copy(c[L]);(x||c[0])&&e.render_timeline_event.call(this,x||c[0],!1)}},e._timeline_get_events_html=function(c){var g="";if(c&&this.render!="cell")for(var v=0;v<c.length;v++)g+=e.render_timeline_event.call(this,c[v],!1);return g},e._timeline_update_events_html=function(c){var g="";if(c&&this.render!="cell"){var v=e.getView(),y={};c.forEach(function(k){var w,D;y[w=k.id,D=k[v.y_property],w+"_"+D]=!0});for(var x=0;x<c.length;x++)g+=e.render_timeline_event.call(this,c[x],!1)}return g},e._timeline_get_block_stats=function(c,g){var v={};return g._sch_height=c.offsetHeight,v.style_data_wrapper=(e.config.rtl?"padding-right:":"padding-left:")+g.dx+"px;",v.style_label_wrapper="width: "+g.dx+"px;",g.scrollable?(v.style_data_wrapper+="height:"+(g._sch_height-1)+"px;",g.html_scroll_width===void 0&&(g.html_scroll_width=t()),g._section_autowidth?g.custom_scroll_width=0:g.custom_scroll_width=g.html_scroll_width,v.style_label_wrapper+="height:"+(g._sch_height-1-g.custom_scroll_width)+"px;"):(v.style_data_wrapper+="height:"+(g._sch_height-1)+"px;",v.style_label_wrapper+="height:"+(g._sch_height-1)+"px;overflow:visible;"),v},e._timeline_get_cur_row_stats=function(c,g){var v=c.y_unit[g],y=c._logic(c.render,v,c);if(e._merge(y,{height:c.dy}),c.section_autoheight&&!i(v)){var x=function(D,E){var S=0,N=D.y_unit.length,A=0;return D.y_unit.forEach(function(M){i(M)&&(S+=Number(M.height),A+=Number(M.height),N--)}),{totalHeight:S+=N*E,rowsWithDefaultHeight:N,totalCustomHeight:A}}(c,y.height),k=c.scrollable?c._sch_height-e.xy.scroll_width:c._sch_height;x.totalHeight<k&&x.rowsWithDefaultHeight>0&&(y.height=Math.max(y.height,Math.floor((k-1-x.totalCustomHeight)/x.rowsWithDefaultHeight)))}if(i(v)&&(y.height=Number(v.height)),c._section_height[v.key]=y.height,!y.td_className){y.td_className="dhx_matrix_scell";var w=e.templates[c.name+"_scaley_class"](c.y_unit[g].key,c.y_unit[g].label,c.y_unit[g]);w&&(y.td_className+=" "+w),c.columns&&(y.td_className+=" dhx_matrix_scell_columns")}return y.td_content||(y.td_content=e.templates[c.name+"_scale_label"](c.y_unit[g].key,c.y_unit[g].label,c.y_unit[g])),e._merge(y,{tr_className:"",style_height:"height:"+y.height+"px;",style_width:"width:"+c.dx+"px;",summ_width:"width:"+c._summ+"px;",table_className:""}),y},e._timeline_get_fit_events_stats=function(c,g,v){if(c.fit_events){var y=c._events_height[c.y_unit[g].key]||0;c.fit_events_offset&&(y+=c.fit_events_offset),v.height=y>v.height?y:v.height,v.style_height="height:"+v.height+"px;",v.style_line_height="line-height:"+(v.height-1)+"px;",c._section_height[c.y_unit[g].key]=v.height}return v.style_height="height:"+v.height+"px;",v.style_line_height="line-height:"+(v.height-1)+"px;",c._section_height[c.y_unit[g].key]=v.height,v},e._timeline_set_scroll_pos=function(c,g){var v=c.querySelector(".dhx_timeline_data_wrapper");v.scrollTop=g._y_scroll||0,g.scrollHelper.setScrollValue(v,g._x_scroll||0),g.scrollHelper.getMode()!=g.scrollHelper.modes.maxMin&&v.scrollLeft==g._summ-v.offsetWidth+g.dx&&(v.scrollLeft+=t())},e._timeline_save_scroll_pos=function(c,g,v,y){c._y_scroll=g||0,c._x_scroll=v||0},e._timeline_get_html_for_cell_data_row=function(c,g,v,y,x){var k="";return x.template&&(k+=" "+(x.template(x.section,x.view)||"")),"<div class='dhx_timeline_data_row"+k+"' data-section-id='"+_(y)+"' data-section-index='"+c+"' style='"+g.summ_width+g.style_height+" position:absolute; top:"+v+"px;'>"},e._timeline_get_html_for_cell_ignores=function(c){return'<div class="dhx_matrix_cell dhx_timeline_data_cell" style="'+c.style_height+c.style_line_height+';display:none"></div>'},e._timeline_get_html_for_cell=function(c,g,v,y,x,k){var w=v._trace_x[c],D=v.y_unit[g],E=e._cols[c],S=s(w),N=e.templates[v.name+"_cell_value"](y,w,D);return"<div data-col-id='"+c+"' data-col-date='"+S+"' class='dhx_matrix_cell dhx_timeline_data_cell "+e.templates[v.name+"_cell_class"](y,w,D)+"' style='width:"+E+"px;"+x.style_height+x.style_line_height+(e.config.rtl?" right:":"  left:")+k+"px;'><div style='width:auto'>"+N+"</div></div>"},e._timeline_get_html_for_bar_matrix_line=function(c,g,v,y){return"<div style='"+g.summ_width+" "+g.style_height+" position:absolute; top:"+v+"px;' data-section-id='"+_(y)+"' data-section-index='"+c+"' class='dhx_matrix_line'>"},e._timeline_get_html_for_bar_data_row=function(c,g){var v=c.table_className;return g.template&&(v+=" "+(g.template(g.section,g.view)||"")),"<div class='dhx_timeline_data_row "+v+"' style='"+c.summ_width+" "+c.style_height+"' >"},e._timeline_get_html_for_bar_ignores=function(){return""},e._timeline_get_html_for_bar=function(c,g,v,y,x,k){var w=s(v._trace_x[c]),D=v.y_unit[g],E="";v.cell_template&&(E=e.templates[v.name+"_cell_value"](y,v._trace_x[c],D,k));var S="line-height:"+v._section_height[D.key]+"px;";let N="";return E&&(N="<div style='width:auto; height:100%;position:relative;"+S+"'>"+E+"</div>"),"<div class='dhx_matrix_cell dhx_timeline_data_cell "+e.templates[v.name+"_cell_class"](y,v._trace_x[c],D,k)+"' style='width:"+e._cols[c]+"px; "+(e.config.rtl?"right:":"left:")+x+"px;'  data-col-id='"+c+"' data-col-date='"+w+"' >"+N+"</div>"},e._timeline_render_scale_header=function(c,g){var v=e.$container.querySelector(".dhx_timeline_scale_header");if(v&&v.remove(),!g)return;v=document.createElement("div");var y="dhx_timeline_scale_header";c.second_scale&&(y+=" dhx_timeline_second_scale");var x=e.xy.scale_height;v.className=y,v.style.cssText=["width:"+c.dx+"px","height:"+x+"px","line-height:"+x+"px","top:0px",e.config.rtl?"right:0px":"left:0px"].join(";"),v.innerHTML=e.templates[c.name+"_scale_header"](c);const k=e.$container.querySelector(".dhx_cal_header");v.style.top=`${k.offsetTop}px`,v.style.height=`${k.offsetHeight}px`,e.$container.appendChild(v)},e._timeline_y_scale=function(c){var g=e._timeline_get_block_stats(c,this),v=this.scrollable?" dhx_timeline_scrollable_data":"",y="<div class='dhx_timeline_table_wrapper'>",x="<div class='dhx_timeline_label_wrapper' style='"+g.style_label_wrapper+"'><div class='dhx_timeline_label_col'>",k="<div class='dhx_timeline_data_wrapper"+v+"' style='"+g.style_data_wrapper+"'><div class='dhx_timeline_data_col'>";e._load_mode&&e._load(),e._timeline_smart_render.clearPreparedEventsCache(w);var w=e._timeline_smart_render.getPreparedEvents(this);e._timeline_smart_render.cachePreparedEvents(w);for(var D=0,E=0;E<e._cols.length;E++)D+=e._cols[E];var S=new Date,N=e._cols.length-e._ignores_detected;S=(e.date.add(S,this.x_step*N,this.x_unit)-S-(this._start_correction+this._end_correction)*N)/D,this._step=S,this._summ=D;var A=e._colsS.heights=[],M=[];this._render_stats=M,this._events_height={},this._section_height={},this._label_rows=[];var T=!1,C=null;(this.scrollable||this.smart_rendering)&&(C=e._timeline_smart_render.getViewPort(this.scrollHelper,this._sch_height)),e._timeline_smart_render._rendered_labels_cache=[],e._timeline_smart_render._rendered_events_cache=[];var O=!!C,L=this._smartRenderingEnabled(),$=function(F,H){for(var ge=[],q={},ne=0,K=0;K<F.y_unit.length;K++){e._timeline_calculate_event_positions.call(F,H[K]);var ie=e._timeline_get_cur_row_stats(F,K);(ie=e._timeline_get_fit_events_stats(F,K,ie)).top=ne,ge.push(ie),q[F.y_unit[K].key]=ie,ne+=ie.height}return{totalHeight:ne,rowStats:ge,rowStatsByKey:q}}(this,w);C&&$.totalHeight<C.scrollTop&&(C.scrollTop=Math.max(0,$.totalHeight-C.height)),this._rowStats=$.rowStatsByKey;for(var j=0;j<this.y_unit.length;j++){var P=$.rowStats[j],I=this.y_unit[j],Y=P.top,J="<div class='dhx_timeline_label_row "+P.tr_className+"' style='top:"+Y+"px;"+P.style_height+P.style_line_height+"'data-row-index='"+j+"' data-row-id='"+_(I.key)+"'><div class='"+P.td_className+"' style='"+P.style_width+" height:"+P.height+"px;' "+e._waiAria.label(P.td_content)+">"+P.td_content+"</div></div>";if(L&&this._label_rows.push({div:J,top:Y,section:I}),L&&(e._timeline_smart_render.isInYViewPort({top:Y,bottom:Y+P.height},C)||(T=!0)),T)T=!1;else{x+=J,L&&e._timeline_smart_render._rendered_labels_cache.push(j);var Q={view:this,section:I,template:e.templates[this.name+"_row_class"]},R=0;if(this.render=="cell"){k+=e._timeline_get_html_for_cell_data_row(j,P,P.top,I.key,Q);for(var V=0;V<e._cols.length;V++)e._ignores[V]&&!L?k+=e._timeline_get_html_for_cell_ignores(P):L&&O?e._timeline_smart_render.isInXViewPort({left:R,right:R+e._cols[V]},C)&&(k+=e._timeline_get_html_for_cell(V,j,this,w[j][V],P,R)):k+=e._timeline_get_html_for_cell(V,j,this,w[j][V],P,R),R+=e._cols[V];k+="</div>"}else{k+=e._timeline_get_html_for_bar_matrix_line(j,P,P.top,I.key);var W=w[j];for(L&&O&&(W=e._timeline_smart_render.getVisibleEventsForRow(this,C,w,j)),k+=e._timeline_get_events_html.call(this,W),k+=e._timeline_get_html_for_bar_data_row(P,Q),V=0;V<e._cols.length;V++)e._ignores[V]?k+=e._timeline_get_html_for_bar_ignores():L&&O?e._timeline_smart_render.isInXViewPort({left:R,right:R+e._cols[V]},C)&&(k+=e._timeline_get_html_for_bar(V,j,this,w[j],R)):k+=e._timeline_get_html_for_bar(V,j,this,w[j],R),R+=e._cols[V];k+="</div></div>"}}P.sectionKey=I.key,M.push(P)}y+=x+"</div></div>",y+=k+"</div></div>",y+="</div>",this._matrix=w,c.innerHTML=y,L&&e._timeline_smart_render&&(e._timeline_smart_render._rendered_events_cache=[]),e._populate_timeline_rendered(c);const ue=c.querySelectorAll("[data-section-id]"),fe={};ue.forEach(function(F){fe[F.getAttribute("data-section-id")]=F}),this._divBySectionId=fe,L&&(e.$container.querySelector(".dhx_timeline_data_col").style.height=$.totalHeight+"px"),this._scales={},E=0;for(var pe=M.length;E<pe;E++){A.push(M[E].height);var re=M[E].sectionKey;e._timeline_finalize_section_add(this,re,this._divBySectionId[re])}(L||this.scrollable)&&function(F,H,ge){H._is_ev_creating=!1;var q=d(F,H),ne=e._els.dhx_cal_header[0],K=F.querySelector(".dhx_timeline_label_wrapper");if(K&&!K.$eventsAttached){K.$eventsAttached=!0;var ie={pageX:0,pageY:0};K.addEventListener("touchstart",function(G){var ae=G;G.touches&&(ae=G.touches[0]),ie={pageX:ae.pageX,pageY:ae.pageY}},{passive:!1}),K.addEventListener("touchmove",function(G){var ae=G;G.touches&&(ae=G.touches[0]);var ve=ie.pageY-ae.pageY;ie={pageX:ae.pageX,pageY:ae.pageY},ve&&(q.scrollTop+=ve),G&&G.preventDefault&&G.preventDefault()},{passive:!1})}if(!q.$eventsAttached){let ve=function(B){let X=!0;var Z=e.env.isFF,U=Z?B.deltaX:B.wheelDeltaX,ee=Z?B.deltaY:B.wheelDelta,te=-20;Z&&(te=B.deltaMode!==0?-40:-10);var _e=1,le=1,me=Z?U*te*_e:2*U*_e,oe=Z?ee*te*le:ee*le;if(me&&Math.abs(me)>Math.abs(oe)){var ce=me/-40;q.scrollLeft+=30*ce,q.scrollLeft===G&&(X=!1)}else ce=oe/-40,oe===void 0&&(ce=B.detail),q.scrollTop+=30*ce,q.scrollTop===ae&&(X=!1);if(X)return B.preventDefault(),B.cancelBubble=!0,!1},G,ae;q.$eventsAttached=!0,q.addEventListener("mousewheel",ve,{passive:!1}),K.addEventListener("mousewheel",ve,{passive:!1}),q.addEventListener("scroll",function(B){var X=d(F,H);B.preventDefault();var Z=X.scrollTop,U=H.scrollHelper.getScrollValue(X);G=U,ae=Z;var ee=H._summ-e.$container.querySelector(".dhx_cal_data").offsetWidth+H.dx+H.custom_scroll_width,te=e._timeline_smart_render.getViewPort(H.scrollHelper,0,U,Z),_e=l();if(H.scrollable&&(_e.style.top=-Z+"px"),H.smart_rendering!==!1){if((U!==H._x_scroll||H._is_ev_creating)&&(H.second_scale?e._timeline_smart_render.updateHeader(H,te,ne.children[1]):e._timeline_smart_render.updateHeader(H,te,ne.children[0])),e.config.rtl){var le=+e.$container.querySelector(".dhx_timeline_label_wrapper").style.height.replace("px",""),me=H._section_height[H.y_unit.length]+H._label_rows[H._label_rows.length-1].top;H.scrollHelper.getMode()==H.scrollHelper.modes.minMax&&(me>le||H.render=="tree")?ne.style.right=-1-U-t()+"px":ne.style.right=-1-U+"px",ne.style.left="unset"}else ne.style.left=-1-U+"px";if((H._options_changed||Z!==H._y_scroll||H._is_ev_creating)&&e._timeline_smart_render.updateLabels(H,te,_e),H._is_ev_creating=!1,e._timeline_smart_render.updateGridCols(H,te),e._timeline_smart_render.updateGridRows(H,te),H.render!="cell"){if(cancelAnimationFrame(void 0),H.name!==e.getState().mode)return;e._timeline_smart_render.updateEvents(H,te)}var oe,ce=0;H._scales={},oe=H.render==="cell"?X.querySelectorAll(".dhx_timeline_data_col .dhx_timeline_data_row"):X.querySelectorAll(".dhx_timeline_data_col .dhx_matrix_line");for(var Se=H._render_stats,se=0,xe=oe.length;se<xe;se++){var we=oe[se].getAttribute("data-section-id"),ke=H.order[we];ge[ke]=Se[ke].height,H._scales[we]=oe[se]}for(se=0,xe=ge.length;se<xe;se++)ce+=ge[se];e.$container.querySelector(".dhx_timeline_data_col").style.height=ce+"px";var De=Z,Ee=U;e._timeline_save_scroll_pos(H,De,Ee,ee),H.callEvent("onScroll",[Ee,De]),H._is_new_view=!1}},{passive:!1});var ye={pageX:0,pageY:0};q.addEventListener("touchstart",function(B){var X=B;B.touches&&(X=B.touches[0]),ye={pageX:X.pageX,pageY:X.pageY}},{passive:!1}),q.addEventListener("touchmove",function(B){var X=B;B.touches&&(X=B.touches[0]);var Z=l(),U=ye.pageX-X.pageX,ee=ye.pageY-X.pageY;if(ye={pageX:X.pageX,pageY:X.pageY},(U||ee)&&!e.getState().drag_id){var te=Math.abs(U),_e=Math.abs(ee),le=Math.sqrt(U*U+ee*ee);te/le<.42?U=0:_e/le<.42&&(ee=0),H.scrollHelper.setScrollValue(q,H.scrollHelper.getScrollValue(q)+U),q.scrollTop+=ee,H.scrollable&&ee&&(Z.style.top=-q.scrollTop+"px")}return B&&B.preventDefault&&B.preventDefault(),!1},{passive:!1})}H.scroll_position&&H._is_new_view?H.scrollTo(H.scroll_position):e._timeline_set_scroll_pos(F,H),H._is_ev_creating=!0}(c,this,A)},e._timeline_finalize_section_add=function(c,g,v){v&&(c._scales[g]=v,e.callEvent("onScaleAdd",[v,g]))},e.attachEvent("onBeforeViewChange",function(c,g,v,y){if(e.matrix[v]){var x=e.matrix[v];if(x.scrollable){if(x.render=="tree"&&c===v&&g===y)return!0;x._x_scroll=x._y_scroll=0,e.$container.querySelector(".dhx_timeline_scrollable_data")&&e._timeline_set_scroll_pos(e._els.dhx_cal_data[0],x)}}return!0}),e._timeline_x_dates=function(c){var g=e._min_date,v=e._max_date;e._process_ignores(g,this.x_size,this.x_unit,this.x_step,c),e.date[this.x_unit+"_start"]&&(g=e.date[this.x_unit+"_start"](g));for(var y=0,x=0;+g<+v;)if(this._trace_x[x]=new Date(g),this.x_unit=="month"&&e.date[this.x_unit+"_start"]&&(g=e.date[this.x_unit+"_start"](new Date(g))),g=e.date.add(g,this.x_step,this.x_unit),e.date[this.x_unit+"_start"]&&(g=e.date[this.x_unit+"_start"](g)),e._ignores[x]||y++,x++,c){if(y<this.x_size&&!(+g<+v))v=e.date["add_"+this.name+"_private"](v,(this.x_length||this.x_size)*this.x_step);else if(y>=this.x_size){e._max_date=g;break}}return{total:x,displayed:y}},e._timeline_x_scale=function(c){var g=e._x-this.dx-e.xy.scroll_width,v=e._min_date,y=e.xy.scale_height,x=this._header_resized||e.xy.scale_height;e._cols=[],e._colsS={height:0},this._trace_x=[];var k=e.config.preserve_scale_length,w=e._timeline_x_dates.call(this,k);if(this.scrollable&&this.column_width>0){var D=this.column_width*w.displayed;D>g&&(g=D,this._section_autowidth=!1)}var E=[this.dx];e._els.dhx_cal_header[0].style.width=E[0]+g+1+"px",v=e._min_date_timeline=e._min_date;for(var S=w.displayed,N=w.total,A=0;A<N;A++)e._ignores[A]?(e._cols[A]=0,S++):e._cols[A]=Math.floor(g/(S-A)),g-=e._cols[A],E[A+1]=E[A]+e._cols[A];if(c.innerHTML="<div></div>",this.second_scale){for(var M=this.second_scale.x_unit,T=[this._trace_x[0]],C=[],O=[this.dx,this.dx],L=0,$=0;$<this._trace_x.length;$++){var j=this._trace_x[$];e._timeline_is_new_interval(M,j,T[L])&&(T[++L]=j,O[L+1]=O[L]);var P=L+1;C[L]=e._cols[$]+(C[L]||0),O[P]+=e._cols[$]}c.innerHTML="<div></div><div></div>";var I=c.firstChild;I.style.height=x+"px";var Y=c.lastChild;Y.style.position="relative",Y.className="dhx_bottom_scale_container";for(var J=0;J<T.length;J++){var Q=T[J],R=e.templates[this.name+"_second_scalex_class"](Q),V=document.createElement("div");V.className="dhx_scale_bar dhx_second_scale_bar"+(R?" "+R:""),e.set_xy(V,C[J],x,O[J],0),V.innerHTML=e.templates[this.name+"_second_scale_date"](Q),I.appendChild(V)}}e.xy.scale_height=x,c=c.lastChild,this._h_cols={};for(var W=0;W<this._trace_x.length;W++)if(!e._ignores[W]){v=this._trace_x[W],e._render_x_header(W,E[W],v,c);var ue=e.templates[this.name+"_scalex_class"](v);ue&&(c.lastChild.className+=" "+ue),c.lastChild.setAttribute("data-col-id",W),c.lastChild.setAttribute("data-col-date",s(v));var fe=c.lastChild.cloneNode(!0);this._h_cols[W]={div:fe,left:E[W]}}e.xy.scale_height=y;var pe=this._trace_x;c.$_clickEventsAttached||(c.$_clickEventsAttached=!0,c.addEventListener("click",function(re){var F=e._timeline_locate_hcell(re);F&&e.callEvent("onXScaleClick",[F.x,pe[F.x],re])}),c.addEventListener("dblclick",function(re){var F=e._timeline_locate_hcell(re);F&&e.callEvent("onXScaleDblClick",[F.x,pe[F.x],re])}))},e._timeline_is_new_interval=function(c,g,v){switch(c){case"hour":return g.getHours()!=v.getHours()||e._timeline_is_new_interval("day",g,v);case"day":return!(g.getDate()==v.getDate()&&g.getMonth()==v.getMonth()&&g.getFullYear()==v.getFullYear());case"week":return e.date.week_start(new Date(g)).valueOf()!=e.date.week_start(new Date(v)).valueOf();case"month":return!(g.getMonth()==v.getMonth()&&g.getFullYear()==v.getFullYear());case"year":return g.getFullYear()!=v.getFullYear();default:return!1}},e._timeline_reset_scale_height=function(c){if(this._header_resized&&(!c||this.second_scale)){e.xy.scale_height/=2,this._header_resized=!1;var g=e._els.dhx_cal_header[0];g.className=g.className.replace(/ dhx_second_cal_header/gi,"")}},e._timeline_set_full_view=function(c){if(e._timeline_reset_scale_height.call(this,c),c){this.second_scale&&!this._header_resized&&(this._header_resized=e.xy.scale_height,e.xy.scale_height*=2,e._els.dhx_cal_header[0].className+=" dhx_second_cal_header"),e.set_sizes(),e._init_matrix_tooltip();var g=e._min_date;if(e._timeline_x_scale.call(this,e._els.dhx_cal_header[0]),e.$container.querySelector(".dhx_timeline_scrollable_data")){var v=e._timeline_smart_render.getViewPort(this.scrollHelper),y=e._timeline_smart_render.getVisibleHeader(this,v);y&&(this.second_scale?e._els.dhx_cal_header[0].children[1].innerHTML=y:e._els.dhx_cal_header[0].children[0].innerHTML=y)}e._timeline_y_scale.call(this,e._els.dhx_cal_data[0]),e._min_date=g;var x=e._getNavDateElement();x&&(x.innerHTML=e.templates[this.name+"_date"](e._min_date,e._max_date)),e._mark_now&&e._mark_now(),e._timeline_reset_scale_height.call(this,c)}e._timeline_render_scale_header(this,c),e._timeline_hideToolTip()},e._timeline_hideToolTip=function(){e._tooltip&&(e._tooltip.style.display="none",e._tooltip.date="")},e._timeline_showToolTip=function(c,g,v){if(c.render=="cell"){var y=g.x+"_"+g.y,x=c._matrix[g.y][g.x];if(!x)return e._timeline_hideToolTip();if(x.sort(function(N,A){return N.start_date>A.start_date?1:-1}),e._tooltip){if(e._tooltip.date==y)return;e._tooltip.innerHTML=""}else{var k=e._tooltip=document.createElement("div");k.className="dhx_year_tooltip",e.config.rtl&&(k.className+=" dhx_tooltip_rtl"),document.body.appendChild(k),k.addEventListener("click",e._click.dhx_cal_data)}for(var w="",D=0;D<x.length;D++){var E=x[D].color?"--dhx-scheduler-event-color:"+x[D].color+";":"",S=x[D].textColor?"--dhx-scheduler-event-background:"+x[D].textColor+";":"";w+="<div class='dhx_tooltip_line' event_id='"+x[D].id+"' "+e.config.event_attribute+"='"+x[D].id+"' style='"+E+S+"'>",w+="<div class='dhx_tooltip_date'>"+(x[D]._timed?e.templates.event_date(x[D].start_date):"")+"</div>",w+="<div class='dhx_event_icon icon_details'>&nbsp;</div>",w+=e.templates[c.name+"_tooltip"](x[D].start_date,x[D].end_date,x[D])+"</div>"}e._tooltip.style.display="",e._tooltip.style.top="0px",e.config.rtl&&v.left-e._tooltip.offsetWidth>=0||document.body.offsetWidth-g.src.offsetWidth-v.left-e._tooltip.offsetWidth<0?e._tooltip.style.left=v.left-e._tooltip.offsetWidth+"px":e._tooltip.style.left=v.left+g.src.offsetWidth+"px",e._tooltip.date=y,e._tooltip.innerHTML=w,document.body.offsetHeight-v.top-e._tooltip.offsetHeight<0?e._tooltip.style.top=v.top-e._tooltip.offsetHeight+g.src.offsetHeight+"px":e._tooltip.style.top=v.top+"px"}},e._matrix_tooltip_handler=function(c){var g=e.matrix[e._mode];if(g&&g.render=="cell"){if(g){var v=e._locate_cell_timeline(c);if(v)return e._timeline_showToolTip(g,v,e.$domHelpers.getOffset(v.src))}e._timeline_hideToolTip()}},e._init_matrix_tooltip=function(){e._detachDomEvent(e._els.dhx_cal_data[0],"mouseover",e._matrix_tooltip_handler),e.event(e._els.dhx_cal_data[0],"mouseover",e._matrix_tooltip_handler)},e._set_timeline_dates=function(c){e._min_date=e.date[c.name+"_start"](new Date(e._date)),e._max_date=e.date["add_"+c.name+"_private"](e._min_date,c.x_size*c.x_step),e.date[c.x_unit+"_start"]&&(e._max_date=e.date[c.x_unit+"_start"](e._max_date)),e._table_view=!0},e._renderMatrix=function(c,g){this.callEvent("onBeforeRender",[]),g||(e._els.dhx_cal_data[0].scrollTop=0),e._set_timeline_dates(this),e._timeline_set_full_view.call(this,c)},e._timeline_html_index=function(c){for(var g=c.parentNode.childNodes,v=-1,y=0;y<g.length;y++)if(g[y]==c){v=y;break}var x=v;if(e._ignores_detected)for(var k in e._ignores)e._ignores[k]&&1*k<=x&&x++;return x},e._timeline_locate_hcell=function(c){for(var g=c.target?c.target:c.srcElement;g&&g.tagName!="DIV";)g=g.parentNode;if(g&&g.tagName=="DIV"&&e._getClassName(g).split(" ")[0]=="dhx_scale_bar")return{x:e._timeline_html_index(g),y:-1,src:g,scale:!0}},e._locate_cell_timeline=function(c){for(var g=c.target?c.target:c.srcElement,v={},y=e.matrix[e._mode],x=e.getActionData(c),k=e._ignores,w=0,D=0;D<y._trace_x.length-1&&!(+x.date<y._trace_x[D+1]);D++)k[D]||w++;v.x=w===0?0:D,v.y=y.order[x.section];var E=0;if(y.scrollable&&y.render==="cell"){if(!y._scales[x.section]||!y._scales[x.section].querySelector(".dhx_matrix_cell"))return;var S=y._scales[x.section].querySelector(".dhx_matrix_cell");if(!S)return;var N=S.offsetLeft;if(N>0){for(var A=e._timeline_drag_date(y,N),M=0;M<y._trace_x.length-1&&!(+A<y._trace_x[M+1]);M++);E=M}}v.src=y._scales[x.section]?y._scales[x.section].querySelectorAll(".dhx_matrix_cell")[D-E]:null;var T,C,O=!1,L=(T=g,C=".dhx_matrix_scell",e.$domHelpers.closest(T,C));return L&&(g=L,O=!0),O?(v.x=-1,v.src=g,v.scale=!0):v.x=D,v};var h=e._click.dhx_cal_data;e._click.dhx_marked_timespan=e._click.dhx_cal_data=function(c){var g=h.apply(this,arguments),v=e.matrix[e._mode];if(v){var y=e._locate_cell_timeline(c);y&&(y.scale?e.callEvent("onYScaleClick",[y.y,v.y_unit[y.y],c]):(e.callEvent("onCellClick",[y.x,y.y,v._trace_x[y.x],(v._matrix[y.y]||{})[y.x]||[],c]),e._timeline_set_scroll_pos(e._els.dhx_cal_data[0],v)))}return g},e.dblclick_dhx_matrix_cell=function(c){var g=e.matrix[e._mode];if(g){var v=e._locate_cell_timeline(c);v&&(v.scale?e.callEvent("onYScaleDblClick",[v.y,g.y_unit[v.y],c]):e.callEvent("onCellDblClick",[v.x,v.y,g._trace_x[v.x],(g._matrix[v.y]||{})[v.x]||[],c]))}};var f=e.dblclick_dhx_marked_timespan||function(){};e.dblclick_dhx_marked_timespan=function(c){return e.matrix[e._mode]?e.dblclick_dhx_matrix_cell(c):f.apply(this,arguments)},e.dblclick_dhx_matrix_scell=function(c){return e.dblclick_dhx_matrix_cell(c)},e._isRender=function(c){return e.matrix[e._mode]&&e.matrix[e._mode].render==c},e.attachEvent("onCellDblClick",function(c,g,v,y,x){if(!this.config.readonly&&(x.type!="dblclick"||this.config.dblclick_create)){var k=e.matrix[e._mode],w={};w.start_date=k._trace_x[c],w.end_date=k._trace_x[c+1]?k._trace_x[c+1]:e.date.add(k._trace_x[c],k.x_step,k.x_unit),k._start_correction&&(w.start_date=new Date(1*w.start_date+k._start_correction)),k._end_correction&&(w.end_date=new Date(w.end_date-k._end_correction)),w[k.y_property]=k.y_unit[g].key,e.addEventNow(w,null,x)}}),e.attachEvent("onBeforeDrag",function(c,g,v){return!e._isRender("cell")}),e.attachEvent("onEventChanged",function(c,g){g._timed=this.isOneDayEvent(g)}),e.attachEvent("onBeforeEventChanged",function(c,g,v,y){return c&&(c._move_delta=void 0),y&&(y._move_delta=void 0),!0}),e._is_column_visible=function(c){var g=e.matrix[e._mode],v=e._get_date_index(g,c);return!e._ignores[v]};var m=e._render_marked_timespan;e._render_marked_timespan=function(c,g,v,y,x){if(!e.config.display_marked_timespans)return[];if(e.matrix&&e.matrix[e._mode]){if(e._isRender("cell"))return;var k=e._lame_copy({},e.matrix[e._mode]);k.round_position=!1;var w=[],D=[],E=[],S=c.sections?c.sections.units||c.sections.timeline:null;if(v)E=[g],D=[v];else{var N=k.order;if(S)N.hasOwnProperty(S)&&(D.push(S),E.push(k._scales[S]));else if(k._scales)for(var A in N)N.hasOwnProperty(A)&&k._scales[A]&&(D.push(A),E.push(k._scales[A]))}if(y=y?new Date(y):e._min_date,x=x?new Date(x):e._max_date,y.valueOf()<e._min_date.valueOf()&&(y=new Date(e._min_date)),x.valueOf()>e._max_date.valueOf()&&(x=new Date(e._max_date)),!k._trace_x)return;for(var M=0;M<k._trace_x.length&&!e._is_column_visible(k._trace_x[M]);M++);if(M==k._trace_x.length)return;var T=[];if(c.days>6){var C=new Date(c.days);e.date.date_part(new Date(y))<=+C&&+x>=+C&&T.push(C)}else T.push.apply(T,e._get_dates_by_index(c.days));for(var O=c.zones,L=e._get_css_classes_by_config(c),$=0;$<D.length;$++)for(g=E[$],v=D[$],M=0;M<T.length;M++)for(var j=T[M],P=0;P<O.length;P+=2){var I=O[P],Y=O[P+1],J=new Date(+j+60*I*1e3),Q=new Date(+j+60*Y*1e3);if(J=new Date(J.valueOf()+1e3*(J.getTimezoneOffset()-j.getTimezoneOffset())*60),y<(Q=new Date(Q.valueOf()+1e3*(Q.getTimezoneOffset()-j.getTimezoneOffset())*60))&&x>J){var R=e._get_block_by_config(c);R.className=L;var V=e._timeline_getX({start_date:J},!1,k)-1,W=e._timeline_getX({start_date:Q},!1,k)-1,ue=Math.max(1,W-V-1),fe=k._section_height[v]-1||k.dy-1;R.style.cssText="height: "+fe+"px; "+(e.config.rtl?"right: ":"left: ")+V+"px; width: "+ue+"px; top: 0;",g.insertBefore(R,g.firstChild),w.push(R)}}return w}return m.apply(e,[c,g,v])};var u=e._append_mark_now;e._append_mark_now=function(c,g){if(e.matrix&&e.matrix[e._mode]){var v=e._currentDate(),y=e._get_zone_minutes(v),x={days:+e.date.date_part(v),zones:[y,y+1],css:"dhx_matrix_now_time",type:"dhx_now_time"};return e._render_marked_timespan(x)}return u.apply(e,[c,g])};var p=e._mark_timespans;e._mark_timespans=function(){if(e.matrix&&e.matrix[e.getState().mode]){for(var c=[],g=e.matrix[e.getState().mode],v=g.y_unit,y=0;y<v.length;y++){var x=v[y].key,k=g._scales[x],w=e._on_scale_add_marker(k,x);c.push.apply(c,w)}return c}return p.apply(this,arguments)};var b=e._on_scale_add_marker;e._on_scale_add_marker=function(c,g){if(e.matrix&&e.matrix[e._mode]){var v=[],y=e._marked_timespans;if(y&&e.matrix&&e.matrix[e._mode])for(var x=e._mode,k=e._min_date,w=e._max_date,D=y.global,E=e.date.date_part(new Date(k));E<w;E=e.date.add(E,1,"day")){var S=+E,N=E.getDay(),A=[];if(e.config.overwrite_marked_timespans){var M=D[S]||D[N];A.push.apply(A,e._get_configs_to_render(M))}else D[S]&&A.push.apply(A,e._get_configs_to_render(D[S])),D[N]&&A.push.apply(A,e._get_configs_to_render(D[N]));if(y[x]&&y[x][g]){var T=[],C=e._get_types_to_render(y[x][g][N],y[x][g][S]);T.push.apply(T,e._get_configs_to_render(C)),e.config.overwrite_marked_timespans?T.length&&(A=T):A=A.concat(T)}for(var O=0;O<A.length;O++){var L=A[O],$=L.days;$<7?($=S,v.push.apply(v,e._render_marked_timespan(L,c,g,E,e.date.add(E,1,"day"))),$=N):v.push.apply(v,e._render_marked_timespan(L,c,g,E,e.date.add(E,1,"day")))}}return v}return b.apply(this,arguments)},e._resolve_timeline_section=function(c,g){for(var v=0,y=0;v<this._colsS.heights.length&&!((y+=this._colsS.heights[v])>g.y);v++);c.y_unit[v]||(v=c.y_unit.length-1),this._drag_event&&!this._drag_event._orig_section&&(this._drag_event._orig_section=c.y_unit[v].key),g.fields={},v>=0&&c.y_unit[v]&&(g.section=g.fields[c.y_property]=c.y_unit[v].key)},e._update_timeline_section=function(c){var g=c.view,v=c.event,y=c.pos;if(v){if(v[g.y_property]!=y.section){var x=this._get_timeline_event_height?this._get_timeline_event_height(v,g):g.getEventHeight(v);v._sorder=this._get_dnd_order(v._sorder,x,g.getSectionHeight(y.section))}v[g.y_property]=y.section}},e._get_date_index=function(c,g){for(var v=c._trace_x,y=0,x=v.length-1,k=g.valueOf();x-y>3;){var w=y+Math.floor((x-y)/2);v[w].valueOf()>k?x=w:y=w}for(var D=y;D<=x&&+g>=+v[D+1];)D++;return D},e._timeline_drag_date=function(c,g){var v=c,y=g;if(!v._trace_x.length)return new Date(e.getState().date);for(var x,k,w,D=0,E=0;E<=this._cols.length-1;E++)if((D+=k=this._cols[E])>y){x=(x=(y-(D-k))/k)<0?0:x;break}if(v.round_position){var S=1,N=e.getState().drag_mode;N&&N!="move"&&N!="create"&&(S=.5),x>=S&&E++,x=0}if(E===0&&this._ignores[0])for(E=1,x=0;this._ignores[E];)E++;else if(E==this._cols.length&&this._ignores[E-1]){for(E=this._cols.length-1,x=0;this._ignores[E];)E--;E++}if(E>=v._trace_x.length)w=e.date.add(v._trace_x[v._trace_x.length-1],v.x_step,v.x_unit),v._end_correction&&(w=new Date(w-v._end_correction));else{var A=x*k*v._step+v._start_correction;w=new Date(+v._trace_x[E]+A)}return w},e.attachEvent("onBeforeTodayDisplayed",function(){for(var c in e.matrix){var g=e.matrix[c];g.x_start=g._original_x_start}return!0}),e.attachEvent("onOptionsLoad",function(){for(var c in e.matrix){var g=e.matrix[c];for(g.order={},e.callEvent("onOptionsLoadStart",[]),c=0;c<g.y_unit.length;c++)g.order[g.y_unit[c].key]=c;e.callEvent("onOptionsLoadFinal",[]),e._date&&g.name==e._mode&&(g._options_changed=!0,e.setCurrentView(e._date,e._mode),setTimeout(function(){g._options_changed=!1}))}}),e.attachEvent("onEventIdChange",function(){var c=e.getView();c&&e.matrix[c.name]&&e._timeline_smart_render&&(e._timeline_smart_render.clearPreparedEventsCache(),e._timeline_smart_render.getPreparedEvents(c))}),e.attachEvent("onBeforeDrag",function(c,g,v){if(g=="resize"){var y=v.target||v.srcElement;e._getClassName(y).indexOf("dhx_event_resize_end")<0?e._drag_from_start=!0:e._drag_from_start=!1}return!0}),autoscroll(e),smartRender(e)},e._temp_matrix_scope()}class Tooltip{constructor(t){this._scheduler=t}getNode(){const t=this._scheduler;return this._tooltipNode||(this._tooltipNode=document.createElement("div"),this._tooltipNode.className="dhtmlXTooltip scheduler_tooltip tooltip",t._waiAria.tooltipAttr(this._tooltipNode)),t.config.rtl?this._tooltipNode.classList.add("dhtmlXTooltip_rtl"):this._tooltipNode.classList.remove("dhtmlXTooltip_rtl"),this._tooltipNode}setViewport(t){return this._root=t,this}show(t,a){const n=this._scheduler,o=n.$domHelpers,r=document.body,_=this.getNode();if(o.isChildOf(_,r)||(this.hide(),r.appendChild(_)),this._isLikeMouseEvent(t)){const i=this._calculateTooltipPosition(t);a=i.top,t=i.left}return _.style.top=a+"px",_.style.left=t+"px",n._waiAria.tooltipVisibleAttr(_),this}hide(){const t=this._scheduler,a=this.getNode();return a&&a.parentNode&&a.parentNode.removeChild(a),t._waiAria.tooltipHiddenAttr(a),this}setContent(t){return this.getNode().innerHTML=t,this}_isLikeMouseEvent(t){return!(!t||typeof t!="object")&&"clientX"in t&&"clientY"in t}_getViewPort(){return this._root||document.body}_calculateTooltipPosition(t){const a=this._scheduler,n=a.$domHelpers,o=this._getViewPortSize(),r=this.getNode(),_={top:0,left:0,width:r.offsetWidth,height:r.offsetHeight,bottom:0,right:0},i=a.config.tooltip_offset_x,s=a.config.tooltip_offset_y,d=document.body,l=n.getRelativeEventPosition(t,d),h=n.getNodePosition(d);l.y+=h.y,_.top=l.y,_.left=l.x,_.top+=s,_.left+=i,_.bottom=_.top+_.height,_.right=_.left+_.width;const f=window.scrollY+d.scrollTop;return _.top<o.top-f?(_.top=o.top,_.bottom=_.top+_.height):_.bottom>o.bottom&&(_.bottom=o.bottom,_.top=_.bottom-_.height),_.left<o.left?(_.left=o.left,_.right=o.left+_.width):_.right>o.right&&(_.right=o.right,_.left=_.right-_.width),l.x>=_.left&&l.x<=_.right&&(_.left=l.x-_.width-i,_.right=_.left+_.width),l.y>=_.top&&l.y<=_.bottom&&(_.top=l.y-_.height-s,_.bottom=_.top+_.height),_}_getViewPortSize(){const t=this._scheduler,a=t.$domHelpers,n=this._getViewPort();let o,r=n,_=window.scrollY+document.body.scrollTop,i=window.scrollX+document.body.scrollLeft;return n===t.$event_data?(r=t.$event,_=0,i=0,o=a.getNodePosition(t.$event)):o=a.getNodePosition(r),{left:o.x+i,top:o.y+_,width:o.width,height:o.height,bottom:o.y+o.height+_,right:o.x+o.width+i}}}class TooltipManager{constructor(t){this._listeners={},this.tooltip=new Tooltip(t),this._scheduler=t,this._domEvents=t._createDomEventScope(),this._initDelayedFunctions()}destructor(){this.tooltip.hide(),this._domEvents.detachAll()}hideTooltip(){this.delayHide()}attach(t){let a=document.body;const n=this._scheduler,o=n.$domHelpers;t.global||(a=n.$root);let r=null;const _=i=>{const s=o.getTargetNode(i),d=o.closest(s,t.selector);if(o.isChildOf(s,this.tooltip.getNode()))return;const l=()=>{r=d,t.onmouseenter(i,d)};r?d&&d===r?t.onmousemove(i,d):(t.onmouseleave(i,r),r=null,d&&d!==r&&l()):d&&l()};this.detach(t.selector),this._domEvents.attach(a,"mousemove",_),this._listeners[t.selector]={node:a,handler:_}}detach(t){const a=this._listeners[t];a&&this._domEvents.detach(a.node,"mousemove",a.handler)}tooltipFor(t){const a=n=>{let o=n;return document.createEventObject&&!document.createEvent&&(o=document.createEventObject(n)),o};this._initDelayedFunctions(),this.attach({selector:t.selector,global:t.global,onmouseenter:(n,o)=>{const r=t.html(n,o);r&&this.delayShow(a(n),r)},onmousemove:(n,o)=>{const r=t.html(n,o);r?this.delayShow(a(n),r):(this.delayShow.$cancelTimeout(),this.delayHide())},onmouseleave:()=>{this.delayShow.$cancelTimeout(),this.delayHide()}})}_initDelayedFunctions(){const t=this._scheduler;this.delayShow&&this.delayShow.$cancelTimeout(),this.delayHide&&this.delayHide.$cancelTimeout(),this.tooltip.hide(),this.delayShow=utils.delay((a,n)=>{t.callEvent("onBeforeTooltip",[a])===!1?this.tooltip.hide():(this.tooltip.setContent(n),this.tooltip.show(a))},t.config.tooltip_timeout||1),this.delayHide=utils.delay(()=>{this.delayShow.$cancelTimeout(),this.tooltip.hide()},t.config.tooltip_hide_timeout||1)}}function tooltip(e){e.config.tooltip_timeout=30,e.config.tooltip_offset_y=20,e.config.tooltip_offset_x=10,e.config.tooltip_hide_timeout=30;const t=new TooltipManager(e);e.ext.tooltips=t,e.attachEvent("onSchedulerReady",function(){t.tooltipFor({selector:"["+e.config.event_attribute+"]",html:a=>{if(e._mobile&&!e.config.touch_tooltip)return;const n=e._locate_event(a.target);if(e.getEvent(n)){const o=e.getEvent(n);return e.templates.tooltip_text(o.start_date,o.end_date,o)}return null},global:!1})}),e.attachEvent("onDestroy",function(){t.destructor()}),e.attachEvent("onLightbox",function(){t.hideTooltip()}),e.attachEvent("onBeforeDrag",function(){return t.hideTooltip(),!0}),e.attachEvent("onEventDeleted",function(){return t.hideTooltip(),!0})}function treetimeline(e){var t;e.attachEvent("onTimelineCreated",function(a){a.render=="tree"&&(a.y_unit_original=a.y_unit,a.y_unit=e._getArrayToDisplay(a.y_unit_original),e.attachEvent("onOptionsLoadStart",function(){a.y_unit=e._getArrayToDisplay(a.y_unit_original)}),e.form_blocks[a.name]={render:function(n){return"<div class='dhx_section_timeline' style='overflow: hidden;'></div>"},set_value:function(n,o,r,_){var i=e._getArrayForSelect(e.matrix[_.type].y_unit_original,_.type);n.innerHTML="";var s=document.createElement("select");n.appendChild(s);var d=n.getElementsByTagName("select")[0];!d._dhx_onchange&&_.onchange&&(d.addEventListener("change",_.onchange),d._dhx_onchange=!0);for(var l=0;l<i.length;l++){var h=document.createElement("option");h.value=i[l].key,h.value==r[e.matrix[_.type].y_property]&&(h.selected=!0),h.innerHTML=i[l].label,d.appendChild(h)}},get_value:function(n,o,r){return n.firstChild.value},focus:function(n){}})}),e.attachEvent("onBeforeSectionRender",function(a,n,o){var r,_,i,s,d,l,h={};return a=="tree"&&(s="dhx_matrix_scell dhx_treetimeline",n.children?(r=o.folder_dy||o.dy,o.folder_dy&&!o.section_autoheight&&(i="height:"+o.folder_dy+"px;"),_="dhx_row_folder",s+=" folder",n.open?s+=" opened":s+=" closed",d="<div class='dhx_scell_expand'></div>",l=o.folder_events_available?"dhx_data_table folder_events":"dhx_data_table folder"):(r=o.dy,_="dhx_row_item",s+=" item",d="",l="dhx_data_table"),o.columns&&(s+=" dhx_matrix_scell_columns"),h={height:r,style_height:i,tr_className:_,td_className:s+=e.templates[o.name+"_scaley_class"](n.key,n.label,n)?" "+e.templates[o.name+"_scaley_class"](n.key,n.label,n):"",td_content:o.columns&&o.columns.length?"<div class='dhx_scell_name'><div class='dhx_scell_level dhx_scell_level"+n.level+"'>"+d+"</div>"+(e.templates[o.name+"_scale_label"](n.key,n.label,n)||n.label)+"</div>":"<div class='dhx_scell_level"+n.level+"'>"+d+"<div class='dhx_scell_name'>"+(e.templates[o.name+"_scale_label"](n.key,n.label,n)||n.label)+"</div></div>",table_className:l}),h}),e.attachEvent("onBeforeEventChanged",function(a,n,o){if(e._isRender("tree"))for(var r=e._get_event_sections?e._get_event_sections(a):[a[e.matrix[e._mode].y_property]],_=0;_<r.length;_++){var i=e.getSection(r[_]);if(i&&i.children&&!e.matrix[e._mode].folder_events_available)return o||(a[e.matrix[e._mode].y_property]=t),!1}return!0}),e.attachEvent("onBeforeDrag",function(a,n,o){if(e._isRender("tree")){var r,_=e._locate_cell_timeline(o);if(_&&(r=e.matrix[e._mode].y_unit[_.y].key,e.matrix[e._mode].y_unit[_.y].children&&!e.matrix[e._mode].folder_events_available))return!1;var i=e.getEvent(a),s=e.matrix[e._mode].y_property;t=i&&i[s]?i[s]:r}return!0}),e._getArrayToDisplay=function(a){var n=[],o=function(r,_,i,s){for(var d=_||0,l=0;l<r.length;l++){var h=r[l];h.level=d,h.$parent=i||null,h.children&&h.key===void 0&&(h.key=e.uid()),s||n.push(h),h.children&&o(h.children,d+1,h.key,s||!h.open)}};return o(a),n},e._getArrayForSelect=function(a,n){var o=[],r=function(_){for(var i=0;i<_.length;i++)e.matrix[n].folder_events_available?o.push(_[i]):_[i].children||o.push(_[i]),_[i].children&&r(_[i].children)};return r(a),o},e._toggleFolderDisplay=function(a,n,o){var r=function(i,s,d,l){for(var h=0;h<s.length&&(s[h].key!=i&&!l||!s[h].children||(s[h].open=d!==void 0?d:!s[h].open,l));h++)s[h].children&&r(i,s[h].children,d,l)},_=e.getSection(a);n!==void 0||o||(n=!_.open),e.callEvent("onBeforeFolderToggle",[_,n,o])&&(r(a,e.matrix[e._mode].y_unit_original,n,o),e.matrix[e._mode].y_unit=e._getArrayToDisplay(e.matrix[e._mode].y_unit_original),e.callEvent("onOptionsLoad",[]),e.callEvent("onAfterFolderToggle",[_,n,o]))},e.attachEvent("onCellClick",function(a,n,o,r,_){e._isRender("tree")&&(e.matrix[e._mode].folder_events_available||e.matrix[e._mode].y_unit[n]!==void 0&&e.matrix[e._mode].y_unit[n].children&&e._toggleFolderDisplay(e.matrix[e._mode].y_unit[n].key))}),e.attachEvent("onYScaleClick",function(a,n,o){e._isRender("tree")&&n.children&&e._toggleFolderDisplay(n.key)}),e.getSection=function(a){if(e._isRender("tree")){var n,o=function(r,_){for(var i=0;i<_.length;i++)_[i].key==r&&(n=_[i]),_[i].children&&o(r,_[i].children)};return o(a,e.matrix[e._mode].y_unit_original),n||null}},e.deleteSection=function(a){if(e._isRender("tree")){var n=!1,o=function(r,_){for(var i=0;i<_.length&&(_[i].key==r&&(_.splice(i,1),n=!0),!n);i++)_[i].children&&o(r,_[i].children)};return o(a,e.matrix[e._mode].y_unit_original),e.matrix[e._mode].y_unit=e._getArrayToDisplay(e.matrix[e._mode].y_unit_original),e.callEvent("onOptionsLoad",[]),n}},e.deleteAllSections=function(){e._isRender("tree")&&(e.matrix[e._mode].y_unit_original=[],e.matrix[e._mode].y_unit=e._getArrayToDisplay(e.matrix[e._mode].y_unit_original),e.callEvent("onOptionsLoad",[]))},e.addSection=function(a,n){if(e._isRender("tree")){var o=!1,r=function(_,i,s){if(n)for(var d=0;d<s.length&&(s[d].key==i&&s[d].children&&(s[d].children.push(_),o=!0),!o);d++)s[d].children&&r(_,i,s[d].children);else s.push(_),o=!0};return r(a,n,e.matrix[e._mode].y_unit_original),e.matrix[e._mode].y_unit=e._getArrayToDisplay(e.matrix[e._mode].y_unit_original),e.callEvent("onOptionsLoad",[]),o}},e.openAllSections=function(){e._isRender("tree")&&e._toggleFolderDisplay(1,!0,!0)},e.closeAllSections=function(){e._isRender("tree")&&e._toggleFolderDisplay(1,!1,!0)},e.openSection=function(a){e._isRender("tree")&&e._toggleFolderDisplay(a,!0)},e.closeSection=function(a){e._isRender("tree")&&e._toggleFolderDisplay(a,!1)}}function units(e){e._props={},e.createUnitsView=function(t,a,n,o,r,_,i){function s(h){return Math.round((e._correct_shift(+h,1)-+e._min_date)/864e5)}typeof t=="object"&&(n=t.list,a=t.property,o=t.size||0,r=t.step||1,_=t.skip_incorrect,i=t.days||1,t=t.name),e._props[t]={map_to:a,options:n,step:r,position:0,days:i},o>e._props[t].options.length&&(e._props[t]._original_size=o,o=0),e._props[t].size=o,e._props[t].skip_incorrect=_||!1,e.date[t+"_start"]=e.date.day_start,e.templates[t+"_date"]=function(h,f){return e._props[t].days>1?e.templates.week_date(h,f):e.templates.day_date(h)},e._get_unit_index=function(h,f){var m=h.position||0,u=s(f),p=h.size||h.options.length;return u>=p&&(u%=p),m+u},e.templates[t+"_scale_text"]=function(h,f,m){return m.css?"<span class='"+m.css+"'>"+f+"</span>":f},e.templates[t+"_scale_date"]=function(h){var f=e._props[t],m=f.options;if(!m.length)return"";var u=m[e._get_unit_index(f,h)],p=s(h),b=f.size||f.options.length,c=e.date.add(e.getState().min_date,Math.floor(p/b),"day");return e.templates[t+"_scale_text"](u.key,u.label,u,c)},e.templates[t+"_second_scale_date"]=function(h){return e.templates.week_scale_date(h)},e.date["add_"+t]=function(h,f){return e.date.add(h,f*e._props[t].days,"day")},e.date["get_"+t+"_end"]=function(h){return e.date.add(h,(e._props[t].size||e._props[t].options.length)*e._props[t].days,"day")},e.attachEvent("onOptionsLoad",function(){for(var h=e._props[t],f=h.order={},m=h.options,u=0;u<m.length;u++)f[m[u].key]=u;h._original_size&&h.size===0&&(h.size=h._original_size,delete h._original_size),h.size>m.length?(h._original_size=h.size,h.position=0,h.size=0):h.size=h._original_size||h.size,e._date&&e._mode==t&&e.setCurrentView(e._date,e._mode)}),e["mouse_"+t]=function(h){var f=e._props[this._mode];if(f){if(h=this._week_indexes_from_pos(h),this._drag_event||(this._drag_event={}),this._drag_id&&this._drag_mode&&(this._drag_event._dhx_changed=!0),this._drag_mode&&this._drag_mode=="new-size"){var m=e._get_event_sday(e._events[e._drag_id]);Math.floor(h.x/f.options.length)!=Math.floor(m/f.options.length)&&(h.x=m)}var u=f.size||f.options.length,p=h.x%u,b=Math.min(p+f.position,f.options.length-1);h.section=(f.options[b]||{}).key,h.x=Math.floor(h.x/u);var c=this.getEvent(this._drag_id);this._update_unit_section({view:f,event:c,pos:h})}return h.force_redraw=!0,h};var d=!1;function l(){d&&(e.xy.scale_height/=2,d=!1)}e[t+"_view"]=function(h){var f=e._props[e._mode];h?(f&&f.days>1?d||(d=e.xy.scale_height,e.xy.scale_height=2*e.xy.scale_height):l(),e._reset_scale()):l()},e.callEvent("onOptionsLoad",[])},e._update_unit_section=function(t){var a=t.view,n=t.event,o=t.pos;n&&(n[a.map_to]=o.section)},e.scrollUnit=function(t){var a=e._props[this._mode];a&&(a.position=Math.min(Math.max(0,a.position+t),a.options.length-a.size),this.setCurrentView())},function(){var t=function(u){var p=e._props[e._mode];if(p&&p.order&&p.skip_incorrect){for(var b=[],c=0;c<u.length;c++)p.order[u[c][p.map_to]]!==void 0&&b.push(u[c]);u.splice(0,u.length),u.push.apply(u,b)}return u},a=e._pre_render_events_table;e._pre_render_events_table=function(u,p){return u=t(u),a.apply(this,[u,p])};var n=e._pre_render_events_line;e._pre_render_events_line=function(u,p){return u=t(u),n.apply(this,[u,p])};var o=function(u,p){if(u&&u.order[p[u.map_to]]===void 0){var b=e,c=Math.floor((p.end_date-b._min_date)/864e5);return u.options.length&&(p[u.map_to]=u.options[Math.min(c+u.position,u.options.length-1)].key),!0}},r=e.is_visible_events;e.is_visible_events=function(u){var p=r.apply(this,arguments);if(p){var b=e._props[this._mode];if(b&&b.size){var c=b.order[u[b.map_to]];if(c<b.position||c>=b.size+b.position)return!1}}return p};var _=e._process_ignores;e._process_ignores=function(u,p,b,c,g){if(e._props[this._mode]){this._ignores={},this._ignores_detected=0;var v=e["ignore_"+this._mode];if(v){var y=e._props&&e._props[this._mode]?e._props[this._mode].size||e._props[this._mode].options.length:1;p/=y;for(var x=new Date(u),k=0;k<p;k++){if(v(x))for(var w=(k+1)*y,D=k*y;D<w;D++)this._ignores_detected+=1,this._ignores[D]=!0,g&&p++;x=e.date.add(x,c,b),e.date[b+"_start"]&&(x=e.date[b+"_start"](x))}}}else _.call(this,u,p,b,c,g)};var i=e._reset_scale;e._reset_scale=function(){var u=e._props[this._mode];u&&(u.size&&u.position&&u.size+u.position>u.options.length?u.position=Math.max(0,u.options.length-u.size):u.size||(u.position=0));var p=i.apply(this,arguments);if(u){this._max_date=this.date.add(this._min_date,u.days,"day");for(var b=this._els.dhx_cal_data[0].childNodes,c=0;c<b.length;c++)b[c].classList.remove("dhx_scale_holder_now");var g=this._currentDate();if(g.valueOf()>=this._min_date&&g.valueOf()<this._max_date){var v=Math.floor((g-e._min_date)/864e5),y=u.size||u.options.length,x=v*y,k=x+y;for(c=x;c<k;c++)b[c]&&b[c].classList.add("dhx_scale_holder_now")}if(u.size&&u.size<u.options.length){var w=this._els.dhx_cal_header[0],D=document.createElement("div");u.position&&(this._waiAria.headerButtonsAttributes(D,""),e.config.rtl?(D.className="dhx_cal_next_button",D.style.cssText="left:auto;margin-top:1px;right:0px;position:absolute;"):(D.className="dhx_cal_prev_button",D.style.cssText="left:1px;margin-top:1px;position:absolute;"),w.firstChild.appendChild(D),D.addEventListener("click",function(E){e.scrollUnit(-1*u.step),E.preventDefault()})),u.position+u.size<u.options.length&&(this._waiAria.headerButtonsAttributes(D,""),D=document.createElement("div"),e.config.rtl?(D.className="dhx_cal_prev_button",D.style.cssText="left:1px;margin-top:1px;position:absolute;"):(D.className="dhx_cal_next_button",D.style.cssText="left:auto;margin-top:1px;right:0px;position:absolute;"),w.lastChild.appendChild(D),D.addEventListener("click",function(){e.scrollUnit(u.step)}))}}return p};var s=e._get_view_end;e._get_view_end=function(){var u=e._props[this._mode];if(u&&u.days>1){var p=this._get_timeunit_start();return e.date.add(p,u.days,"day")}return s.apply(this,arguments)};var d=e._render_x_header;e._render_x_header=function(u,p,b,c){var g=e._props[this._mode];if(!g||g.days<=1)return d.apply(this,arguments);if(g.days>1){var v=c.querySelector(".dhx_second_cal_header");v||((v=document.createElement("div")).className="dhx_second_cal_header",c.appendChild(v));var y=e.xy.scale_height;e.xy.scale_height=Math.ceil(y/2),d.call(this,u,p,b,v,Math.ceil(e.xy.scale_height));var x=g.size||g.options.length;if((u+1)%x==0){var k=document.createElement("div");k.className="dhx_scale_bar dhx_second_scale_bar";var w=this.date.add(this._min_date,Math.floor(u/x),"day");this.templates[this._mode+"_second_scalex_class"]&&(k.className+=" "+this.templates[this._mode+"_second_scalex_class"](new Date(w)));var D,E=this._cols[u]*x;D=x>1&&this.config.rtl?this._colsS[u-(x-1)]-this.xy.scroll_width-2:x>1?this._colsS[u-(x-1)]-this.xy.scale_width-2:p,this.set_xy(k,E,this.xy.scale_height,D,0),k.innerHTML=this.templates[this._mode+"_second_scale_date"](new Date(w),this._mode),v.appendChild(k)}e.xy.scale_height=y}};var l=e._get_event_sday;e._get_event_sday=function(u){var p=e._props[this._mode];return p?p.days<=1?(o(p,u),this._get_section_sday(u[p.map_to])):Math.floor((u.end_date.valueOf()-1-60*u.end_date.getTimezoneOffset()*1e3-(e._min_date.valueOf()-60*e._min_date.getTimezoneOffset()*1e3))/864e5)*(p.size||p.options.length)+p.order[u[p.map_to]]-p.position:l.call(this,u)},e._get_section_sday=function(u){var p=e._props[this._mode];return p.order[u]-p.position};var h=e.locate_holder_day;e.locate_holder_day=function(u,p,b){var c,g=e._props[this._mode];return g?(b?o(g,b):(b={start_date:u,end_date:u},c=0),g.days<=1?1*(c===void 0?g.order[b[g.map_to]]:c)+(p?1:0)-g.position:Math.floor((b.start_date.valueOf()-e._min_date.valueOf())/864e5)*(g.size||g.options.length)+1*(c===void 0?g.order[b[g.map_to]]:c)+(p?1:0)-g.position):h.apply(this,arguments)};var f=e._time_order;e._time_order=function(u){var p=e._props[this._mode];p?u.sort(function(b,c){return p.order[b[p.map_to]]>p.order[c[p.map_to]]?1:-1}):f.apply(this,arguments)};var m=e._pre_render_events_table;e._pre_render_events_table=function(u,p){var b=e._props[this._mode];if(b&&b.days>1){for(var c,g={},v=0;v<u.length;v++){var y=u[v];if(e.isOneDayEvent(u[v]))g[w=+e.date.date_part(new Date(y.start_date))]||(g[w]=[]),g[w].push(y);else{var x=new Date(Math.min(+y.end_date,+this._max_date)),k=new Date(Math.max(+y.start_date,+this._min_date));for(k=e.date.day_start(k),u.splice(v,1),v--;+k<+x;){var w,D=this._copy_event(y);D.start_date=k,D.end_date=M(D.start_date),k=e.date.add(k,1,"day"),g[w=+e.date.date_part(new Date(k))]||(g[w]=[]),g[w].push(D)}}}u=[];for(var v in g){var E=m.apply(this,[g[v],p]),S=this._colsS.heights;(!c||S[0]>c[0])&&(c=S.slice()),u.push.apply(u,E)}var N=this._colsS.heights;for(N.splice(0,N.length),N.push.apply(N,c),v=0;v<u.length;v++)if(this._ignores[u[v]._sday])u.splice(v,1),v--;else{var A=u[v];A._first_chunk=A._last_chunk=!1,this.getEvent(A.id)._sorder=A._sorder}u.sort(function(T,C){return T.start_date.valueOf()==C.start_date.valueOf()?T.id>C.id?1:-1:T.start_date>C.start_date?1:-1})}else u=m.apply(this,[u,p]);function M(T){var C=e.date.add(T,1,"day");return C=e.date.date_part(C)}return u},e.attachEvent("onEventAdded",function(u,p){if(this._loading)return!0;for(var b in e._props){var c=e._props[b];p[c.map_to]===void 0&&c.options[0]&&(p[c.map_to]=c.options[0].key)}return!0}),e.attachEvent("onEventCreated",function(u,p){var b=e._props[this._mode];if(b&&p){var c=this.getEvent(u);o(b,c);var g=this._mouse_coords(p);this._update_unit_section({view:b,event:c,pos:g}),this.event_updated(c)}return!0})}()}function url(e){e._get_url_nav=function(){for(var t={},a=(document.location.hash||"").replace("#","").split(","),n=0;n<a.length;n++){var o=a[n].split("=");o.length==2&&(t[o[0]]=o[1])}return t},e.attachEvent("onTemplatesReady",function(){var t=!0,a=e.date.str_to_date("%Y-%m-%d"),n=e.date.date_to_str("%Y-%m-%d"),o=e._get_url_nav().event||null;function r(_){if(e.$destroyed)return!0;o=_,e.getEvent(_)&&e.showEvent(_)}e.attachEvent("onAfterEventDisplay",function(_){return o=null,!0}),e.attachEvent("onBeforeViewChange",function(_,i,s,d){if(t){t=!1;var l=e._get_url_nav();if(l.event)try{if(e.getEvent(l.event))return setTimeout(function(){r(l.event)}),!1;var h=e.attachEvent("onXLE",function(){setTimeout(function(){r(l.event)}),e.detachEvent(h)})}catch{}if(l.date||l.mode){try{this.setCurrentView(l.date?a(l.date):null,l.mode||null)}catch{this.setCurrentView(l.date?a(l.date):null,s)}return!1}}var f=["date="+n(d||i),"mode="+(s||_)];o&&f.push("event="+o);var m="#"+f.join(",");return document.location.hash=m,!0})})}function week_agenda(e){var t;e._wa={},e.xy.week_agenda_scale_height=20,e.templates.week_agenda_event_text=function(a,n,o,r){return e.templates.event_date(a)+" "+o.text},e.date.week_agenda_start=e.date.week_start,e.date.week_agenda_end=function(a){return e.date.add(a,7,"day")},e.date.add_week_agenda=function(a,n){return e.date.add(a,7*n,"day")},e.attachEvent("onSchedulerReady",function(){var a=e.templates;a.week_agenda_date||(a.week_agenda_date=a.week_date)}),t=e.date.date_to_str("%l, %F %d"),e.templates.week_agenda_scale_date=function(a){return t(a)},e.attachEvent("onTemplatesReady",function(){var a=e.render_data;function n(o){return`<div class='dhx_wa_day_cont'>
	<div class='dhx_wa_scale_bar'></div>
	<div class='dhx_wa_day_data' data-day='${o}'></div>
</div>`}e.render_data=function(o){if(this._mode!="week_agenda")return a.apply(this,arguments);e.week_agenda_view(!0)},e.week_agenda_view=function(o){e._min_date=e.date.week_start(e._date),e._max_date=e.date.add(e._min_date,1,"week"),e.set_sizes(),o?(e._table_view=e._allow_dnd=!0,e.$container.querySelector(".dhx_cal_header").style.display="none",e._els.dhx_cal_date[0].innerHTML="",function(){e._els.dhx_cal_data[0].innerHTML="",e._rendered=[];var r=`<div class="dhx_week_agenda_wrapper">
<div class='dhx_wa_column'>
	${n(0)}
	${n(1)}
	${n(2)}
</div>
<div class='dhx_wa_column'>
	${n(3)}
	${n(4)}
	${n(5)}
	${n(6)}
</div>
</div>`,_=e._getNavDateElement();_&&(_.innerHTML=e.templates[e._mode+"_date"](e._min_date,e._max_date,e._mode)),e._els.dhx_cal_data[0].innerHTML=r;const i=e.$container.querySelectorAll(".dhx_wa_day_cont");e._wa._selected_divs=[];for(var s=e.get_visible_events(),d=e.date.week_start(e._date),l=e.date.add(d,1,"day"),h=0;h<7;h++){i[h]._date=d,i[h].setAttribute("data-date",e.templates.format_date(d)),e._waiAria.weekAgendaDayCell(i[h],d);var f=i[h].querySelector(".dhx_wa_scale_bar"),m=i[h].querySelector(".dhx_wa_day_data");f.innerHTML=e.templates.week_agenda_scale_date(d);for(var u=[],p=0;p<s.length;p++){var b=s[p];b.start_date<l&&b.end_date>d&&u.push(b)}u.sort(function(k,w){return k.start_date.valueOf()==w.start_date.valueOf()?k.id>w.id?1:-1:k.start_date>w.start_date?1:-1});for(var c=0;c<u.length;c++){var g=u[c],v=document.createElement("div");e._rendered.push(v);var y=e.templates.event_class(g.start_date,g.end_date,g);v.classList.add("dhx_wa_ev_body"),y&&v.classList.add(y),e.config.rtl&&v.classList.add("dhx_wa_ev_body_rtl"),g._text_style&&(v.style.cssText=g._text_style),g.color&&v.style.setProperty("--dhx-scheduler-event-background",g.color),g.textColor&&v.style.setProperty("--dhx-scheduler-event-color",g.textColor),e._select_id&&g.id==e._select_id&&(e.config.week_agenda_select||e.config.week_agenda_select===void 0)&&(v.classList.add("dhx_cal_event_selected"),e._wa._selected_divs.push(v));var x="";g._timed||(x="middle",g.start_date.valueOf()>=d.valueOf()&&g.start_date.valueOf()<=l.valueOf()&&(x="start"),g.end_date.valueOf()>=d.valueOf()&&g.end_date.valueOf()<=l.valueOf()&&(x="end")),v.innerHTML=e.templates.week_agenda_event_text(g.start_date,g.end_date,g,d,x),v.setAttribute("event_id",g.id),v.setAttribute(e.config.event_attribute,g.id),e._waiAria.weekAgendaEvent(v,g),m.appendChild(v)}d=e.date.add(d,1,"day"),l=e.date.add(l,1,"day")}}()):(e._table_view=e._allow_dnd=!1,e.$container.querySelector(".dhx_cal_header").style.display="")},e.mouse_week_agenda=function(o){var r=o.ev;const _=o.ev.target.closest(".dhx_wa_day_cont");let i;if(_&&(i=_._date),!i)return o;o.x=0;var s=i.valueOf()-e._min_date.valueOf();if(o.y=Math.ceil(s/6e4/this.config.time_step),this._drag_mode=="move"&&this._drag_pos&&this._is_pos_changed(this._drag_pos,o)){var d;this._drag_event._dhx_changed=!0,this._select_id=this._drag_id;for(var l=0;l<e._rendered.length;l++)e._drag_id==this._rendered[l].getAttribute(this.config.event_attribute)&&(d=this._rendered[l]);if(!e._wa._dnd){var h=d.cloneNode(!0);this._wa._dnd=h,h.className=d.className,h.id="dhx_wa_dnd",h.className+=" dhx_wa_dnd",document.body.appendChild(h)}var f=document.getElementById("dhx_wa_dnd");f.style.top=(r.pageY||r.clientY)+20+"px",f.style.left=(r.pageX||r.clientX)+20+"px"}return o},e.attachEvent("onBeforeEventChanged",function(o,r,_){if(this._mode=="week_agenda"&&this._drag_mode=="move"){var i=document.getElementById("dhx_wa_dnd");i.parentNode.removeChild(i),e._wa._dnd=!1}return!0}),e.attachEvent("onEventSave",function(o,r,_){return _&&this._mode=="week_agenda"&&(this._select_id=o),!0}),e._wa._selected_divs=[],e.attachEvent("onClick",function(o,r){if(this._mode=="week_agenda"&&(e.config.week_agenda_select||e.config.week_agenda_select===void 0)){if(e._wa._selected_divs)for(var _=0;_<this._wa._selected_divs.length;_++){var i=this._wa._selected_divs[_];i.className=i.className.replace(/ dhx_cal_event_selected/,"")}return this.for_rendered(o,function(s){s.className+=" dhx_cal_event_selected",e._wa._selected_divs.push(s)}),e._select_id=o,!1}return!0})})}function wp(e){e.attachEvent("onLightBox",function(){if(this._cover)try{this._cover.style.height=this.expanded?"100%":(document.body.parentNode||document.body).scrollHeight+"px"}catch{}}),e.form_blocks.select.set_value=function(t,a,n){a!==void 0&&a!==""||(a=(t.firstChild.options[0]||{}).value),t.firstChild.value=a||""}}function year_view(e){e.templates.year_date=function(i){return e.date.date_to_str(e.locale.labels.year_tab+" %Y")(i)},e.templates.year_month=e.date.date_to_str("%F"),e.templates.year_scale_date=e.date.date_to_str("%D"),e.templates.year_tooltip=function(i,s,d){return d.text};const t=function(){return e._mode=="year"},a=function(i){var s=e.$domHelpers.closest(i,"[data-cell-date]");return s&&s.hasAttribute("data-cell-date")?e.templates.parse_date(s.getAttribute("data-cell-date")):null};e.dblclick_dhx_month_head=function(i){if(t()){const s=i.target;if(e.$domHelpers.closest(s,".dhx_before")||e.$domHelpers.closest(s,".dhx_after"))return!1;const d=a(s);if(d){const l=d,h=this.date.add(l,1,"day");!this.config.readonly&&this.config.dblclick_create&&this.addEventNow(l.valueOf(),h.valueOf(),i)}}},e.attachEvent("onEventIdChange",function(){t()&&this.year_view(!0)});var n=e.render_data;e.render_data=function(i){if(!t())return n.apply(this,arguments);for(var s=0;s<i.length;s++)this._year_render_event(i[s])};var o=e.clear_view;e.clear_view=function(){if(!t())return o.apply(this,arguments);var i=e._year_marked_cells;for(var s in i)i.hasOwnProperty(s)&&i[s].classList.remove("dhx_year_event","dhx_cal_datepicker_event");e._year_marked_cells={}},e._hideToolTip=function(){this._tooltip&&(this._tooltip.style.display="none",this._tooltip.date=new Date(9999,1,1))},e._showToolTip=function(i,s,d,l){if(this._tooltip){if(this._tooltip.date.valueOf()==i.valueOf())return;this._tooltip.innerHTML=""}else{var h=this._tooltip=document.createElement("div");h.className="dhx_year_tooltip",this.config.rtl&&(h.className+=" dhx_tooltip_rtl"),document.body.appendChild(h),h.addEventListener("click",e._click.dhx_cal_data),h.addEventListener("click",function(g){if(g.target.closest(`[${e.config.event_attribute}]`)){const v=g.target.closest(`[${e.config.event_attribute}]`).getAttribute(e.config.event_attribute);e.showLightbox(v)}})}for(var f=this.getEvents(i,this.date.add(i,1,"day")),m="",u=0;u<f.length;u++){var p=f[u];if(this.filter_event(p.id,p)){var b=p.color?"--dhx-scheduler-event-background:"+p.color+";":"",c=p.textColor?"--dhx-scheduler-event-color:"+p.textColor+";":"";m+="<div class='dhx_tooltip_line' style='"+b+c+"' event_id='"+f[u].id+"' "+this.config.event_attribute+"='"+f[u].id+"'>",m+="<div class='dhx_tooltip_date' style='"+b+c+"'>"+(f[u]._timed?this.templates.event_date(f[u].start_date):"")+"</div>",m+="<div class='dhx_event_icon icon_details'>&nbsp;</div>",m+=this.templates.year_tooltip(f[u].start_date,f[u].end_date,f[u])+"</div>"}}this._tooltip.style.display="",this._tooltip.style.top="0px",document.body.offsetWidth-s.left-this._tooltip.offsetWidth<0?this._tooltip.style.left=s.left-this._tooltip.offsetWidth+"px":this._tooltip.style.left=s.left+l.offsetWidth+"px",this._tooltip.date=i,this._tooltip.innerHTML=m,document.body.offsetHeight-s.top-this._tooltip.offsetHeight<0?this._tooltip.style.top=s.top-this._tooltip.offsetHeight+l.offsetHeight+"px":this._tooltip.style.top=s.top+"px"},e._year_view_tooltip_handler=function(i){if(t()){var s=i.target||i.srcElement;s.tagName.toLowerCase()=="a"&&(s=s.parentNode),e._getClassName(s).indexOf("dhx_year_event")!=-1?e._showToolTip(e.templates.parse_date(s.getAttribute("data-year-date")),e.$domHelpers.getOffset(s),i,s):e._hideToolTip()}},e._init_year_tooltip=function(){e._detachDomEvent(e._els.dhx_cal_data[0],"mouseover",e._year_view_tooltip_handler),e.event(e._els.dhx_cal_data[0],"mouseover",e._year_view_tooltip_handler)},e._get_year_cell=function(i){for(var s=e.templates.format_date(i),d=this.$root.querySelectorAll(`.dhx_cal_data .dhx_cal_datepicker_date[data-cell-date="${s}"]`),l=0;l<d.length;l++)if(!e.$domHelpers.closest(d[l],".dhx_after, .dhx_before"))return d[l];return null},e._year_marked_cells={},e._mark_year_date=function(i,s){var d=e.templates.format_date(i),l=this._get_year_cell(i);if(l){var h=this.templates.event_class(s.start_date,s.end_date,s);e._year_marked_cells[d]||(l.classList.add("dhx_year_event","dhx_cal_datepicker_event"),l.setAttribute("data-year-date",d),l.setAttribute("date",d),e._year_marked_cells[d]=l),h&&l.classList.add(h)}},e._unmark_year_date=function(i){var s=this._get_year_cell(i);s&&s.classList.remove("dhx_year_event","dhx_cal_datepicker_event")},e._year_render_event=function(i){var s=i.start_date;for(s=s.valueOf()<this._min_date.valueOf()?this._min_date:this.date.date_part(new Date(s));s<i.end_date;)if(this._mark_year_date(s,i),(s=this.date.add(s,1,"day")).valueOf()>=this._max_date.valueOf())return},e.year_view=function(i){if(e.set_sizes(),e._table_view=i,!this._load_mode||!this._load())if(i){if(e._init_year_tooltip(),e._reset_year_scale(),e._load_mode&&e._load())return void(e._render_wait=!0);e.render_view_data()}else e._hideToolTip()},e._reset_year_scale=function(){this._cols=[],this._colsS={};var i=[],s=this._els.dhx_cal_data[0],d=this.config;s.scrollTop=0,s.innerHTML="";var l=Math.floor(parseInt(s.style.width)/d.year_x),h=Math.floor((parseInt(s.style.height)-e.xy.year_top)/d.year_y);h<190&&(h=190,l=Math.floor((parseInt(s.style.width)-e.xy.scroll_width)/d.year_x));var f=document.createElement("div"),m=this.date.week_start(e._currentDate());this._process_ignores(m,7,"day",1);for(var u=0;u<7;u++)this._ignores&&this._ignores[u]||(this._cols[u]="var(--dhx-scheduler-datepicker-cell-size)",this._render_x_header(u,0,m,f)),m=this.date.add(m,1,"day");for(f.lastChild.className+=" dhx_scale_bar_last",u=0;u<f.childNodes.length;u++)this._waiAria.yearHeadCell(f.childNodes[u]);var p=this.date[this._mode+"_start"](this.date.copy(this._date)),b=p,c=null;const g=document.createElement("div");for(g.classList.add("dhx_year_wrapper"),u=0;u<d.year_y;u++)for(var v=0;v<d.year_x;v++){(c=document.createElement("div")).className="dhx_year_box",this._is_new_skin()||(c.style.cssText="position:absolute;"),c.setAttribute("date",this._helpers.formatDate(p)),c.setAttribute("data-month-date",this._helpers.formatDate(p)),c.innerHTML="<div class='dhx_year_month'></div><div class='dhx_year_grid'><div class='dhx_year_week'>"+f.innerHTML+"</div><div class='dhx_year_body'></div></div>";var y=c.querySelector(".dhx_year_month"),x=c.querySelector(".dhx_year_grid"),k=c.querySelector(".dhx_year_week"),w=c.querySelector(".dhx_year_body"),D=e.uid();this._waiAria.yearHeader(y,D),this._waiAria.yearGrid(x,D),y.innerHTML=this.templates.year_month(p);var E=this.date.week_start(p);this._reset_month_scale(w,p,E,6);for(var S=w.querySelectorAll("td"),N=0;N<S.length;N++)this._waiAria.yearDayCell(S[N]);if(g.appendChild(c),!this._is_new_skin()){k.style.height=k.childNodes[0].offsetHeight+"px";var A=Math.round((h-190)/2);c.style.marginTop=A+"px",this.set_xy(c,l-10,h-A-10,l*v+5,h*u+5+e.xy.year_top)}i[u*d.year_x+v]=(p.getDay()-(this.config.start_on_monday?1:0)+7)%7,p=this.date.add(p,1,"month")}s.appendChild(g);var M=this._getNavDateElement();M&&(M.innerHTML=this.templates[this._mode+"_date"](b,p,this._mode)),this.week_starts=i,i._month=b.getMonth(),this._min_date=b,this._max_date=p},e._reset_year_scale=function(){var i=this._els.dhx_cal_data[0];i.scrollTop=0,i.innerHTML="";let s=this.date.year_start(new Date(this._date));this._min_date=this.date.week_start(new Date(s));const d=document.createElement("div");d.classList.add("dhx_year_wrapper");let l=s;for(let m=0;m<12;m++){let u=document.createElement("div");u.className="dhx_year_box",u.setAttribute("date",this._helpers.formatDate(l)),u.setAttribute("data-month-date",this._helpers.formatDate(l)),u.innerHTML=`<div class='dhx_year_month'>${this.templates.year_month(l)}</div>
			<div class='dhx_year_grid'></div>`;const p=u.querySelector(".dhx_year_grid"),b=e._createDatePicker(null,{date:l,minWeeks:6});b._renderDayGrid(p),b.destructor(),d.appendChild(u),l=this.date.add(l,1,"month")}i.appendChild(d);let h=this.date.add(s,1,"year");h.valueOf()!=this.date.week_start(new Date(h)).valueOf()&&(h=this.date.week_start(new Date(h)),h=this.date.add(h,1,"week")),this._max_date=h;var f=this._getNavDateElement();f&&(f.innerHTML=this.templates[this._mode+"_date"](s,h,this._mode))};var r=e.getActionData;e.getActionData=function(i){return t()?{date:a(i.target),section:null}:r.apply(e,arguments)};var _=e._locate_event;e._locate_event=function(i){var s=_.apply(e,arguments);if(!s){var d=a(i);if(!d)return null;var l=e.getEvents(d,e.date.add(d,1,"day"));if(!l.length)return null;s=l[0].id}return s},e.attachEvent("onDestroy",function(){e._hideToolTip()})}function export_api(e){(function(){function t(n,o){for(var r in o)n[r]||(n[r]=o[r]);return n}function a(n,o){var r={};return(n=o._els[n])&&n[0]?(r.x=n[0].scrollWidth,r.y=n[0].scrollHeight):(r.x=0,r.y=0),r}window.dhtmlxAjax||(window.dhtmlxAjax={post:function(n,o,r){return window.dhx4.ajax.post(n,o,r)},get:function(n,o){return window.ajax.get(n,o)}}),function(n){function o(){var r=n.getState().mode;return n.matrix&&n.matrix[r]?n.matrix[r]:null}n.exportToPDF=function(r){(r=t(r||{},{name:"calendar.pdf",format:"A4",orientation:"landscape",dpi:96,zoom:1,rtl:n.config.rtl})).html=this._export_html(r),r.mode=this.getState().mode,this._send_to_export(r,"pdf")},n.exportToPNG=function(r){(r=t(r||{},{name:"calendar.png",format:"A4",orientation:"landscape",dpi:96,zoom:1,rtl:n.config.rtl})).html=this._export_html(r),r.mode=this.getState().mode,this._send_to_export(r,"png")},n.exportToICal=function(r){r=t(r||{},{name:"calendar.ical",data:this._serialize_plain(null,r)}),this._send_to_export(r,"ical")},n.exportToExcel=function(r){r=t(r||{},{name:"calendar.xlsx",title:"Events",data:this._serialize_plain(this.templates.xml_format,r),columns:this._serialize_columns()}),this._send_to_export(r,"excel")},n._ajax_to_export=function(r,_,i){delete r.callback;var s=r.server||"https://export.dhtmlx.com/scheduler";window.dhtmlxAjax.post(s,"type="+_+"&store=1&data="+encodeURIComponent(JSON.stringify(r)),function(d){var l=null;if(!(d.xmlDoc.status>400))try{l=JSON.parse(d.xmlDoc.responseText)}catch{}i(l)})},n._plain_export_copy=function(r,_){var i={};for(var s in r)i[s]=r[s];return i.start_date=_(i.start_date),i.end_date=_(i.end_date),i.$text=this.templates.event_text(r.start_date,r.end_date,r),i},n._serialize_plain=function(r,_){var i;r=r||n.date.date_to_str("%Y%m%dT%H%i%s",!0),i=_&&_.start&&_.end?n.getEvents(_.start,_.end):n.getEvents();for(var s=[],d=0;d<i.length;d++)s[d]=this._plain_export_copy(i[d],r);return s},n._serialize_columns=function(){return[{id:"start_date",header:"Start Date",width:30},{id:"end_date",header:"End Date",width:30},{id:"$text",header:"Text",width:100}]},n._send_to_export=function(r,_){if(r.version||(r.version=n.version),r.skin||(r.skin=n.skin),r.callback)return n._ajax_to_export(r,_,r.callback);var i=this._create_hidden_form();i.firstChild.action=r.server||"https://export.dhtmlx.com/scheduler",i.firstChild.childNodes[0].value=JSON.stringify(r),i.firstChild.childNodes[1].value=_,i.firstChild.submit()},n._create_hidden_form=function(){if(!this._hidden_export_form){var r=this._hidden_export_form=document.createElement("div");r.style.display="none",r.innerHTML="<form method='POST' target='_blank'><input type='text' name='data'><input type='hidden' name='type' value=''></form>",document.body.appendChild(r)}return this._hidden_export_form},n._get_export_size=function(r,_,i,s,d,l,h){s=parseInt(s)/25.4||4;var f={A5:{x:148,y:210},A4:{x:210,y:297},A3:{x:297,y:420},A2:{x:420,y:594},A1:{x:594,y:841},A0:{x:841,y:1189}},m=a("dhx_cal_data",this).x,u={y:a("dhx_cal_data",this).y+a("dhx_cal_header",this).y+a("dhx_multi_day",this).y};return u.x=r==="full"?m:Math.floor((_==="landscape"?f[r].y:f[r].x)*s),h&&(u.x*=parseFloat(h.x)||1,u.y*=parseFloat(h.y)||1),u},n._export_html=function(r){var _=function(){var d=void 0,l=void 0,h=o();return h&&(l=h.scrollable,d=h.smart_rendering),{nav_height:n.xy.nav_height,scroll_width:n.xy.scroll_width,style_width:n._obj.style.width,style_height:n._obj.style.height,timeline_scrollable:l,timeline_smart_rendering:d}}(),i=n._get_export_size(r.format,r.orientation,r.zoom,r.dpi,r.header,r.footer,r.scales),s="";try{(function(d,l){n._obj.style.width=d.x+"px",n._obj.style.height=d.y+"px",n.xy.nav_height=0,n.xy.scroll_width=0;var h=o();(l.timeline_scrollable||l.timeline_smart_rendering)&&(h.scrollable=!1,h.smart_rendering=!1)})(i,_),n.setCurrentView(),s=n._obj.innerHTML}catch(d){console.error(d)}finally{(function(d){n.xy.scroll_width=d.scroll_width,n.xy.nav_height=d.nav_height,n._obj.style.width=d.style_width,n._obj.style.height=d.style_height;var l=o();(d.timeline_scrollable||d.timeline_smart_rendering)&&(l.scrollable=d.timeline_scrollable,l.smart_rendering=d.timeline_smart_rendering)})(_),n.setCurrentView()}return s}}(e)})()}const allExtensions={active_links,agenda_legacy,agenda_view,all_timed,collision,container_autoresize,cookie,daytimeline,drag_between,editors,expand,export_api,grid_view,html_templates,key_nav,layer,legacy,limit,map_view,minical,monthheight,multisection,multiselect,multisource,mvc,outerdrag,pdf,quick_info,readonly,recurring,serialize,timeline,tooltip,treetimeline,units,url,week_agenda,wp,year_view},factory=new SchedulerFactory(allExtensions),scheduler=factory.getSchedulerInstance(),Scheduler$1=factory;window.scheduler=scheduler,window.Scheduler=Scheduler$1,window.$dhx||(window.$dhx={}),window.$dhx.scheduler=scheduler,window.$dhx.Scheduler=Scheduler$1,exports.Scheduler=Scheduler$1,exports.scheduler=scheduler,Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})});
